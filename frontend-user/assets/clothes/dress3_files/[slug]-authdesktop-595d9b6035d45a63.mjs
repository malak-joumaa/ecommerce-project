(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[11450,90732,14166,42150],{337148:e=>{var t,o,i={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaOnIdeaPinPermissionQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3GetCurrentUserHandlerQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"data",plural:!1,selections:[t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"ipStelaRecDisabled",storageKey:null}],type:"User",abstractKey:null}],storageKey:null}],type:"V3GetCurrentUserHandler",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"StelaOnIdeaPinPermissionQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3GetCurrentUserHandlerQuery",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"data",plural:!1,selections:[o,t,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null}],type:"V3GetCurrentUserHandler",abstractKey:null}],storageKey:null}]},params:{cacheID:"f6e0b195a5e1e15958602eecc2c94dba",id:null,metadata:{},name:"StelaOnIdeaPinPermissionQuery",operationKind:"query",text:"query StelaOnIdeaPinPermissionQuery {\n  v3GetCurrentUserHandlerQuery {\n    __typename\n    ... on V3GetCurrentUserHandler {\n      data {\n        __typename\n        ... on User {\n          ipStelaRecDisabled\n        }\n        ... on Node {\n          __isNode: __typename\n          id\n        }\n      }\n    }\n  }\n}\n"}};i.hash="c061d1400492f868408772f86f659738",e.exports=i},453658:(e,t,o)=>{var i={"./":[106860,9],"./CZ":[590685,9,90685],"./CZ.js":[590685,9,90685],"./DA":[237534,9,37534],"./DA.js":[237534,9,37534],"./DE":[159788,9,59788],"./DE.js":[159788,9,59788],"./ENUK":[199555,9,99555],"./ENUK.js":[199555,9,99555],"./ENUS":[326380,9,26380],"./ENUS.js":[326380,9,26380],"./ESAR":[874795,9,74795],"./ESAR.js":[874795,9,74795],"./ESES":[315152,9,15152],"./ESES.js":[315152,9,15152],"./ESMX":[591787,9,91787],"./ESMX.js":[591787,9,91787],"./FI":[684204,9,84204],"./FI.js":[684204,9,84204],"./FR":[197400,9,97400],"./FR.js":[197400,9,97400],"./GR":[938439,9,38439],"./GR.js":[938439,9,38439],"./HI":[144014,9,44014],"./HI.js":[144014,9,44014],"./HU":[843479,9,43479],"./HU.js":[843479,9,43479],"./ID":[111450,9,19798],"./ID.js":[111450,9,19798],"./IT":[259916,9,59916],"./IT.js":[259916,9,59916],"./JP":[65083,9,65083],"./JP.js":[65083,9,65083],"./KR":[576525,9,76525],"./KR.js":[576525,9,76525],"./MS":[347840,9,47840],"./MS.js":[347840,9,47840],"./NL":[689761,9,89761],"./NL.js":[689761,9,89761],"./NO":[693952,9,93952],"./NO.js":[693952,9,93952],"./PL":[383843,9,83843],"./PL.js":[383843,9,83843],"./PTBR":[735826,9,35826],"./PTBR.js":[735826,9,35826],"./PTPT":[578882,9,78882],"./PTPT.js":[578882,9,78882],"./RO":[840316,9,40316],"./RO.js":[840316,9,40316],"./RU":[257367,9,57367],"./RU.js":[257367,9,57367],"./SK":[636295,9,36295],"./SK.js":[636295,9,36295],"./SV":[921501,9,21501],"./SV.js":[921501,9,21501],"./TH":[641767,9,41767],"./TH.js":[641767,9,41767],"./TL":[928578,9,28578],"./TL.js":[928578,9,28578],"./TR":[391953,9,91953],"./TR.js":[391953,9,91953],"./UA":[176010,9,76010],"./UA.js":[176010,9,76010],"./VT":[96894,9,96894],"./VT.js":[96894,9,96894],"./ZHCN":[982436,9,82436],"./ZHCN.js":[982436,9,82436],"./ZHTW":[229518,9,29518],"./ZHTW.js":[229518,9,29518],"./index":[106860,9],"./index.js":[106860,9],"./localeToFilename":[161087,9],"./localeToFilename.js":[161087,9],"./types":[927431,7,27431],"./types.js":[927431,7,27431]};function n(e){if(!o.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],n=t[0];return Promise.all(t.slice(2).map(o.e)).then((()=>o.t(n,16|t[1])))}n.keys=()=>Object.keys(i),n.id=453658,e.exports=n},701305:e=>{var t=[],o=[];function i(e,t,o,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;var s=Object.prototype.toString,r=s.call(e);if(r!=s.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return!isNaN(e)&&!isNaN(t)&&e==Number(t);case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}for(var a=o.length;a--;)if(o[a]==e)return n[a]==t;o.push(e),n.push(t);var l=0;if("[object Array]"===r){if((l=e.length)!==t.length)return!1;for(;l--;)if(!i(e[l],t[l],o,n))return!1}else{if(e.constructor!==t.constructor)return!1;if(e.hasOwnProperty("valueOf")&&t.hasOwnProperty("valueOf"))return e.valueOf()==t.valueOf();var d=Object.keys(e);if(d.length!=Object.keys(t).length)return!1;for(var c=0;c<d.length;c++)if(!i(e[d[c]],t[d[c]],o,n))return!1}return o.pop(),n.pop(),!0}e.exports=function(e,n){var s=t.length?t.pop():[],r=o.length?o.pop():[],a=i(e,n,s,r);return s.length=0,r.length=0,t.push(s),o.push(r),a}},60139:e=>{function t(e){return function(){return e}}var o=function(){};o.thatReturns=t,o.thatReturnsFalse=t(!1),o.thatReturnsTrue=t(!0),o.thatReturnsNull=t(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},663620:(e,t,o)=>{var i=o(60139);e.exports=i},288668:(e,t,o)=>{var i=o(883369),n=o(90619),s=o(572385);function r(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new i;++t<o;)this.add(e[t])}r.prototype.add=r.prototype.push=n,r.prototype.has=s,e.exports=r},282908:e=>{e.exports=function(e,t){for(var o=-1,i=null==e?0:e.length;++o<i;)if(t(e[o],o,e))return!0;return!1}},989881:(e,t,o)=>{var i=o(247816),n=o(899291)(i);e.exports=n},247816:(e,t,o)=>{var i=o(228483),n=o(3674);e.exports=function(e,t){return e&&i(e,t,n)}},690939:(e,t,o)=>{var i=o(902492),n=o(637005);e.exports=function e(t,o,s,r,a){return t===o||(null==t||null==o||!n(t)&&!n(o)?t!=t&&o!=o:i(t,o,s,r,e,a))}},902492:(e,t,o)=>{var i=o(646384),n=o(967114),s=o(518351),r=o(916096),a=o(664160),l=o(701469),d=o(644144),c=o(936719),h="[object Arguments]",u="[object Array]",_="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,o,g,m,b){var x=l(e),f=l(t),v=x?u:a(e),y=f?u:a(t),P=(v=v==h?_:v)==_,C=(y=y==h?_:y)==_,j=v==y;if(j&&d(e)){if(!d(t))return!1;x=!0,P=!1}if(j&&!P)return b||(b=new i),x||c(e)?n(e,t,o,g,m,b):s(e,t,v,o,g,m,b);if(!(1&o)){var w=P&&p.call(e,"__wrapped__"),A=C&&p.call(t,"__wrapped__");if(w||A){var S=w?e.value():e,z=A?t.value():t;return b||(b=new i),m(S,z,o,g,b)}}return!!j&&(b||(b=new i),r(e,t,o,g,m,b))}},702958:(e,t,o)=>{var i=o(646384),n=o(690939);e.exports=function(e,t,o,s){var r=o.length,a=r,l=!s;if(null==e)return!a;for(e=Object(e);r--;){var d=o[r];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++r<a;){var c=(d=o[r])[0],h=e[c],u=d[1];if(l&&d[2]){if(void 0===h&&!(c in e))return!1}else{var _=new i;if(s)var p=s(h,u,c,e,t,_);if(!(void 0===p?n(u,h,3,s,_):p))return!1}}return!0}},267206:(e,t,o)=>{var i=o(191573),n=o(716432),s=o(406557),r=o(701469),a=o(139601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?r(e)?n(e[0],e[1]):i(e):a(e)}},269199:(e,t,o)=>{var i=o(989881),n=o(498612);e.exports=function(e,t){var o=-1,s=n(e)?Array(e.length):[];return i(e,(function(e,i,n){s[++o]=t(e,i,n)})),s}},191573:(e,t,o)=>{var i=o(702958),n=o(301499),s=o(542634);e.exports=function(e){var t=n(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(o){return o===e||i(o,e,t)}}},716432:(e,t,o)=>{var i=o(690939),n=o(227361),s=o(379095),r=o(115403),a=o(689162),l=o(542634),d=o(240327);e.exports=function(e,t){return r(e)&&a(t)?l(d(e),t):function(o){var r=n(o,e);return void 0===r&&r===t?s(o,e):i(t,r,3)}}},882689:(e,t,o)=>{var i=o(829932),n=o(297786),s=o(267206),r=o(269199),a=o(571131),l=o(307518),d=o(285022),c=o(406557),h=o(701469);e.exports=function(e,t,o){t=t.length?i(t,(function(e){return h(e)?function(t){return n(t,1===e.length?e[0]:e)}:e})):[c];var u=-1;t=i(t,l(s));var _=r(e,(function(e,o,n){return{criteria:i(t,(function(t){return t(e)})),index:++u,value:e}}));return a(_,(function(e,t){return d(e,t,o)}))}},840371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},379152:(e,t,o)=>{var i=o(297786);e.exports=function(e){return function(t){return i(t,e)}}},540098:e=>{var t=Math.ceil,o=Math.max;e.exports=function(e,i,n,s){for(var r=-1,a=o(t((i-e)/(n||1)),0),l=Array(a);a--;)l[s?a:++r]=e,e+=n;return l}},571131:e=>{e.exports=function(e,t){var o=e.length;for(e.sort(t);o--;)e[o]=e[o].value;return e}},274757:e=>{e.exports=function(e,t){return e.has(t)}},626393:(e,t,o)=>{var i=o(733448);e.exports=function(e,t){if(e!==t){var o=void 0!==e,n=null===e,s=e==e,r=i(e),a=void 0!==t,l=null===t,d=t==t,c=i(t);if(!l&&!c&&!r&&e>t||r&&a&&d&&!l&&!c||n&&a&&d||!o&&d||!s)return 1;if(!n&&!r&&!c&&e<t||c&&o&&s&&!n&&!r||l&&o&&s||!a&&s||!d)return-1}return 0}},285022:(e,t,o)=>{var i=o(626393);e.exports=function(e,t,o){for(var n=-1,s=e.criteria,r=t.criteria,a=s.length,l=o.length;++n<a;){var d=i(s[n],r[n]);if(d)return n>=l?d:d*("desc"==o[n]?-1:1)}return e.index-t.index}},899291:(e,t,o)=>{var i=o(498612);e.exports=function(e,t){return function(o,n){if(null==o)return o;if(!i(o))return e(o,n);for(var s=o.length,r=t?s:-1,a=Object(o);(t?r--:++r<s)&&!1!==n(a[r],r,a););return o}}},747445:(e,t,o)=>{var i=o(540098),n=o(816612),s=o(418601);e.exports=function(e){return function(t,o,r){return r&&"number"!=typeof r&&n(t,o,r)&&(o=r=void 0),t=s(t),void 0===o?(o=t,t=0):o=s(o),r=void 0===r?t<o?1:-1:s(r),i(t,o,r,e)}}},967114:(e,t,o)=>{var i=o(288668),n=o(282908),s=o(274757);e.exports=function(e,t,o,r,a,l){var d=1&o,c=e.length,h=t.length;if(c!=h&&!(d&&h>c))return!1;var u=l.get(e),_=l.get(t);if(u&&_)return u==t&&_==e;var p=-1,g=!0,m=2&o?new i:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var b=e[p],x=t[p];if(r)var f=d?r(x,b,p,t,e,l):r(b,x,p,e,t,l);if(void 0!==f){if(f)continue;g=!1;break}if(m){if(!n(t,(function(e,t){if(!s(m,t)&&(b===e||a(b,e,o,r,l)))return m.push(t)}))){g=!1;break}}else if(b!==x&&!a(b,x,o,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},518351:(e,t,o)=>{var i=o(562705),n=o(611149),s=o(977813),r=o(967114),a=o(668776),l=o(321814),d=i?i.prototype:void 0,c=d?d.valueOf:void 0;e.exports=function(e,t,o,i,d,h,u){switch(o){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var _=a;case"[object Set]":var p=1&i;if(_||(_=l),e.size!=t.size&&!p)return!1;var g=u.get(e);if(g)return g==t;i|=2,u.set(e,t);var m=r(_(e),_(t),i,d,h,u);return u.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},916096:(e,t,o)=>{var i=o(458234),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,o,s,r,a){var l=1&o,d=i(e),c=d.length;if(c!=i(t).length&&!l)return!1;for(var h=c;h--;){var u=d[h];if(!(l?u in t:n.call(t,u)))return!1}var _=a.get(e),p=a.get(t);if(_&&p)return _==t&&p==e;var g=!0;a.set(e,t),a.set(t,e);for(var m=l;++h<c;){var b=e[u=d[h]],x=t[u];if(s)var f=l?s(x,b,u,t,e,a):s(b,x,u,e,t,a);if(!(void 0===f?b===x||r(b,x,o,s,a):f)){g=!1;break}m||(m="constructor"==u)}if(g&&!m){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(g=!1)}return a.delete(e),a.delete(t),g}},301499:(e,t,o)=>{var i=o(689162),n=o(3674);e.exports=function(e){for(var t=n(e),o=t.length;o--;){var s=t[o],r=e[s];t[o]=[s,r,i(r)]}return t}},689162:(e,t,o)=>{var i=o(513218);e.exports=function(e){return e==e&&!i(e)}},668776:e=>{e.exports=function(e){var t=-1,o=Array(e.size);return e.forEach((function(e,i){o[++t]=[i,e]})),o}},542634:e=>{e.exports=function(e,t){return function(o){return null!=o&&(o[e]===t&&(void 0!==t||e in Object(o)))}}},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},572385:e=>{e.exports=function(e){return this.__data__.has(e)}},321814:e=>{e.exports=function(e){var t=-1,o=Array(e.size);return e.forEach((function(e){o[++t]=e})),o}},618446:(e,t,o)=>{var i=o(690939);e.exports=function(e,t){return i(e,t)}},139601:(e,t,o)=>{var i=o(840371),n=o(379152),s=o(115403),r=o(240327);e.exports=function(e){return s(e)?i(r(e)):n(e)}},396026:(e,t,o)=>{var i=o(747445)();e.exports=i},189734:(e,t,o)=>{var i=o(121078),n=o(882689),s=o(105976),r=o(816612),a=s((function(e,t){if(null==e)return[];var o=t.length;return o>1&&r(e,t[0],t[1])?t=[]:o>2&&r(t[0],t[1],t[2])&&(t=[t[0]]),n(e,i(t,1),[])}));e.exports=a},560053:(e,t)=>{function o(e,t){var o=e.length;e.push(t);e:for(;0<o;){var i=o-1>>>1,n=e[i];if(!(0<s(n,t)))break e;e[i]=t,e[o]=n,o=i}}function i(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],o=e.pop();if(o!==t){e[0]=o;e:for(var i=0,n=e.length,r=n>>>1;i<r;){var a=2*(i+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,o))d<n&&0>s(c,l)?(e[i]=c,e[d]=o,i=d):(e[i]=l,e[a]=o,i=a);else{if(!(d<n&&0>s(c,o)))break e;e[i]=c,e[d]=o,i=d}}}return t}function s(e,t){var o=e.sortIndex-t.sortIndex;return 0!==o?o:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],h=1,u=null,_=3,p=!1,g=!1,m=!1,b="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,f="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var t=i(c);null!==t;){if(null===t.callback)n(c);else{if(!(t.startTime<=e))break;n(c),t.sortIndex=t.expirationTime,o(d,t)}t=i(c)}}function y(e){if(m=!1,v(e),!g)if(null!==i(d))g=!0,E(P);else{var t=i(c);null!==t&&M(y,t.startTime-e)}}function P(e,o){g=!1,m&&(m=!1,x(A),A=-1),p=!0;var s=_;try{for(v(o),u=i(d);null!==u&&(!(u.expirationTime>o)||e&&!I());){var r=u.callback;if("function"==typeof r){u.callback=null,_=u.priorityLevel;var a=r(u.expirationTime<=o);o=t.unstable_now(),"function"==typeof a?u.callback=a:u===i(d)&&n(d),v(o)}else n(d);u=i(d)}if(null!==u)var l=!0;else{var h=i(c);null!==h&&M(y,h.startTime-o),l=!1}return l}finally{u=null,_=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,j=!1,w=null,A=-1,S=5,z=-1;function I(){return!(t.unstable_now()-z<S)}function B(){if(null!==w){var e=t.unstable_now();z=e;var o=!0;try{o=w(!0,e)}finally{o?C():(j=!1,w=null)}}else j=!1}if("function"==typeof f)C=function(){f(B)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,T=k.port2;k.port1.onmessage=B,C=function(){T.postMessage(null)}}else C=function(){b(B,0)};function E(e){w=e,j||(j=!0,C())}function M(e,o){A=b((function(){e(t.unstable_now())}),o)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,E(P))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return i(d)},t.unstable_next=function(e){switch(_){case 1:case 2:case 3:var t=3;break;default:t=_}var o=_;_=t;try{return e()}finally{_=o}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var o=_;_=e;try{return t()}finally{_=o}},t.unstable_scheduleCallback=function(e,n,s){var r=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:n,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,o(c,e),null===i(d)&&e===i(c)&&(m?(x(A),A=-1):m=!0,M(y,s-r))):(e.sortIndex=a,o(d,e),g||p||(g=!0,E(P))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=_;return function(){var o=_;_=t;try{return e.apply(this,arguments)}finally{_=o}}}},363840:(e,t,o)=>{e.exports=o(560053)},653250:(e,t,o)=>{var i=o(667294);var n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useState,r=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!n(e,o)}catch(i){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),i=s({inst:{value:o,getSnapshot:t}}),n=i[0].inst,c=i[1];return a((function(){n.value=o,n.getSnapshot=t,d(n)&&c({inst:n})}),[e,o,t]),r((function(){return d(n)&&c({inst:n}),e((function(){d(n)&&c({inst:n})}))}),[e]),l(o),o};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},950139:(e,t,o)=>{var i=o(667294),n=o(61688);var s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useSyncExternalStore,a=i.useRef,l=i.useEffect,d=i.useMemo,c=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,o,i,n){var h=a(null);if(null===h.current){var u={hasValue:!1,value:null};h.current=u}else u=h.current;h=d((function(){function e(e){if(!l){if(l=!0,r=e,e=i(e),void 0!==n&&u.hasValue){var t=u.value;if(n(t,e))return a=t}return a=e}if(t=a,s(r,e))return t;var o=i(e);return void 0!==n&&n(t,o)?t:(r=e,a=o)}var r,a,l=!1,d=void 0===o?null:o;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]}),[t,o,i,n]);var _=r(e,h[0],h[1]);return l((function(){u.hasValue=!0,u.value=_}),[_]),c(_),_}},61688:(e,t,o)=>{e.exports=o(653250)},552798:(e,t,o)=>{e.exports=o(950139)},962916:(e,t,o)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]"]=function(){return o(765267).Z}},506353:(e,t,o)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]/invite"]=function(){return o(765267).Z}},857347:(e,t,o)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]/more_ideas"]=function(){return o(765267).Z}},252837:(e,t,o)=>{o.d(t,{Df:()=>n,W$:()=>i,f4:()=>s});const i=(e,t)=>{var o;const i="object"==typeof t.owner?null===(o=t.owner)||void 0===o?void 0:o.id:t.owner;return e.isAuth&&i===e.id},n=(e,t)=>Boolean(e.isAuth&&t.collaborated_by_me),s=(e,t)=>i(e,t)?3069:3070},619983:(e,t,o)=>{o.d(t,{e:()=>r,v:()=>a});var i=o(441143),n=o.n(i);class s{constructor(e,t){n()(e,"You must pass a requestContext to check an Experiment"),n()(t,"You must pass the name of the experiment to check"),this.requestContext=e,this.experimentName=t.toLowerCase()}_getGroup(e){return e?this.requestContext.experiments.v2ActivateExperiment(this.experimentName)||"":this.requestContext.experiments.v2GetGroup(this.experimentName)||""}}class r extends s{getGroup(e=!1){return this._getGroup(e)}}class a extends s{_isTreatment(e){return e.startsWith("enabled")||e.startsWith("employee")}enabled(){return this._isTreatment(this._getGroup(!0))}enabledWithNoActivation(){return this._isTreatment(this._getGroup(!1))}}},73803:(e,t,o)=>{o.d(t,{Z:()=>c,w:()=>h});var i=o(349700);const n=e=>e._('{{ first }}', 'Generic message that lists 1 item', 'Generic message that lists 1 item (ex: Stevie)'),s=e=>e._('{{ first }} and {{ second }}', 'Generic message that lists 2 items', 'Generic message that lists 2 items (ex: Stevie and Michael)'),r=e=>e._('{{ first }}, {{ second }} and {{ third }}', 'Generic message that lists 3 items', 'Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)'),a=e=>e._('{{ first }}, {{ second }}, {{ third }} and {{ fourth }}', 'Generic message that lists 4 items', 'Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)'),l=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}', 'Generic message that lists 5 items', 'Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)'),d=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}', 'Generic message that lists 6 items', 'Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)');function c(e,t){const o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,i.nk)(n(t),o);case 2:return(0,i.nk)(s(t),o);case 3:return(0,i.nk)(r(t),o);case 4:return(0,i.nk)(a(t),o);case 5:return(0,i.nk)(l(t),o);case 6:return(0,i.nk)(d(t),o);default:return(0,i.nk)((e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others', 'Generic message that lists more than 6 items', 'Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)'))(t),o)}}function h(e,t){const o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,i.nk)(n(t),o);case 2:return(0,i.nk)(s(t),o);case 3:return(0,i.nk)(r(t),o);case 4:return(0,i.nk)(a(t),o);case 5:return(0,i.nk)(l(t),o);case 6:return(0,i.nk)(d(t),o);case 7:return(0,i.nk)((e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}', 'Generic message that lists 7 items', 'Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)'))(t),o);default:return(0,i.nk)((e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others', 'Generic message that lists more than 7 items', 'Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)'))(t),o)}}},604052:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(784590),n=o(780280),s=o(826067);var r=o(925927);function a({checkExperiments:e,disableFetch:t,viewer:o}){const i=(0,r.TH)(),a=(0,r.$B)(),l=(0,n.B)(),d=function({location:{pathname:e,search:t},match:{params:o,path:i},viewer:n}){return{routeData:{matchPath:i,params:o,parsedSearch:(0,s.mB)(t),pathname:e,search:t},user:{country:n.country||void 0,id:n.id||void 0,isAuth:n.isAuth,isEmployee:!!n.isEmployee||!1,isPartner:!!n.isPartner||!1,username:n.username||void 0}}}({location:i,match:a,viewer:o}),c=!!t&&t(d),h=!(!c&&e)||e(l.experiments);return{args:d,fetchDisabled:c||!h}}var l=o(19121);function d({getOptions:e,checkExperiments:t,disableFetch:o,...n}){const s=function(){const e=(0,l.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0}}(),{args:r,fetchDisabled:d}=a({checkExperiments:t,disableFetch:o,viewer:s}),c=e?e(r):void 0;return(0,i.Z)({dangerouslyDisableFetch:d,options:c,...n})}},490061:(e,t,o)=>{o.d(t,{Z:()=>a,l:()=>l});var i=o(966338);const n=[1000069,1000075],s={};function r(e){return n.forEach((t=>{!e[t]||void 0!==s[t]&&s[t].id===e[t].id||(s[t]=e[t])})),s}function a(e){return(0,i.connect)((e=>({lfvExperiences:r(e.experiences)})))(e)}function l(){return r((0,i.useSelector)((({experiences:e})=>e)))}},868148:(e,t,o)=>{o.r(t),o.d(t,{BoardCollabFlyout:()=>j,default:()=>w});var i=o(667294),n=o(426151),s=o(355600),r=o(913683),a=o(898781),l=o(784590),d=o(883119),c=o(785893);function h({board:e,scrollInfo:t}){const o=(0,a.ZP)(),n=(0,l.Z)({name:"BoardCollaboratorsResource",options:{board_id:e.id},noCache:!0});if(n.isLoaded){const{owner:o}=e,{data:a,isAtEnd:l,isFetching:d,fetchMore:h}=n,u=[o,...a||[]];return(0,c.jsxs)(i.Fragment,{children:[t?(0,c.jsx)(r.Z,{scrollBuffer:3*t.container.clientHeight,scrollHeight:t.container.scrollHeight,scrollTop:t.top,isAtEnd:l,isFetching:d,fetchMore:h}):null,u.map((e=>{const{full_name:t,id:o,image_medium_url:i,username:n}=e;return(0,c.jsx)(s.Z,{imageUrl:null!=i?i:"",linkURL:`/${n}/`,name:null!=t?t:"",subtitle:n,title:null!=t?t:""},o)}))]})}return(0,c.jsx)(d.$j,{accessibilityLabel:o._('Loading', 'Loading spinner when rendering users', 'Loading spinner when rendering users'),show:!0})}var u=o(966338);const _=({heading:e,description:t,disabled:o=!1,id:i,onChange:n,switched:s})=>(0,c.jsxs)(d.xu,{display:"flex",direction:"column",width:"100%",paddingX:6,paddingY:4,children:[(0,c.jsx)(d.xv,{weight:"bold",children:e}),(0,c.jsxs)(d.xu,{display:"flex",direction:"row",alignItems:"center",marginTop:3,children:[(0,c.jsx)(d.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(d.xv,{children:t})}),(0,c.jsx)(d.rs,{id:i,onChange:n,disabled:o,switched:s})]})]});var p=o(27255),g=o(121151),m=o(904411);function b(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class x extends i.Component{constructor(...e){var t,o,i;super(...e),b(this,"state",{invitesEnabled:Boolean(null===(t=this.props.board)||void 0===t?void 0:t.collaborator_invites_enabled),requestsEnabled:Boolean(null===(o=this.props.board)||void 0===o?void 0:o.collaborator_requests_enabled),emailEnabled:Boolean(null===(i=this.props.board)||void 0===i?void 0:i.collab_board_email)}),b(this,"handleInvitesToggle",(()=>this.setState((e=>({invitesEnabled:!e.invitesEnabled}))))),b(this,"handleRequestsToggle",(()=>this.setState((e=>({requestsEnabled:!e.requestsEnabled}))))),b(this,"handleEmailToggle",(()=>this.setState((e=>({emailEnabled:!e.emailEnabled}))))),b(this,"handleSubmit",(()=>{const{onDismiss:e,board:t,updateBoard:o}=this.props,{invitesEnabled:i,requestsEnabled:n,emailEnabled:s}=this.state;o({...t,collaborator_invites_enabled:i,collaborator_requests_enabled:n,collab_board_email:s}).then((()=>e()))}))}render(){const{board:e,onDismiss:t,isViewerOwner:o}=this.props,i=null==e?void 0:e.privacy,{invitesEnabled:n,requestsEnabled:s,emailEnabled:r}=this.state,a=[{heading:this.props.i18n._('Email notifications', 'Sub-heading for email notifications group board setting', 'Sub-heading for email notifications group board setting'),description:this.props.i18n._('Receive emails when Pins are added to this board', 'Description of email notifications setting', 'Description of email notifications setting'),disabled:!1,onChange:this.handleEmailToggle,id:"email",switched:r}],l=[...a,{heading:this.props.i18n._('Group requests', 'Sub-heading for group requests group board setting', 'Sub-heading for group requests group board setting'),description:this.props.i18n._('People can request to join this board', 'Description of group requests setting', 'Description of group requests setting'),disabled:i===p.Z.BoardPrivacy.SECRET,onChange:this.handleRequestsToggle,id:"requests",switched:s},{heading:this.props.i18n._('Group members', 'Sub-heading for group members group board setting', 'Sub-heading for group members group board setting'),description:this.props.i18n._('Group members can invite others', 'Description of group members setting', 'Description of group members setting'),disabled:!1,onChange:this.handleInvitesToggle,id:"invites",switched:n}],h=o?l:a;return(0,c.jsx)(g.ZP,{accessibilityModalLabel:this.props.i18n._('Edit group settings', 'Label for editing group settings', 'Label for editing group settings'),heading:this.props.i18n._('Group board settings', 'Modal header for editing settings for a group board', 'Modal header for editing settings for a group board'),footer:(0,c.jsx)(d.xu,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:this.handleSubmit,text:this.props.i18n._('Done', 'Button text for being finished with editing group board settings', 'Button text for being finished with editing group board settings')})})}),onDismiss:t,size:"md",children:h.map((e=>{const{description:t,disabled:o,heading:i,id:n,onChange:s,switched:r}=e;return(0,c.jsx)(_,{description:t,disabled:o,heading:i,id:n,onChange:s,switched:r},n)}))})}}function f(e){const t=(0,a.ZP)(),o=(0,u.useDispatch)(),i=e=>o(i(e)),n=(0,m.gC)()(e.boardId);return(0,c.jsx)(x,{...e,board:n,i18n:t,updateBoard:i})}var v=o(573799),y=o(19121),P=o(925927);function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class j extends i.Component{constructor(...e){super(...e),C(this,"state",{contentRef:null,currentModal:null,scrollContainer:null,scrollTop:null}),C(this,"handleBoardLeave",(()=>{const{history:e,viewer:t}=this.props,o=t.isAuth?`/${t.username}`:"/";e.replace(o)})),C(this,"handleContentRef",(e=>{const{contentRef:t}=this.state;!t&&e&&(this.setState({contentRef:e}),e.focus())})),C(this,"handleScrollContainer",(e=>{const{scrollContainer:t}=this.state;!t&&e&&this.setState({scrollContainer:e})})),C(this,"handleScroll",(()=>{const{scrollContainer:e}=this.state;e&&this.setState({scrollTop:e.scrollTop})})),C(this,"handleConfirmationModalOpen",(()=>this.setState({currentModal:"confirmation"}))),C(this,"handleSettingsModalOpen",(()=>this.setState({currentModal:"settings"}))),C(this,"handleCloseModal",(()=>this.setState({currentModal:null}))),C(this,"renderCurrentModal",(()=>{const{board:{id:e,owner:t},viewer:o}=this.props,{currentModal:i}=this.state,n=o.isAuth&&o.username===t.username;switch(i){case"settings":return(0,c.jsx)(f,{boardId:e,isViewerOwner:n,onDismiss:this.handleCloseModal});default:return null}}))}renderInvite(e,t,o){if(!e.invited_user)return null;const i={invite:e,invitedUser:e.invited_user,onBoardLeave:t,onInviteDidUpdate:o,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(n.Z,{...i})}render(){const{anchor:e,board:t,onDismiss:o}=this.props,{currentModal:n,scrollContainer:s,scrollTop:r}=this.state,a=s?{container:s,top:r||0}:null,l=(t.access||[]).includes("write");return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.mh,{children:(0,c.jsx)(d.xu,{position:"absolute",top:!0,zIndex:new d.Ry(1),children:(0,c.jsx)(d.J2,{anchor:e,onDismiss:n?()=>{}:o,idealDirection:"down",size:"xl",positionRelativeToAnchor:!1,children:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",maxHeight:500,minWidth:360,width:"100%",children:[(0,c.jsx)(d.Le,{top:0,children:(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:64,paddingX:4,paddingY:4,children:[(0,c.jsx)("div",{ref:this.handleContentRef,tabIndex:"0",children:(0,c.jsx)(d.xv,{size:"300",weight:"bold",children:this.props.i18n._('Group members', 'boardCollabFlyout.header', 'Heading for the group members flyout')})}),l&&(0,c.jsx)(d.xu,{right:!0,top:!0,position:"absolute",marginTop:2,marginEnd:2,children:(0,c.jsx)(d.hU,{accessibilityLabel:this.props.i18n._('Group board settings', 'boardCollabFlyout.settings.button', 'Icon for accessing settings on a group board'),icon:"cog",size:"lg",iconColor:"darkGray",onClick:this.handleSettingsModalOpen})})]})}),(0,c.jsx)(d.xu,{overflow:"scrollY",children:(0,c.jsx)(d.xu,{onScroll:this.handleScroll,ref:this.handleScrollContainer,children:l?(0,c.jsx)(v.Z,{board:t,scrollInfo:a,onBoardLeave:this.handleBoardLeave,renderInvite:this.renderInvite,onModalOpen:this.handleConfirmationModalOpen}):(0,c.jsx)(h,{board:t,scrollInfo:a})})})]})})})}),this.renderCurrentModal()]})}}function w(e){const t=(0,a.ZP)(),o=(0,y.Z)(),i=(0,P.k6)();return(0,c.jsx)(j,{...e,history:i,viewer:o,i18n:t})}},426151:(e,t,o)=>{o.d(t,{Z:()=>z});var i=o(667294),n=o(966338),s=o(121151),r=o(898781),a=o(349700),l=o(780280),d=o(883119),c=o(785893);function h({boardName:e,collaboratorName:t,onCancelTransferRequest:o,onDismiss:i}){const n=(0,r.ZP)(),h=(0,l.B)();return(0,c.jsx)(s.ZP,{accessibilityModalLabel:n._('Board ownership transfer modal', 'boardCollabOwnershipTransferModal.accessibilityModalLabel', 'Accessibility label on board ownership transfer modal'),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.X6,{align:"center",size:"500",children:n._('Collaborators', 'boardCollabOwnershipTransferModal.heading', 'Heading for board ownership transfer modal')}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:h.isRTL,right:!h.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:n._('Close', 'boardCollabOwnershipTransferModal.iconAccessibilityLabel', 'Accessibility label on cancel icon button'),icon:"cancel",iconColor:"darkGray",onClick:i})})]}),footer:(0,c.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,c.jsx)(d.iP,{fullWidth:!1,onTap:o,children:(0,c.jsx)(d.xv,{weight:"bold",children:n._('Cancel request', 'boardCollabOwnershipTransferModal.cancelRequest', 'Option to cancel board ownership transfer request')})}),(0,c.jsx)(d.zx,{color:"red",onClick:i,size:"lg",text:n._('Got it', 'boardCollabOwnershipTransferModal.confirmationButton', 'Button confirming board ownership transfer action')})]}),onDismiss:i,children:(0,c.jsx)(d.xu,{paddingX:8,children:(0,c.jsx)(d.xv,{align:"center",children:(0,a.nk)(n._('We sent {{ collaboratorName }} your request for them to own {{ boardName }}. When they accept, you can still add Pins\u2014but you won\u2019t be able to manage collaborators, change the name, cover photo, or description of this board.', 'boardCollabOwnershipTransferModal.descriptionText', 'Explanation of transfer request and potential permissions changes'),{collaboratorName:t,boardName:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:e})})})})})}var u=o(88301),_=o(412456);function p({boardId:e,collaboratorId:t,collaboratorName:o,isAcceptedCollaborator:s,onDelete:a}){const l=(0,n.useDispatch)(),p=(0,r.ZP)(),g=(0,i.useRef)(null),[m,b]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),{boardName:v,pendingOwnershipTransfer:y}=(0,u.Z)(),P=()=>{l((0,_.xx)(e,t)),b(!1)},C=function({i18n:e,isAcceptedCollaborator:t,onCancelTransferRequest:o,onDelete:i,onRequestTransfer:n,showCancelRequestOption:s,showRequestTransferOption:r}){const a=[{onSelect:i,option:{value:"Remove from board",label:e._('Remove from board', 'getCollaboratorDropdownItems.removeText', 'Text for option to remove collaborator from board')}}];return t&&(s&&a.push({onSelect:o,option:{value:"Cancel request",label:e._('Cancel request', 'getCollaboratorDropdownItems.cancelText', 'Text for option to cancel ownership transfer request')}}),r&&a.push({onSelect:n,option:{value:"Request as board owner",label:e._('Request as board owner', 'getCollaboratorDropdownItems.requestText', 'Text for option to request ownership transfer')}})),a}({i18n:p,isAcceptedCollaborator:s,onCancelTransferRequest:P,onDelete:a,onRequestTransfer:()=>{(async()=>{b(!1),await l((0,_.Cf)(e,t)),f(!0)})()},showCancelRequestOption:y===t,showRequestTransferOption:!y});return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(d.kC,{justifyContent:"center",children:[(0,c.jsx)(d.hU,{accessibilityLabel:p._('Collaborator options', 'boardCollabInviteOverflowButton.accessibilityLabel', 'Accessibility label for overflow icon button'),bgColor:"transparent",icon:"ellipsis",iconColor:"darkGray",onClick:()=>b(!m),ref:g,selected:m}),m&&(0,c.jsx)(d.Lt,{anchor:g.current,id:"board-collaborator-dropdown",idealDirection:"down",onDismiss:()=>b(!1),zIndex:new d.Ry(1e3),children:(0,c.jsx)(d.Lt.Section,{label:p._('Options', 'boardCollabInviteOverflowButton.dropdownSection', 'Options section in dropdown menu'),children:C.map((e=>(0,c.jsx)(d.Lt.Item,{onSelect:e.onSelect,option:e.option},e.option.value)))})})]}),x&&(0,c.jsx)(h,{boardName:v,collaboratorName:o,onCancelTransferRequest:()=>{P(),f(!1)},onDismiss:()=>{f(!1)}})]})}var g=o(355600),m=o(985913),b=o(19121),x=o(217468);function f({actionsDisabled:e,invite:t,invitedUser:o,isDim:i,onApprove:n,onDelete:s}){const a=(0,r.ZP)(),l=(0,b.Z)(),{access:h,board:_,status:f,invited_by_user:v}=t,{pendingOwnershipTransfer:y,viewerIsOwner:P}=(0,u.Z)(),C=l.isAuth&&o.id===l.id,j=l.isAuth&&v.id===l.id,w=o.id===v.id,A="accepted"===f,S=h.includes("approve"),z=h.includes("delete"),I=a._('Approve', '[button] approve another pinner\'s request to join the board as a collaborator', '[button] approve another pinner\'s request to join the board as a collaborator'),B=((e,t,o)=>e?a._('Leave', '[button] for a collaborator to leave a group board', '[button] for a collaborator to leave a group board'):t&&!o?a._('Decline', '[button] decline another pinner\'s request to join board as a collaborator', '[button] decline another pinner\'s request to join board as a collaborator'):a._('Remove', '[button] remove a collaborator from the board]', '[button] remove a collaborator from the board]'))(C,w,A),k=z&&!S,T=z&&S,E=`/${o.username}/`,M=(0,x.t)("web_board_ownership_transfer"),D=P&&M().anyEnabled,Z=D?(0,c.jsx)(p,{boardId:_.id,collaboratorId:o.id,collaboratorName:o.full_name,onDelete:s||(()=>{}),isAcceptedCollaborator:A}):(0,c.jsx)(d.zx,{disabled:e,onClick:s,text:B,size:"lg"}),R=y===o.id,L=D&&(void 0!==i?i:!A);return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(g.Z,{imageUrl:o.image_medium_url||"",name:o.full_name,title:o.full_name,subtitle:((e,o,i,n,s)=>{const r=t.invited_by_user.full_name;let l;return l=o?a._('Invitation pending', 'boardCollabInviteCell.pendingInvitationText', 'Subtext for collaborator with pending invitation'):i?a._('That\'s you', 'subtext for current user who requested to join this board', 'subtext for current user who requested to join this board'):n?a._('Invited by you', 'subtext for a pending collaborator who was invited by the current viewer', 'subtext for a pending collaborator who was invited by the current viewer'):s?a._('Requested to join', 'The subtext that identifies a pending collaborator has personally requested to join the board', 'The subtext that identifies a pending collaborator has personally requested to join the board'):(0,m.Z)(a._('Invited by {{ user_full_name }}', 'The subtext that identifies a pending collaborator who was invited to collaborate on the board', 'The subtext that identifies a pending collaborator who was invited to collaborate on the board'),{user_full_name:r}),e&&(l=l.concat(a._(' \xB7 Ownership pending', 'boardCollabInviteCell.pendingOwnershipText', 'Additional subtext for collaborator who has a pending board ownership transfer invitation'))),l})(R,L,C,j,w),linkURL:E,isDim:!D&&(void 0!==i?i:!A),accessory:k&&Z}),T&&(0,c.jsxs)(d.xu,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,disabled:e,onClick:s,text:B,size:"lg"})}),(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"red",disabled:e,onClick:n,text:I,size:"lg"})})]})]})}var v=o(499128),y=o(934523);function P(e){const t=(0,r.ZP)(),{onCancel:o,onRemove:i,useGestaltModal:n}=e,a=t._('Are you sure you want to leave this group board and remove it from your profile?', ' - ', ' -- '),l=n?d.u_:s.ZP;return(0,c.jsx)(l,{accessibilityModalLabel:t._('Leave board?', ' - ', ' -- '),heading:t._('Leave board?', ' - ', ' -- '),onDismiss:o,size:"sm",footer:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:o,text:t._('Cancel', ' - ', ' -- ')})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:i,text:t._('Leave', ' - ', ' -- ')})})]}),children:(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:a})})})}class C extends i.Component{constructor(...e){var t,o,i;super(...e),i={shouldBlock:!1},(o="state")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}getBlockDescription(e,t){return"declineRequest"===e?t?(0,a.nk)(this.props.i18n._('This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.', 'decline another pinner\'s request to join board as a collaborator and block them', 'decline another pinner\'s request to join board as a collaborator and block them'),{invited_user_first_name:t}):this.props.i18n._('This will decline this person from joining this board and block them from subsequent collaboration requests.', 'message that explains consequences of declining a request to join board as a collaborator', 'message that explains consequences of declining a request to join board as a collaborator'):t?(0,a.nk)(this.props.i18n._('This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins.', ' - ', ' -- '),{invited_user_first_name:t}):this.props.i18n._('This will remove this person, people they invited, and all their Pins.', 'message that explains consequences of removing a collaborator', 'message that explains consequences of removing a collaborator')}render(){const{removeType:e,firstName:t,fullName:o,onCancel:n,onRemove:r,onRemoveAndBlock:l,useGestaltModal:h}=this.props,u="declineRequest"===e?(0,a.nk)(this.props.i18n._('Decline {{ invited_user_name }}?', '[button] to decline a pinner\'s request to join a board as a collaborator', '[button] to decline a pinner\'s request to join a board as a collaborator'),{invited_user_name:o}).join(""):(0,a.nk)(this.props.i18n._('Remove {{ invited_user_name }}?', '[button] to remove a pinner as a collaborator from a group board', '[button] to remove a pinner as a collaborator from a group board'),{invited_user_name:o}).join(""),_=this.props.i18n._('This will keep them from saving Pins to this board. You can also:', 'decline another pinner\'s request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.', 'decline another pinner\'s request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.'),p=this.getBlockDescription(e,t),g=this.state.shouldBlock?this.props.i18n._('Block', 'block another pinner after denying their request to collaborate on a board', 'block another pinner after denying their request to collaborate on a board'):this.props.i18n._('Remove', 'decline another pinner\'s request to collaborate on a board', 'decline another pinner\'s request to collaborate on a board'),m=(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:_})}),(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{padding:5,display:"flex",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.XZ,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState((({shouldBlock:e})=>({shouldBlock:!e})))})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsxs)(d.__,{htmlFor:"banUser",children:[(0,c.jsx)(d.xv,{weight:"bold",children:(0,a.nk)(this.props.i18n._('Block {{ name }}', ' - ', ' -- '),{name:t||""})}),(0,c.jsx)(d.xv,{size:"200",children:p})]})})]})]}),b=h?d.u_:s.ZP;return(0,c.jsx)(b,{accessibilityModalLabel:u,heading:u,onDismiss:n,size:"sm",footer:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:n,text:this.props.i18n._('Cancel', ' - ', ' -- ')})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:this.state.shouldBlock?l:r,text:g})})]}),children:m})}}function j(e){const t=(0,r.ZP)();return(0,c.jsx)(C,{...e,i18n:t})}var w=o(343341);function A(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class S extends i.Component{constructor(...e){super(...e),A(this,"state",{currentModal:null,loading:!1}),A(this,"showRemoveSuccessToast",(()=>{const{toastManagerContext:e}=this.props,t=this.props.i18n._('Collaborator removed', 'BoardCollabInviteCellContainer.toast', 'Toast for removing a collaborator from a board');e.showOneToast((({hideToast:e})=>(0,c.jsx)(v.ZP,{duration:3e3,onHide:e,text:t})))})),A(this,"onDelete",(()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})})),A(this,"onApprove",(()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),e().then(t).finally((()=>{this.setState({loading:!1})}))})),A(this,"deleteBoardInvite",((e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:o,onInviteDidUpdate:i}=this.props,n=this.isViewerInvitedUser;this.setState({currentModal:null,loading:!0}),t(n,e).then((()=>{i(),this.showRemoveSuccessToast(),n&&o()})).catch((()=>{})).finally((()=>{this.setState({loading:!1})}))})),A(this,"handleDeleteBoardInvite",(()=>{this.deleteBoardInvite(!1)})),A(this,"handleDeleteBoardInviteAndBan",(()=>{this.deleteBoardInvite(!0)})),A(this,"handleHideModal",(()=>{this.setState({currentModal:null})}))}get isViewerInvitedUser(){const{viewer:e,invitedUser:t}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invitedUser:e,invite:{invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invitedUser:e,useGestaltModal:t=!1}=this.props,{currentModal:o}=this.state;return"delete"===o?this.isViewerInvitedUser?(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:y.fe+1}},children:(0,c.jsx)(P,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})}):(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:y.fe+1}},children:(0,c.jsx)(j,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})}):null}render(){const{invite:e,invitedUser:t,isDim:o}=this.props,{loading:i}=this.state;return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(f,{invite:e,invitedUser:t,isDim:o&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:i}),this.renderCurrentModal()]})}}function z(e){const{invite:t,invitedUser:{id:o},invite:{board:{id:i}}}=e,s=(0,r.ZP)(),a=(0,n.useDispatch)();return(0,c.jsx)(S,{...e,approveBoardCollabInvite:()=>a((0,_.q1)(i,o)),deleteBoardCollabInvite:(e,o)=>a((0,_.Jn)(t,e,o)),i18n:s,toastManagerContext:(0,w.F9)(),viewer:(0,b.Z)()})}},573799:(e,t,o)=>{o.d(t,{Z:()=>m});var i=o(667294),n=o(426151),s=o(913683),r=o(898781),a=o(883119),l=o(785893);function d({fetchMore:e,invites:t,isAtEnd:o,isFetching:i,onBoardLeave:n,refreshData:d,renderInvite:c,scroll:h}){const u=(0,r.ZP)();return(0,l.jsxs)(a.xu,{children:[h&&(0,l.jsx)(s.Z,{scrollBuffer:3*h.container.clientHeight,scrollHeight:h.container.scrollHeight,scrollTop:h.top,isAtEnd:o,isFetching:i,fetchMore:e}),t.map(((e,t)=>e&&e.invited_user&&e.invited_user.id?(0,l.jsx)(a.xu,{children:c(e,n,d)},t):null)),i&&!o&&(0,l.jsx)(a.$j,{accessibilityLabel:u._('loading board invites', 'accessibility label for board collaborator invites loading spinner', 'accessibility label for board collaborator invites loading spinner'),show:!0})]})}var c=o(355600),h=o(526524),u=o(88301),_=o(784590),p=o(349700);class g extends i.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refresh(),t.refresh()},(o="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}shouldComponentUpdate(e){const{invites:{data:t},pendingOwnershipTransfer:o}=e,{invites:{data:i},pendingOwnershipTransfer:n}=this.props;return!(i&&!(n!==o))||!!t&&i.length!==t.length}render(){var e,t;const{board:o,invites:s,invitesPendingApproval:r,scrollInfo:u,onBoardLeave:_,onModalOpen:g,pendingOwnershipTransfer:m,renderInvite:b}=this.props,{full_name:x,image_medium_url:f,username:v}=o.owner,y=null===(e=(s.data||[]).find((e=>{var t;return(null===(t=e.invited_user)||void 0===t?void 0:t.id)===m})))||void 0===e||null===(t=e.invited_user)||void 0===t?void 0:t.full_name,P=m&&y?(0,p.nk)(this.props.i18n._('Requested {{ collaboratorName }} to change to board owner', 'boardInviteSheet.CollaboratorList.boardOwner.ownershipRequestSubtitle', 'Subtext for an owner of board who has sent an ownership transfer request'),{collaboratorName:y}).join(""):this.props.i18n._('Owner of this board', 'boardInviteSheet.CollaboratorList.boardOwner.subtitle', 'The subtext that identifies the owner of a board');return(0,l.jsx)(i.Fragment,{children:s.isLoaded||r.isLoaded?(0,l.jsx)(h.Z,{fetchMore:s.fetchMore,children:({onScroll:e,setRef:t})=>(0,l.jsxs)(a.xu,{width:"100%",onScroll:e,ref:t,children:[(0,l.jsx)(d,{fetchMore:r.fetchMore,invites:r.data||[],isAtEnd:r.isAtEnd,isFetching:r.isFetching,onBoardLeave:_,refreshData:this.handleInvitesDidUpdate,scroll:u,renderInvite:b}),(r.data||[]).length>0?(0,l.jsx)(a.xu,{paddingY:3,children:(0,l.jsx)(a.iz,{})}):null,(0,l.jsxs)(a.xu,{paddingY:1,children:[(0,l.jsx)(c.Z,{imageUrl:null!=f?f:"",linkURL:`/${v}/`,name:null!=x?x:"",subtitle:P,title:null!=x?x:""}),(s.data||[]).map((e=>e&&e.invited_user&&e.invited_user.id?(0,l.jsx)(n.Z,{invite:e,invitedUser:e.invited_user,onBoardLeave:_,onModalOpen:g,onInviteDidUpdate:s.refresh},e.invited_user.id):null))]})]})}):(0,l.jsx)(a.$j,{show:!0,accessibilityLabel:this.props.i18n._('Loading', 'Loading state for showing board collaborators', 'Loading state for showing board collaborators')})})}}function m(e){const t=(0,r.ZP)(),{pendingOwnershipTransfer:o}=(0,u.Z)(),i=(0,_.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1}}),n=(0,_.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1}});return(0,l.jsx)(g,{...e,invites:i,invitesPendingApproval:n,i18n:t,pendingOwnershipTransfer:o})}},355600:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(667294),n=o(116303),s=o(149230),r=o(883119),a=o(785893);function l(e){const{imageUrl:t,name:o,title:l,subtitle:d,accessory:c,linkURL:h,isDim:u}=e,_={__style:{opacity:u?.5:1}},p=(0,s.Z)({url:null!=h?h:""})?"nofollow":"none";return(0,a.jsx)(i.Fragment,{children:o&&l&&(0,a.jsxs)(r.xu,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[(0,a.jsx)(r.xu,{marginEnd:2,dangerouslySetInlineStyle:_,children:(0,a.jsx)(r.iP,{role:"link",rel:p,href:h||"",rounding:"circle",children:(0,a.jsx)(n.Z,{outline:!0,size:"md",name:o,src:t})})}),(0,a.jsxs)(r.xu,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:_,children:[(0,a.jsx)(r.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:(0,a.jsx)(r.rU,{rel:p,href:h||"",children:l})}),(0,a.jsx)(r.xv,{lineClamp:1,size:"100",color:"subtle",children:d})]}),c&&(0,a.jsx)(r.xu,{marginStart:4,children:c})]})})}},419112:(e,t,o)=>{o.d(t,{VV:()=>g,ZP:()=>b,tk:()=>u});var i=o(667294),n=o(704177),s=o(252837),r=o(883119),a=o(407043),l=o(898781),d=o(785893);function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const h="GroupBoardContentViewSwitcher_Settings",u=e=>e<=500,_=Object.freeze({}),p={custom:11566,newest:11564,oldest:11565,most_comments:11563,most_reactions:11562,by_pinner:11561},g=(e,t)=>{const o=n.ZP.localStorage.getItem(h)||_;return(e.isAuth&&o[e.id]||{})[t.id]||null};class m extends i.Component{constructor(...e){super(...e),c(this,"handleChange",(({event:e,value:t})=>{const o=t,{onChange:i,viewer:r,board:a}=this.props;e.stopPropagation(),window.scrollTo({top:0,left:0,behavior:"smooth"}),((e,t,o)=>{if(!e.isAuth)return;const i=n.ZP.localStorage.getItem(h)||_,s=i[e.id]||{},r={...i,[e.id]:{...s,[t.id]:o}};n.ZP.localStorage.setItem(h,r)})(r,a,o),i&&i(o),this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,s.f4)(r,a),component:13475,element:p[o],aux_data:{board_id:a.id}})})),c(this,"logDropdownClick",(()=>{const{board:e,viewer:t}=this.props;this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,s.f4)(t,e),component:13486,element:11567,aux_data:{board_id:e.id}})})),c(this,"handleKeyPress",(e=>{const{charCode:t=0}=e;32===t&&(e.preventDefault(),this.logDropdownClick())}))}render(){const{currentView:e}=this.props,t=[{value:"custom",label:this.props.i18n._('Custom', 'Option for users to filter their Pins in a custom order (as it currently is)', 'Option for users to filter their Pins in a custom order (as it currently is)')},{value:"most_reactions",label:this.props.i18n._('Most reactions', 'Option for users to filter their Pins by the most reactions', 'Option for users to filter their Pins by the most reactions')}];return(0,d.jsx)("div",{role:"listbox",tabIndex:0,onClick:this.logDropdownClick,onKeyPress:this.handleKeyPress,children:(0,d.jsx)(r.EI,{id:"gbFilterSelectlist",onChange:this.handleChange,options:t,size:"lg",value:e})})}}const b=function(e){const{logContextEvent:t}=(0,a.v)(),o=(0,l.ZP)();return(0,d.jsx)(m,{...e,i18n:o,logContextEvent:t})}},209716:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(883119),n=o(785893);function s(e){const{iconNode:t,title:o,subtitle:s,accessory:r}=e;return(0,n.jsxs)(i.xu,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[(0,n.jsx)(i.xu,{marginEnd:2,children:t}),(0,n.jsxs)(i.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:[(0,n.jsx)(i.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:o}),(0,n.jsx)(i.xv,{lineClamp:1,size:"100",color:"subtle",children:s})]}),r&&(0,n.jsx)(i.xu,{children:r})]})}},88301:(e,t,o)=>{o.d(t,{Z:()=>d,k:()=>l});var i=o(667294),n=o(425288),s=o(785893);const{Provider:r,useHook:a}=(0,n.Z)("BoardOwnershipTransferContext");function l({boardName:e="",children:t,pendingOwnershipTransfer:o=null,viewerIsOwner:n}){const a=(0,i.useMemo)((()=>({boardName:e,pendingOwnershipTransfer:o,viewerIsOwner:n})),[e,o,n]);return(0,s.jsx)(r,{value:a,children:t})}const d=a},552091:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(121151),n=o(898781),s=o(883119),r=o(785893);function a({cancelButtonLabel:e,confirmButtonLabel:t,heading:o,message:a,onCancel:l,onConfirm:d}){const c=(0,n.ZP)(),h=o||c._('Are you sure?', ' - ', ' -- '),u=e||c._('Cancel', ' - ', ' -- ');return(0,r.jsx)(i.ZP,{accessibilityModalLabel:h,footer:(0,r.jsxs)(s.xu,{marginEnd:-1,marginStart:-1,children:[(0,r.jsx)(s.xu,{"data-test-id":"cancel-button",padding:1,children:(0,r.jsx)(s.zx,{fullWidth:!0,onClick:l,size:"lg",text:u})}),(0,r.jsx)(s.xu,{"data-test-id":"confirm-button",padding:1,children:(0,r.jsx)(s.zx,{fullWidth:!0,color:"red",onClick:d,size:"lg",text:t})})]}),heading:h,onDismiss:l,role:"alertdialog",children:(0,r.jsx)(s.xu,{padding:4,children:(0,r.jsx)(s.xv,{children:a})})})}},402524:(e,t,o)=>{o.d(t,{Z:()=>A});var i=o(667294),n=o(966338),s=o(552091),r=o(6637),a=o(499128),l=o(717615),d=o(19121),c=o(935409),h=o(162158),u=o(482546),_=o(904411),p=o(516570),g=o(898781),m=o(231947),b=o(343341),x=o(780280),f=o(883119),v=o(785893);function y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class P extends i.Component{constructor(...e){super(...e),y(this,"state",{editMode:"main"}),y(this,"handleBoardLeave",(()=>{const{board:e,onBoardLeave:t,onClose:o}=this.props;o(),t&&t(e.id)})),y(this,"returnToMainEditMode",(()=>this.setState({editMode:"main"}))),y(this,"handleDelete",(()=>{const{board:e,deleteBoard:t,onBoardDelete:o,onClose:i,toastManagerContext:n,viewer:s,orbacActingAs:r}=this.props;t(e.id,(0,m.lJ)(s,r)).then((()=>{n.showToast((({hideToast:e})=>(0,v.jsx)(a.ZP,{onHide:e,text:this.props.i18n._('Board deleted!', 'User deleted their board', 'User deleted their board')})))})),this.returnToMainEditMode(),i(),o&&o(e)})),y(this,"handleShowDeleteModal",(()=>{this.setState({editMode:"confirmDelete"})})),y(this,"handleSubmit",(e=>{var t;const{viewer:o,orbacActingAs:i,board:n,updateBoard:s,onBoardPrivacyChange:a,onBoardUpdate:l,onClose:d}=this.props,c=this.props.board.id;if((0,m.D3)(o,(null===(t=n.owner)||void 0===t?void 0:t.id)||"",i)){const t={...e};return s(c,t,(0,m.lJ)(o,i)).then((()=>{n.privacy!==e.privacy&&a?a():l&&l(c,t),d()}))}{const{allow_homefeed_recommendations:t,collab_board_email:o}=e;t!==n.allow_homefeed_recommendations&&s(c,{allow_homefeed_recommendations:t});return r.ZP.create("BoardSettingsResource",{board_id:c,collab_board_email:o}).callUpdate({showError:!1}).then((()=>d())).catch((e=>{throw e.message}))}}))}render(){var e;const{board:t,categories:o,viewer:n,orbacActingAs:r,onCropChange:a,onClose:l,onToggleFlyout:d,requestContext:c}=this.props,{editMode:h}=this.state,u=this.props.i18n._('Edit your board', 'BoardEdit.Heading.Text', 'edit board heading'),_=(0,m.D3)(n,(null===(e=t.owner)||void 0===e?void 0:e.id)||"",r),g=(0,v.jsxs)(f.xu,{paddingY:8,position:"relative",children:[(0,v.jsx)(f.X6,{align:"center",size:"500",children:u}),(0,v.jsx)(f.xu,{position:"absolute",top:!0,left:c.isRTL,right:!c.isRTL,paddingY:8,paddingX:6,children:(0,v.jsx)(f.hU,{accessibilityLabel:this.props.i18n._('Close', 'BoardEdit.icon.cancel', 'Icon to close board edit modal'),icon:"cancel",iconColor:"darkGray",onClick:l})})]});return(0,v.jsxs)(i.Fragment,{children:["main"===h&&(0,v.jsx)(p.Z,{board:t,categories:o,currentUserIsOwner:_,handleBoardLeave:this.handleBoardLeave,isArchivable:!0,isDeletable:_,isEditable:_,onClose:l,onCropChange:a,onDeleteButtonClick:this.handleShowDeleteModal,onSubmit:this.handleSubmit,onToggleFlyout:d,submitText:this.props.i18n._('Done', 'BoardEdit.BoardEdit', 'Submit button text'),title:g}),"confirmDelete"===h&&(0,v.jsx)(s.Z,{confirmButtonLabel:this.props.i18n._('Delete forever', 'Confirms the user wants to permanently delete the board', 'Confirms the user wants to permanently delete the board'),cancelButtonLabel:this.props.i18n._('Cancel', ' - ', ' -- '),message:this.props.i18n._('Once you delete a board and all its Pins, you can\'t undo it!', ' - ', ' -- '),onConfirm:this.handleDelete,onCancel:this.returnToMainEditMode})]})}}function C(e){const t=(0,g.ZP)(),o=(0,n.useDispatch)(),s=function(){const e=(0,_.bn)(),t=(0,n.useDispatch)();return(0,i.useCallback)((async(o,i)=>{var n;const s=e[o],{pin_count:a}=s,{id:l=""}=null!==(n=s.owner)&&void 0!==n?n:{};t((0,c.eo)({boardId:o})),t((0,u.JS)({userId:l,increment:"number"==typeof a?-a:0})),await r.ZP.create("BoardResource",{board_id:o,...i?{orbac_subject_id:i}:Object.freeze({})}).callDelete()}),[e,t])}();return(0,v.jsx)(P,{...e,deleteBoard:s,requestContext:(0,x.B)(),viewer:(0,d.Z)(),orbacActingAs:(0,l.Z)(),i18n:t,toastManagerContext:(0,b.F9)(),updateBoard:(e,t,i)=>o((0,h.V)(e,t,i))})}var j=o(121151),w=o(784590);function A({boardId:e,onBoardArchiveChange:t,onBoardPrivacyChange:o,onBoardLeave:n,onBoardDelete:s,onBoardUpdate:r,onClose:a,onCropChange:l}){const d=(0,g.ZP)(),[c,h]=(0,i.useState)(!1),{data:u}=(0,w.Z)({name:"CategoriesResource",noCache:!0});(0,w.Z)({name:"BoardResource",options:{field_set_key:"edit",board_id:e},noCache:!0});const p=(0,_.gC)()(e);if(!p||!u)return(0,v.jsx)(j.ZP,{accessibilityModalLabel:d._('Board edit', 'BoardEdit.BoardEditModal', 'Accessibility label on modal'),onDismiss:a,size:"sm",children:(0,v.jsx)(f.xu,{padding:12,children:(0,v.jsx)(f.$j,{accessibilityLabel:d._('Board edit', 'BoardEdit.BoardEditModal', 'Accessibility label on loading spinner'),show:!0})})});return(0,v.jsx)(C,{board:p,categories:u,onBoardArchiveChange:t,onBoardPrivacyChange:o,onBoardLeave:n,onBoardDelete:s,onBoardUpdate:r,onClose:()=>{c||a()},onCropChange:l,onToggleFlyout:()=>h(!c)})}},913683:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(667294);class n extends i.PureComponent{constructor(...e){var t,o,i;super(...e),i=()=>{const{isAtEnd:e,isFetching:t,fetchMore:o,scrollBuffer:i,scrollHeight:n,scrollTop:s}=this.props;e||t||s+i>n&&o()},(o="check")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},516570:(e,t,o)=>{o.d(t,{Z:()=>re});var i=o(667294),n=o(563126),s=o(966338),r=o(301921),a=o(310227),l=o(883119),d=o(785893);function c({handleTogglePinSelection:e,index:t,isSelected:o,pin:i}){return(0,d.jsx)(l.iP,{onTap:()=>{e(t)},rounding:a.mv,children:(0,d.jsx)(r.default,{attributionOption:"hide",blockClickEvents:!0,pin:i,pinId:i.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:o?"selected":"no-selection",surface:"BoardCoverSelectablePin",trackingParameters:{slotIndex:t}})})}var h=o(898781);const u=({boardPins:e,coverPinIndex:t,fetchMore:o,isLoaded:n,handleTogglePinSelection:s})=>{const r=(0,h.ZP)(),a=(0,i.useRef)(null);return(0,d.jsx)(l.xu,{overflow:"auto",maxHeight:600,ref:a,children:n?(0,d.jsx)(l.xu,{paddingY:4,children:a&&(0,d.jsx)(l.Rk,{columnWidth:152,comp:({data:e,itemIdx:o})=>(0,d.jsx)(c,{handleTogglePinSelection:s,index:o,isSelected:t===o,pin:e}),gutterWidth:16,items:e||[],loadItems:o,scrollContainer:()=>a.current||window})}):(0,d.jsx)(l.xu,{padding:6,children:(0,d.jsx)(l.$j,{show:!0,accessibilityLabel:r._('Loading', 'BoardCoverEdit.Accessibility.Label', 'accessibility label for loading spinner')})})})};var _=o(121151),p=o(6637),g=o(717615),m=o(784590),b=o(19121),x=o(293880),f=o(231947),v=o(985913),y=o(780280);function P(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const C={border:0,top:120};class j extends i.Component{constructor(...e){super(...e),P(this,"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),P(this,"handleUpdateImage",(()=>{const e=this.image;if(!e)return;const t=e.offsetHeight,o=e.offsetWidth;this.setState((({holderHeight:e,holderWidth:i})=>({isSpinnerShown:!1,startBgPos:{left:-(o-i)/2,top:-(t-e)/2}})))})),P(this,"handleOnMouseUp",(()=>{this.isDragging&&(this.isDragging=!1,this.setState({startBgPos:{left:this.getBgLeft(),top:this.getBgTop()},deltaX:0,deltaY:0}),this.props.updateImgCrop(this.getCropData()))})),P(this,"isDragging",!1)}componentDidMount(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth})}componentDidUpdate(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}getFrameBounds(){const{frameHeight:e,frameWidth:t}=this.props,{holderHeight:o,holderWidth:i}=this.state;return{left:i/2-t/2,width:t,height:e,top:o/2-e/2}}getBgLeft(){const{frameWidth:e}=this.props,t=this.getFrameBounds(),o=this.getImgScale(),i=this._getImageDimensions(),n=i.imgHeight*o,s=i.imgWidth*o;let r=0;return n&&s&&(r=this.state.startBgPos.left+this.state.deltaX,r+s-e<t.left&&(r=t.left-s+e),r>t.left&&(r=t.left)),r}getBgTop(){const{frameHeight:e}=this.props,t=this.getFrameBounds(),o=this.getImgScale(),i=this._getImageDimensions(),n=i.imgHeight*o,s=i.imgWidth*o;let r=0;return n&&s&&(r=this.state.startBgPos.top+this.state.deltaY,r+n-e<t.top&&(r=t.top-n+e),r>t.top&&(r=t.top)),r}getImgScale(){const{frameHeight:e,frameWidth:t}=this.props,{imgHeight:o,imgWidth:i}=this._getImageDimensions(),n=this.getFrameBounds();if(o&&i){let s=o/i;return s=s>=n.height/n.width?t/i:e/o,s}return 1}getImageBounds(){const{imgHeight:e,imgWidth:t}=this._getImageDimensions();let o={};if(e&&t){const i=this.getImgScale();o={width:i*t,height:i*e}}return o}getBgBounds(){return{left:this.getBgLeft(),top:this.getBgTop()}}getCropData(){const{frameHeight:e,frameWidth:t}=this.props,o=this.getFrameBounds(),i=this.getBgBounds(),n=this.getImgScale();return{cropX:Math.round(-(i.left-o.left)/n),cropY:Math.round(-(i.top-o.top)/n),height:Math.round(e/n),width:Math.round(t/n),scale:n}}handleOnMouseDown(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}handleOnMouseMove(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}_getImageDimensions(){var e,t,o;const{pin:i}=this.props,n=null===(e=i.images)||void 0===e?void 0:e["236x"];return{imgHeight:null!==(t=null==n?void 0:n.height)&&void 0!==t?t:1,imgWidth:null!==(o=null==n?void 0:n.width)&&void 0!==o?o:1}}render(){var e,t;const{boardName:o,frameHeight:n,frameWidth:s,hideCoverNavigation:r,isFirst:a,isLast:c,isRTL:h,pin:u,showNextPin:_,showPrevPin:p}=this.props,{isSpinnerShown:g}=this.state,{imgHeight:m,imgWidth:b}=this._getImageDimensions(),x=this.getFrameBounds(),f=this.getImageBounds(),y=this.getBgBounds();return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)(l.xu,{height:300,overflow:"hidden",position:"relative",dangerouslySetInlineStyle:{__style:{margin:"15px"}},ref:e=>{this.holder=e},children:[(0,d.jsx)(l.xu,{left:!0,overflow:"hidden",position:"absolute",top:!0,dangerouslySetInlineStyle:{__style:{...y}},children:(0,d.jsx)("img",{alt:(0,v.Z)(this.props.i18n._('Board cover for {{ boardName }}', ' - ', ' -- '),{boardName:o}),onLoad:this.handleUpdateImage,ref:e=>{this.image=e},src:null===(e=u.images)||void 0===e||null===(t=e["236x"])||void 0===t?void 0:t.url,style:{maxWidth:"none",opacity:m&&b?1:.01,transitionDuration:"0.4s",transitionProperty:"opacity",imageBounds:f}})}),(0,d.jsxs)(l.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,d.jsx)("span",{style:{background:"#fff",opacity:.9,position:"absolute",top:0,left:0,right:0,height:x.top}}),(0,d.jsx)("span",{style:{background:"#fff",opacity:.9,position:"absolute",top:x.top,left:x.left+s,right:0,height:n}}),(0,d.jsx)("span",{style:{top:n+x.top,left:0,right:0,bottom:0}}),(0,d.jsx)("span",{style:{top:x.top,left:0,width:x.left,height:n}})]}),(0,d.jsx)(l.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{boxShadow:"0 2px 3px rgba(#221919, 0.3), inset 0 0 0 1px rgba(#000, 0.3)",...x}}}),(0,d.jsx)("div",{style:{background:"#fff",bottom:0,cursor:"move",left:0,opacity:0,position:"absolute",right:0,top:0,zIndex:0},onMouseDown:e=>{this.handleOnMouseDown(e)},onMouseMove:e=>{this.handleOnMouseMove(e)},onMouseUp:()=>{this.handleOnMouseUp()},role:"presentation"}),(0,d.jsx)(l.xu,{height:30,left:!0,position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{bottom:"5px",display:g?"":"none",background:"url('~app/common/images/spinner.gif') no-repeat center"}}})]}),a||r?null:(0,d.jsx)(l.xu,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...C,left:h?void 0:100,right:h?100:void 0}},children:(0,d.jsx)(l.hU,{icon:"arrow-back",accessibilityLabel:this.props.i18n._('Previous', 'Label for indicating selecting the previous pin', 'Label for indicating selecting the previous pin'),onClick:p})}),c||r?null:(0,d.jsx)(l.xu,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...C,left:h?100:void 0,right:h?void 0:100}},children:(0,d.jsx)(l.hU,{icon:"arrow-forward",accessibilityLabel:this.props.i18n._('Next', 'Label for indicating selecting the previous pin', 'Label for indicating selecting the previous pin'),onClick:_})})]})}}function w(e){const t=(0,h.ZP)(),{isRTL:o}=(0,y.B)();return(0,d.jsx)(j,{...e,isRTL:!!o,i18n:t})}function A(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function S(e){return e.reduce(((e,t)=>("pin"===t.type&&e.push(t),e)),[])}function z({boardFeedResource:{data:e},coverPinId:t}){return Math.max(0,S(e||[]).findIndex((e=>e.id===t)))}class I extends i.Component{constructor(...e){super(...e),A(this,"state",{coverPinIndex:z(this.props),imgCropData:null,selectedCoverPin:null,previousBoardFeedResourceData:null}),A(this,"handleSave",(()=>{var e,t,o;const{boardId:i,dispatch:n,viewer:s,orbacActingAs:r}=this.props,{coverPinIndex:a,imgCropData:l}=this.state,d=(this.pins||[])[a],c=(0,f.lJ)(s,r);if(!d)return;const h=null===(e=d.images)||void 0===e?void 0:e["236x"],u=null==h?void 0:h.url,_=l?{crop_x:l.cropX,crop_y:l.cropY,height:l.height,width:l.width,scale:l.scale}:{crop_x:0,crop_y:0,height:null==h?void 0:h.height,width:null==h?void 0:h.width,scale:1},g={board_id:i,url:u,pin_id:d.id,pin_image_url:u,..._,...c?{orbac_subject_id:c}:Object.freeze({})},m={height:null!==(t=null==h?void 0:h.height)&&void 0!==t?t:0,width:null!==(o=null==h?void 0:h.width)&&void 0!==o?o:0,x:l?l.cropX:0,y:l?l.cropY:0};p.ZP.create("BoardResource",g).callUpdate().then((()=>{this.props.onSave(null!=u?u:""),n((0,x.Cr)(i,{custom_cover:!0,scale:l?l.scale:1,pin_id:d.id,crop:m,image_url:null!=u?u:""}))}))})),A(this,"updateImgCrop",(e=>this.setState({imgCropData:e}))),A(this,"handleShowNextPin",(()=>{const{boardFeedResource:{isAtEnd:e,isFetching:t,fetchMore:o}}=this.props,i=(this.pins||[]).length;i&&this.setState((({coverPinIndex:e})=>({coverPinIndex:(e+1)%i})),(()=>{this.pins&&this.state.coverPinIndex+5>=this.pins.length&&!e&&!t&&o()}))})),A(this,"handleShowPrevPin",(()=>{const e=(this.pins||[]).length;e&&this.setState((({coverPinIndex:t})=>({coverPinIndex:(t||e)-1})))})),A(this,"handleTogglePinSelection",(e=>{const t=this.pins||[];this.setState({coverPinIndex:e,selectedCoverPin:t[e]})})),A(this,"handleCoverEditBackButtonClick",(()=>{this.setState({selectedCoverPin:null})})),A(this,"renderBoardCoverMasonry",(()=>{const{coverPinIndex:e,selectedCoverPin:t}=this.state,{boardName:o,boardFeedResource:i,frameHeight:n,frameWidth:s}=this.props,r=this.pins||[],{data:a,fetchMore:l,isLoaded:c}=i;return t?(0,d.jsx)(w,{boardName:o,frameHeight:null!=n?n:236,frameWidth:null!=s?s:236,isFirst:!e,isLast:e===r.length-1,pin:t,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop,hideCoverNavigation:!0}):(0,d.jsx)(u,{boardPins:a,coverPinIndex:e,fetchMore:l,handleTogglePinSelection:this.handleTogglePinSelection,isLoaded:c})})),A(this,"renderCoverEditHeader",(()=>(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"center",height:80,children:(0,d.jsx)(l.xu,{width:"100%",padding:4,children:(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Navigate to cover picker', 'BoardEdit.back.button', 'Cover picker navigate back button'),icon:"arrow-back",iconColor:"darkGray",onClick:this.handleCoverEditBackButtonClick}),(0,d.jsx)(l.X6,{size:"500",children:this.props.i18n._('Move and scale to crop', 'BoardEdit.Heading.Experiment.Text', 'edit board heading')}),(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardCoverEdit.icon.cancel', 'Cancel board cover edit'),icon:"cancel",iconColor:"darkGray",onClick:this.props.onCancel})]})})})))}static getDerivedStateFromProps(e,t){const o=e.boardFeedResource.data,{previousBoardFeedResourceData:i}=t;return!i&&o?{previousBoardFeedResourceData:o,coverPinIndex:z(e)}:{previousBoardFeedResourceData:o}}componentDidUpdate(e){const t=this.props.boardFeedResource.data,o=e.boardFeedResource.data;(t&&o!==t&&t.length||t&&o&&t.length!==o.length)&&t.forEach((e=>{if("pin"===e.type){(new Image).src=e.url}}))}get pins(){const{boardFeedResource:{data:e}}=this.props;return e?S(e):void 0}render(){const{heading:e,onCancel:t}=this.props,{coverPinIndex:o,selectedCoverPin:i}=this.state,n=(this.pins||[])[o];return(0,d.jsx)(_.ZP,{accessibilityModalLabel:this.props.i18n._('Change Board Cover', 'accessible label for modal to change board cover image', 'accessible label for modal to change board cover image'),size:"lg",heading:i?this.renderCoverEditHeader():e,onDismiss:t,footer:i&&(0,d.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.zx,{disabled:!n,onClick:this.handleSave,text:this.props.i18n._('Done', 'BoardCoverEdit.Button.Submit.Exp', 'Button for saving board cover edit')})})}),children:this.renderBoardCoverMasonry()})}}function B(e){const t=(0,h.ZP)(),o=(0,s.useDispatch)(),i=(0,m.Z)({name:"BoardFeedResource",options:{board_id:e.boardId,field_set_key:"images_only_item",filter_section_pins:!1,page_size:50}});return(0,d.jsx)(I,{...e,boardFeedResource:i,dispatch:o,i18n:t,viewer:(0,b.Z)(),orbacActingAs:(0,g.Z)()})}var k=o(552091);const T=({label:e,labelId:t})=>t?(0,d.jsx)(l.__,{htmlFor:t,children:(0,d.jsx)(l.xv,{size:"100",children:e})}):(0,d.jsx)(l.xv,{size:"100",children:e});function E(e){const{children:t,label:o,labelId:n}=e;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l.xu,{marginBottom:2,children:(0,d.jsx)(T,{label:o,labelId:n})}),t]})}const M=138;function D({coverPin:e,handleShowBoardCoverEditModal:t}){const o=(0,h.ZP)(),[n,s]=(0,i.useState)(!1),{isRTL:r}=(0,y.B)();return(0,d.jsx)(E,{label:o._('Board cover', 'BoardForm.BoardFormCoverButton', 'Form label for updating board cover'),children:(0,d.jsx)(l.xu,{width:M,position:"relative",children:(0,d.jsx)(l.iP,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l.zd,{height:M,rounding:4,width:M,children:(0,d.jsx)(l.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||M,naturalWidth:e.size&&e.size[0]||M,src:e.image_url})}),(0,d.jsx)(l.xu,{position:"absolute",left:r,right:!r,bottom:!0,padding:2,children:(0,d.jsx)(l.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:n?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,d.jsx)(l.JO,{accessibilityLabel:o._('Edit board cover', 'BoardForm.BoardFormBoardCoverButton', 'Accessibility label on icon'),icon:"edit",color:"default",size:16})})})]}):(0,d.jsx)(l.xu,{alignItems:"center",color:n?"darkWash":"lightGray",display:"flex",height:M,justifyContent:"center",rounding:4,width:M,children:(0,d.jsx)(l.JO,{accessibilityLabel:o._('Add cover photo', 'BoardForm.BoardFormCoverButton', 'Accessibility label on icon'),color:"default",icon:"add",size:24})})})})})}function Z({children:e,label:t,labelId:o,subtext:n}){return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,d.jsx)(l.xu,{marginStart:2,children:(0,d.jsxs)(l.__,{htmlFor:o,children:[(0,d.jsx)(l.xv,{size:"300",weight:"bold",children:t}),n]})})]})})}function R({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:o}){const i=(0,h.ZP)();return t&&(0,d.jsx)(Z,{label:i._('Email notifications', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Form label'),labelId:"emailNotificationsCheckbox",subtext:(0,d.jsx)(l.xv,{color:"subtle",size:"300",children:i._('Get an email when someone saves Pins to this board', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Text explaing field on board form')}),children:(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,d.jsx)(l.xu,{marginEnd:1,children:(0,d.jsx)(l.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:o})})})})}var L=o(623122),O=o(349700);function F({board:e,onCollaboratorInviteClick:t}){var o;const i=(0,h.ZP)(),n=(0,L.Z)({boardId:e.id,ownerName:null!==(o=e.owner.full_name)&&void 0!==o?o:"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),s=n.slice(0,3).map((e=>e.name));let r="";switch(n.length){case 3:r=(0,O.Wc)(`${i._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')}`,{first:`${s[0]}`,second:`${s[1]}`,last:`${s[2]}`});break;case 2:r=(0,O.Wc)(`${i._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')}`,{first:`${s[0]}`,second:`${s[1]}`});break;default:r=s.join(", ")}const a=n.length>3?(0,O.Wc)(i.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', n.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:r,leftCount:""+(n.length-3)}):(0,O.Wc)(`${i._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')}`,{userNames:r});return(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(l.HE,{accessibilityLabel:a,collaborators:n.map((({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e}))),size:"md"}),(0,d.jsx)(l.hU,{accessibilityLabel:i._('Invite collaborators', 'BoardEdit.BoardCollaboratorsAndInviteSection', 'Accessibility label on button'),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}var N=o(948618),U=o(966113);function H({board:e,onCollaboratorInviteClick:t}){const o=(0,h.ZP)(),i=(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(l.xv,{size:"100",inline:!0,children:o._('Collaborators', ' - ', ' -- ')}),(0,d.jsx)(N.Z,{}),(0,d.jsx)(l.xv,{inline:!0,size:"100",weight:"bold",children:(0,d.jsx)(l.rU,{inline:!0,target:"blank",href:U.Z.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE,underline:"hover",children:o._('Learn more', ' - ', ' -- ')})})]});return(0,d.jsx)(E,{label:i,labelId:"collaborators",children:(0,d.jsx)(F,{board:e,onCollaboratorInviteClick:t})})}function W({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:o}){const i=(0,h.ZP)();return t&&(0,d.jsx)(Z,{label:i._('Let collaborators add people', 'BoardForm.BoardFormCollaboratorsInviteToggle', 'Form label'),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,d.jsx)(l.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:o})})}function $({description:e,descriptionValidatorErrors:t,onChange:o}){const i=(0,h.ZP)(),n="boardEditDescription";return(0,d.jsx)(E,{label:i._('Description', 'BoardForm.BoardFormDescription', ' Form field label'),labelId:n,children:(0,d.jsx)(l.Kx,{errorMessage:t.join(", "),id:n,name:"description",onChange:o,placeholder:i._('What\'s your board about?', ' - ', ' -- '),value:e})})}const G=({children:e})=>(0,d.jsx)(l.xu,{paddingX:8,role:"list",children:i.Children.map(e,((t,o)=>t&&(0,d.jsx)(l.xu,{role:"listitem",marginBottom:o===i.Children.count(e)-1?1:8,children:t},o)))});var q=o(27255);function V({isProtectedToggler:e,isToggleDisable:t,onChange:o,onCheckboxChange:n,privacy:s}){const r=(0,h.ZP)();if(!0===e)return(0,d.jsx)(Z,{label:r._('Protected board (not listed on user\'s profile)', 'BoardForm.BoardFormSecretToggle', 'protected board'),labelId:"protected",children:(0,d.jsx)(l.xu,{paddingY:2,children:(0,d.jsx)(l.rs,{onChange:o,switched:s===q.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(s!==q.Z.BoardPrivacy.PROTECTED){const e=r._('Keep this board secret', 'BoardForm.BoardFormSecretToggle', 'Caption for board settings to set visibility'),o=(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(l.xv,{color:"subtle",size:"300",children:[r._('So only you and collaborators can see it.', 'BoardForm.BoardFormSecretToggle', 'notifying the board owner only they and the collaborators can see the board if it set to secret')," ",(0,d.jsx)(l.rU,{inline:!0,target:"blank",href:U.Z.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE,underline:"hover",children:r._('Learn more', 'BoardForm.BoardFormSecretToggle', 'Link to learn more about secret boards')})]})});return(0,d.jsx)(Z,{label:e,labelId:"secret",subtext:o,children:(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,d.jsx)(l.XZ,{checked:s===q.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:n,disabled:t})})})}return null}function Y({allowHomefeedRecommendations:e,onCheckboxChange:t}){const o=(0,h.ZP)();return(0,d.jsx)(Z,{label:o._('Personalization', 'BoardForm.BoardFormRecommendationToggle', 'form label'),labelId:"recommendation",subtext:(0,d.jsx)(l.xv,{color:"subtle",size:"300",children:o._('Show Pins inspired by this board in your home feed.', 'BoardForm.BoardFormRecommendationToggle', 'Caption for board settings to set visibility')}),children:(0,d.jsx)(l.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}function X({name:e,nameValidatorErrors:t,onChange:o}){const i=(0,h.ZP)();return(0,d.jsx)(E,{label:i._('Name', 'BoardForm.BoardFormTitleInput', 'Form field label'),labelId:"boardEditName",children:(0,d.jsx)(l.nv,{errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:o,placeholder:i._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:e})})}var J=o(66699),K=o(343341),Q=o(134906);function ee(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const te=(e,t)=>(0,Q.Gy)({max:e,maxErrorString:(0,J.Z)(t._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})}),oe=e=>[te(q.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],ie=e=>[(0,Q.aH)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),te(q.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],ne=({condition:e,children:t})=>e?(0,d.jsx)(l.xu,{position:"absolute",zIndex:_.b7,children:t}):t;class se extends i.Component{constructor(e){super(e),ee(this,"handleChangeName",(({value:e})=>{const t=(0,Q.FU)(ie(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})})),ee(this,"handleChangeDescription",(({value:e})=>{const t=(0,Q.FU)(oe(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})})),ee(this,"handleChangePrivacyToggle",(({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})})),ee(this,"handleEnableSecret",(()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})})),ee(this,"handleHideSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!1})})),ee(this,"handleChangeRecommendationToggle",(({value:e})=>{this.setState({allowHomefeedRecommendations:e})})),ee(this,"handleChangeCollabBoardEmail",(({value:e})=>{this.setState({collab_board_email:e})})),ee(this,"handleChangeCollaboratorInvitesEnabled",(({value:e})=>{this.setState({collaboratorInvitesEnabled:e})})),ee(this,"handleCheckboxChange",(e=>({event:t,checked:o})=>e({event:t,value:o}))),ee(this,"handleSubmit",(e=>{const{onSubmit:t}=this.props,{collab_board_email:o,collaboratorInvitesEnabled:i,description:n,name:s,privacy:r,allowHomefeedRecommendations:a}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const l=s.trim(),d=n.trim();this.setState({submitting:!0,submitError:""}),t({name:l,collab_board_email:o,collaborator_invites_enabled:i,description:d,privacy:r,allow_homefeed_recommendations:a}).then((()=>{this.setState({submitting:!1})})).catch((e=>{let t=this.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- ');if(e.message){const{message:o,message_detail:i}=e;t=i?`${o} ${i}`:o}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})}))})),ee(this,"handleShowBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!0})})),ee(this,"handleHideBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!1})})),ee(this,"handleShowCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!0})})),ee(this,"handleHideCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!1})})),ee(this,"handleSaveBoardCoverEditModal",(e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)}));const{board:{collab_board_email:t,collaborator_invites_enabled:o,description:i,name:n,pin_count:s,privacy:r,allow_homefeed_recommendations:a}}=e;this.state={collab_board_email:t,description:i,name:n,pin_count:s,privacy:r,allowHomefeedRecommendations:a,collaboratorInvitesEnabled:o,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:n,previousDescription:i,previousPrivacy:r}}static getDerivedStateFromProps(e,t){const o={};return e.board.name!==t.previousName&&(o.previousName=e.board.name,o.nameValidatorErrors=(0,Q.FU)(ie(e.i18n),e.board.name)),e.board.description!==t.previousDescription&&(o.previousDescription=e.board.description,o.descriptionValidatorErrors=(0,Q.FU)(oe(e.i18n),e.board.description)),e.board.privacy!==t.previousPrivacy&&(o.previousPrivacy=e.board.privacy),o}getFormFooter(){const{submitText:e}=this.props,{submitError:t}=this.state;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",children:(0,d.jsx)(l.xu,{height:48,children:(0,d.jsx)(l.zx,{color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,d.jsx)(l.xu,{paddingX:1,"aria-live":"polite",tabIndex:"0",children:(0,d.jsx)(l.xv,{color:"error",children:t})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:o,submitting:i}=this.state;return!t||o.length>0||e.length>0||i}render(){const{board:e,board:{archived_by_me_at:t,cover_pin:o,id:s,is_collaborative:r},coverImageHeight:a,coverImageWidth:c,currentUserIsOwner:h,handleBoardLeave:u,isAdAccount:p,isAdAccountOwner:g,isDeletable:m,isEditable:b,isNameAndSecretView:x,onClose:f,onDeleteButtonClick:v,requestContext:y,title:P,useModalWithNoLayer:C}=this.props,{allowHomefeedRecommendations:j,collab_board_email:w,collaboratorInvitesEnabled:A,description:S,descriptionValidatorErrors:z,name:I,nameValidatorErrors:T,pin_count:E,privacy:M,showBoardCoverEdit:Z,showCollaboratorsModal:L,showSecretConfirmation:F}=this.state,N=b&&E>0;let U=(0,d.jsxs)(G,{children:[N&&(0,d.jsx)(D,{coverPin:o,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,d.jsx)(X,{name:I,nameValidatorErrors:T,onChange:this.handleChangeName}),(0,d.jsx)($,{description:S,descriptionValidatorErrors:z,onChange:this.handleChangeDescription}),h&&!!u&&(0,d.jsx)(H,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,d.jsx)(l.xu,{marginBottom:-7,children:(0,d.jsx)(l.xv,{size:"100",children:this.props.i18n._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,d.jsx)(V,{isProtectedToggler:!!p,isToggleDisable:!!p&&!g,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:M}),!t&&(0,d.jsx)(Y,{allowHomefeedRecommendations:j,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,d.jsx)(R,{hasCollabBoardEmail:w,isCollaborative:r,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,d.jsx)(W,{collaboratorInvitesEnabled:A,isCollaborative:r,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),m&&(0,d.jsxs)(l.xu,{marginTop:-6,paddingY:4,children:[(0,d.jsx)(l.xv,{size:"100",children:this.props.i18n._('Action', 'BoardForm.BoardForm.Action', 'Section heading in board edit form')}),(0,d.jsxs)(l.iP,{onTap:v,children:[(0,d.jsx)(l.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,d.jsx)(l.X6,{size:"400",children:this.props.i18n._('Delete board', 'BoardForm.Delete', 'Delete board label')})}),(0,d.jsx)(l.xv,{size:"300",color:"subtle",children:this.props.i18n._('Delete this board and all its Pins forever.', 'BoardForm.BoardForm.Delete.Label', 'Delete board warning text')}),(0,d.jsx)(l.xv,{size:"300",color:"subtle",children:this.props.i18n._('You can\'t undo this!', 'BoardForm.BoardForm.Delete.LabelTwo', 'Delete board warning text')})]})]})]});h?x&&(U=(0,d.jsxs)(G,{children:[(0,d.jsx)(X,{name:I,nameValidatorErrors:T,onChange:this.handleChangeName}),(0,d.jsx)(V,{isProtectedToggler:!!p,isToggleDisable:!!p&&!g,onChange:this.handleChangePrivacyToggle,privacy:M,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):U=(0,d.jsxs)(G,{children:[!!u&&(0,d.jsx)(H,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,d.jsx)(R,{hasCollabBoardEmail:w,isCollaborative:r,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&(0,d.jsx)(Y,{allowHomefeedRecommendations:j,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,d.jsx)(l.xv,{color:"subtle",size:"300",children:(0,O.nk)(this.props.i18n._('Only the board\u2019s owner ({{ boardOwner }}) can manage the rest of its features', 'BoardForm.CollaboratorPermissionsCopy', 'Copy on board edit form letting collaborators know of their permissions on a board'),{boardOwner:(0,d.jsx)(l.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});const q=C?l.u_:_.ZP,J=this.props.i18n._('Change board cover', 'BoardForm.BoardCoverEdit.heading', 'Change board cover heading'),K=(0,d.jsxs)(l.xu,{paddingY:8,position:"relative",children:[(0,d.jsx)(l.X6,{align:"center",size:"500",children:J}),(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:y.isRTL,right:!y.isRTL,paddingY:8,paddingX:6,children:(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardForm.BoardCoverEdit.cancel', 'Cancel change board cover heading'),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal})})]});return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(ne,{condition:!!C,children:!Z&&!L&&(0,d.jsx)(q,{accessibilityModalLabel:this.props.i18n._('Board form', 'BoardForm.BoardForm', 'Accessibility label on board form'),size:"sm",onDismiss:f,footer:this.getFormFooter(),heading:P,children:(0,d.jsx)(l.xu,{marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,d.jsx)("form",{method:"post",onSubmit:this.handleSubmit,children:U})})})}),Z&&(0,d.jsx)(B,{boardId:s,boardName:I,coverPinId:null==o?void 0:o.pin_id,frameHeight:a,frameWidth:c,heading:K,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}),F&&(0,d.jsx)(k.Z,{confirmButtonLabel:this.props.i18n._('Make secret', 'Setting the boards visibility to secret', 'Setting the boards visibility to secret'),heading:this.props.i18n._('Are you sure?', 'Warning label asking users to be sure of their action', 'Warning label asking users to be sure of their action'),message:this.props.i18n._('If you make this board secret, some active ads will stop running', 'Explicitly warning users of the board visibility action they are doing', 'Explicitly warning users of the board visibility action they are doing'),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),L&&(0,d.jsx)(n.Z,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})]})}}function re(e){const t=(0,h.ZP)();return(0,d.jsx)(se,{...e,i18n:t,requestContext:(0,y.B)(),toastManagerContext:(0,K.F9)()})}ee(se,"defaultProps",{isNameAndSecretView:!1})},678691:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(448272),n=o(263116),s=o(785893);const r=(0,n.ZP)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!o.m[t]},importAsync:()=>Promise.all([o.e(89333),o.e(35978)]).then(o.bind(o,497e3)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return o(t)},resolve(){return 497e3}});function a(e){return(0,s.jsx)(r,{...e,fallback:(0,s.jsx)(i.Z,{})})}},448272:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(898781),n=o(883119),s=o(785893);function r(){const e=(0,i.ZP)();return(0,s.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(n.$j,{accessibilityLabel:e._('Loading editor', 'EditorWithMentionsFallback.loading', 'Message shown while waiting for the editor to load'),show:!0})})}},661712:(e,t,o)=>{o.r(t),o.d(t,{PinRepEditButton:()=>a,default:()=>l});var i=o(898781),n=o(91580),s=o(883119),r=o(785893);function a({handlePinEditButtonClick:e,style:t,useLegoStyles:o=!1,usePersistentOneClickSaveStyles:n,wrappingIconStyle:a,shouldUseLegoStyles:l,onDelete:d}){const c=(0,i.ZP)(),h=(0,r.jsx)(s.hU,{accessibilityLabel:c._('Edit', 'edit button on pin', 'edit button on pin'),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return l?(0,r.jsx)(s.zx,{fullWidth:!0,size:"lg",color:"gray",text:c._('Saved', 'PinRepEditButton.SavedButton', 'saved button on pin'),onClick:d,accessibilityLabel:c._('Pin Saved', 'PinRepEditButton.SavedButtonLabel', 'saved button label on pin'),selected:!0}):o||n?(0,r.jsx)("div",{style:{...a||{}},children:h}):h}const l=(0,n.Z)(a)},879089:(e,t,o)=>{o.d(t,{Z:()=>P});var i=o(667294),n=o(966338),s=o(693456),r=o(27255),a=o(47246),l=o(223123),d=o(717615),c=o(784590),h=o(19121),u=o(957119),_=o(108391),p=o(231947),g=o(414327),m=o(898781),b=o(883119),x=o(785893);function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function v({board:e,hovered:t,searchQuery:o}){const i=e.privacy===r.Z.BoardPrivacy.SECRET;return(0,x.jsxs)(b.xu,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:[(0,x.jsx)(b.xu,{flex:"grow",children:(0,x.jsx)(b.xv,{weight:"bold",children:(0,_.W)(o,e.name)})}),(0,x.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",flex:"none",children:[i&&(0,x.jsx)(s.Z,{type:"secret"}),e.is_collaborative&&(0,x.jsx)(s.Z,{type:"group"})]})]})}class y extends i.Component{constructor(e){super(e),f(this,"getSections",(()=>{var e;if(null===(e=this.props.boardResource.data)||void 0===e||!e.all_boards)return[];const{searchQuery:t}=this.state,{boardResource:{data:{all_boards:o}}}=this.props;return t.length>=2?[{items:(0,u.j)(o,t)}]:[{items:o}]})),f(this,"createBtnDisabled",(()=>{var e;if(null===(e=this.props.boardResource.data)||void 0===e||!e.all_boards)return!1;const{boardResource:{data:{all_boards:t}}}=this.props,{searchQuery:o}=this.state;return t.some((e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===o.toLowerCase()}))})),f(this,"handleBoardCreate",(e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:o,onBoardCreate:i}=this.props;o(),i?i(e):t({name:e,privacy:"public"}).then((e=>{const{onBoardChosen:t}=this.props;t(e)}))})),f(this,"handleBoardSelected",(e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})})),f(this,"handleSearchQueryUpdate",(e=>{this.setState({searchQuery:e})})),f(this,"renderRow",(({item:e,hovered:t})=>{const{searchQuery:o}=this.state;return(0,x.jsx)(v,{board:e,hovered:t,searchQuery:o})})),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isBoardlessPinsBoard:o,isQuickCreatesBoard:i,isStoryPin:n,viewer:s}=this.props,{searchQuery:r,selectedBoard:l}=this.state;let d=this.props.i18n._('Select a board', 'Label for selecting a board in Edit Pin Modal', 'Label for selecting a board in Edit Pin Modal');return t?d=i?this.props.i18n._('Choose board', 'BoardPickerFlyout.displayBoardName.quickCreatesBoard', 'Title for board picker when current board is a quick creates board'):o?this.props.i18n._('Profile', 'BoardPickerFlyout.displayBoarName.boardlessPins', 'Title indicating the pin is saved to profile'):t.name:l&&(d=l.name),(0,x.jsxs)(b.xu,{children:[(0,x.jsx)(b.$j,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!e.isLoaded}),e.data&&(0,x.jsx)(a.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:d||"",isStoryPin:n,onCreate:this.handleBoardCreate(s),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getSections()})]})}}function P(e){const t=(0,l.Z)(),o=(0,m.ZP)(),i=(0,n.useDispatch)(),s=(0,h.Z)(),r=(0,n.useSelector)((({advertiser:e})=>e)),a=s.isAuth&&r&&r.owner_user_id!==s.id,u=a?r.id:null,_=a?r.owner_user_id:null,b=(0,d.Z)(),f=(0,p.Ms)(s,b),v=f||_,P=(0,c.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:v,...u&&_?{advertiser_id:u,filter:"protected",username:_}:{}},noCache:!0});return(0,x.jsx)(y,{...e,advertiser_id:u,boardResource:P,createBoard:e=>t({boardCreateOptions:e}),invalidateBoardPickerBoardsResource:()=>{i((0,g.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker",...f?{username:f}:{username:_}}))},username:_,viewer:s,i18n:o})}},47246:(e,t,o)=>{o.d(t,{Z:()=>_});var i=o(667294),n=o(470623),s=o(139176),r=o(603174),a=o(887831),l=o(898781),d=o(883119),c=o(785893);function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class u extends i.Component{constructor(...e){super(...e),h(this,"state",{showFlyout:!1}),h(this,"setContainerRef",(e=>{this.containerRef=e})),h(this,"handleCreate",(()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()})),h(this,"handleSelectItem",(e=>{this.hideFlyout();const{onSelect:t,onCreate:o}=this.props;e?t(e):o&&o()})),h(this,"handleDropdownTouch",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),h(this,"handleHideFlyout",(e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()})),h(this,"hideFlyout",(()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})}))}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:o,onMouseLeave:i},isHovering:a,isStoryPin:l,onCreate:h,onSearchQueryUpdate:u,renderRow:_,searchQuery:p,sections:g,createBtnDisabled:m}=this.props,{showFlyout:b}=this.state;this.indexManager=new n.Z(g.map((e=>e.items))),this.indexManager.setSelectItem(this.handleSelectItem);const x=!p.trim()||!!m;return(0,c.jsxs)(d.xu,{ref:this.setContainerRef,flex:l?"grow":void 0,children:[(0,c.jsx)(d.iP,{fullWidth:!!l,onMouseEnter:o,onMouseLeave:i,onTap:this.handleDropdownTouch,rounding:2,children:(0,c.jsxs)(d.xu,{alignItems:"center",color:a?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:l?4:3,rounding:l?4:2,children:[(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:(0,c.jsx)(d.xv,{weight:"bold",children:e})}),(0,c.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"arrow-down",size:14})]})}),b&&(0,c.jsx)(d.xu,{position:"relative",children:(0,c.jsxs)(d.xu,{borderStyle:"sm",color:"default",direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:l?4:2,width:"100%",zIndex:new d.Ry(1),children:[(0,c.jsx)(d.xu,{children:(0,c.jsxs)(d.xu,{display:"flex",marginStart:-1,marginEnd:-1,padding:2,children:[(0,c.jsx)(d.xu,{display:"flex",flex:"grow",paddingX:1,children:(0,c.jsx)(s.Z,{hideIcon:!0,indexManager:this.indexManager,onChange:u,value:p})}),h&&(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{disabled:x,onClick:this.handleCreate,text:this.props.i18n._('Create', 'board or section dropdown create button', 'board or section dropdown create button')})})]})}),(0,c.jsx)(r.Z,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:_,sections:g})]})})]})}}function _(e){const t=(0,l.ZP)(),{isHovering:o,hoverHandlers:i}=(0,a.Z)();return(0,c.jsx)(u,{...e,i18n:t,isHovering:o,hoverHandlers:i})}},316298:(e,t,o)=>{o.d(t,{Z:()=>x,x:()=>b});var i=o(667294),n=o(966338),s=o(4392),r=o(47246),a=o(784590),l=o(957119),d=o(108391),c=o(898781),h=o(883119),u=o(785893);function _(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const p="NO_SECTION_VALUE";function g({section:e,hovered:t,searchQuery:o}){return(0,u.jsxs)(h.xu,{children:[(0,u.jsx)(h.xu,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:(0,u.jsx)(h.xu,{flex:"grow",children:(0,u.jsx)(h.xv,{weight:"bold",children:(0,d.W)(o,e.title)})})}),e.id===p&&(0,u.jsx)(h.iz,{})]})}class m extends i.Component{constructor(...e){super(...e),_(this,"state",{searchQuery:""}),_(this,"getPickerSections",(()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:o}=this.props;let i=t&&t.data||[];return i=o?i.filter((e=>e.id!==o)):[{id:p,title:this.props.i18n._('No section', 'default dropdown option for selecting a board section on pin edit', 'default dropdown option for selecting a board section on pin edit')},...i],e.length>=2&&(i=(0,l.j)(i,e,"title")),[{items:i}]})),_(this,"createBtnDisabled",(()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some((e=>{var o;return(null===(o=e.title)||void 0===o?void 0:o.toLowerCase())===t.toLocaleLowerCase()}))})),_(this,"handleSectionCreate",(()=>{const{board:e,onSectionChange:t,sectionsResource:o,dispatch:i,onSectionCreate:n}=this.props,{searchQuery:r}=this.state;n?n(r):i&&e.id&&i((0,s.Z)({boardId:e.id,name:r},this.props.i18n)).then((e=>{o&&o.refresh(),this.setState({searchQuery:""}),t(e)}))})),_(this,"handleSectionSelected",(e=>{const{onSectionChange:t}=this.props;e.id===p?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))})),_(this,"handleSearchQueryUpdate",(e=>{this.setState({searchQuery:e})})),_(this,"renderRow",(({item:e,hovered:t})=>{const{searchQuery:o}=this.state;return(0,u.jsx)(g,{hovered:t,searchQuery:o,section:e})}))}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:o}=this.props;if(o!==t){const{sectionsResource:e}=this.props;e&&e.refresh()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:o,mergingFromSectionId:i,selectedSectionName:n}=this.props,{searchQuery:s}=this.state;let a=i?this.props.i18n._('Pick a section', 'default dropdown option for selecting a board section to merge to', 'default dropdown option for selecting a board section to merge to'):this.props.i18n._('No section', 'default dropdown option for selecting a board section on pin edit', 'default dropdown option for selecting a board section on pin edit');if(o){let e;t&&t.data&&(e=t.data.find((e=>e.id===o))),a=e&&e.title||a}else n&&(a=n);return(0,u.jsxs)(h.xu,{children:[(0,u.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&(0,u.jsx)(r.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:a,isStoryPin:e,onCreate:i?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:s,sections:this.getPickerSections()})]})}}function b(e){const t=(0,c.ZP)();return(0,u.jsx)(m,{...e,dispatch:(0,n.useDispatch)(),i18n:t})}function x(e){const t=(0,a.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id},noCache:!0});return(0,u.jsx)(b,{...e,sectionsResource:t})}},931319:(e,t,o)=>{o.d(t,{Z:()=>b});var i=o(667294),n=o(108391),s=o(704418),r=o(887831),a=o(898781),l=o(883119),d=o(785893);function c(e){const t=(0,a.ZP)(),{buttonLabel:o,hasHoverState:i,name:n,onClick:s}=e,{isHovering:c,hoverHandlers:h}=(0,r.Z)(),u=n||o||t._('Create board', ' - ', ' -- ');return(0,d.jsx)(l.iP,{onMouseEnter:h.onMouseOver,onMouseLeave:h.onMouseLeave,onTap:s,children:(0,d.jsxs)(l.xu,{alignItems:"center",color:i&&c?"lightGray":"white",display:"flex",padding:4,height:"100%",width:"100%",children:[(0,d.jsx)(l.xu,{rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,color:"lightGray",children:(0,d.jsx)(l.JO,{accessibilityLabel:"",size:20,icon:"add",color:"default"})}),n?(0,d.jsx)(l.xu,{margin:1,children:(0,d.jsxs)(l.xv,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,d.jsxs)(l.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",u," "]})]})})}var h=o(470623),u=o(139176),_=o(603174),p=o(129291);function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class m extends i.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"handleSelectItem",(e=>{const{onCreate:t,onSelected:o}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&o(e);(t||e)&&this.setState({searchQuery:""})})),g(this,"handleSearchQueryInput",(e=>{this.setState({searchQuery:e})})),g(this,"renderSectionHeader",(e=>e.title?(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.xu,{paddingX:3,paddingY:1,children:(0,d.jsx)(l.xv,{size:"200",children:e.title})})}):null)),g(this,"renderRow",(({item:e,hovered:t,sectionProps:o={}})=>{const{boardSavedTo:i,isSelectMode:s,disabledRowId:r}=this.props,{searchQuery:a}=this.state,{inSectionSelection:l=!1}=o,c=i&&i.board===e.id?i&&i.state:null,h="board_section"===e.type;return(0,d.jsx)(n.Z,{disabled:e.id===r&&l,isSection:h,isSelectMode:s,isWithinSectionPicker:l,item:e,saveState:c,searchQuery:a,selected:t})}))}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:o,getSections:i,isLoaded:n,onCreate:r,pinId:a}=this.props;if(n){const{searchQuery:n}=this.state,p=i(n);return this.indexManager=new h.Z(p.map((e=>e.items))),this.indexManager.setSelectItem(this.handleSelectItem),(0,d.jsxs)(l.xu,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!o&&(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.xu,{paddingX:3,marginBottom:4,marginTop:1,children:(0,d.jsx)(u.Z,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:n})})}),(0,d.jsx)(_.Z,{disabled:!!e,grow:!o&&!n,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:p}),r&&(0,d.jsx)(l.xu,{borderStyle:p.length>1?"shadow":"none",children:(0,d.jsx)(c,{buttonLabel:t,hasHoverState:!0,name:n,onClick:()=>r(n)})}),o&&r&&a&&(0,d.jsx)(s.Z,{onBoardSelected:r,pinId:a})]})}return(0,d.jsx)(l.xu,{paddingY:5,children:(0,d.jsx)(l.$j,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})})}}function b(e){const t=(0,a.ZP)(),o=(0,p.iN)();return(0,d.jsx)(m,{...e,boardPickerStopwatch:o,i18n:t})}},357409:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(53987),n=o(925927);function s(e){const t=(0,n.TH)(),o=(0,n.UO)(),s=(0,n.k6)();return()=>{if(e&&(0,i.L6)(t)&&o.id===e.id){var n,r,a,l;const t="quick_saves"===(null===(n=e.board)||void 0===n?void 0:n.layout)||"quick_creates"===(null===(r=e.board)||void 0===r?void 0:r.layout)?"/me/":null!==(a=null===(l=e.board)||void 0===l?void 0:l.url)&&void 0!==a?a:"/";s.replace(t)}}}},842057:(e,t,o)=>{o.r(t),o.d(t,{CarouselSliders:()=>_,default:()=>p});var i=o(966338),n=o(333070),s=o(834911),r=o(898781),a=o(811403),l=o(35495),d=o(407043),c=o(883119),h=o(785893);const u={slider:{cursor:"pointer",padding:"30px 16px",position:"relative",zIndex:"105",pointerEvents:"auto"}},_=({addEllipsis:e,carouselIndex:t,carouselData:o,changeCarouselSlotIndex:i,handleCarouselSwipe:s,isShowingLastSlide:a,pin:_,pinId:p,contextLogData:g,viewParameter:m,viewType:b,componentType:x,isEditMode:f,forwardNode:v,backNode:y})=>{const P=(0,r.ZP)(),{logContextEvent:C}=(0,d.v)();if(!o)return null;const{carousel_slots:j=[],index:w=0}=o,A=void 0!==t?t:w,S=Math.max(0,A-1),z=Math.min(j.length-1,A+1),I=0===A,B=a||A===j.length-1,k=(e,t)=>{((e,t,o,i,n,s)=>{s||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,o)),void 0!==n&&n(o)})(e,p,t,i,s,f),((e,t,o,i,n,s,r,a,d,c,h)=>{if(!h||!s){const{carousel_slots:h,id:u}=s;e({event_type:108,object_id_str:o,component:d,view_type:a,view_parameter:r,event_data:{pinCarouselSlotEventData:{carouselSlotId:(null==h?void 0:h[i])&&Number(h[i].id),carouselDataId:Number(u),carouselSlotIndex:i,toCarouselSlotIndex:n}},aux_data:{...c,...(0,l.Kl)(t)||{}}})}})(C,_,p,A,t,o,m,b,x,g,f)};return(0,h.jsxs)(c.xu,{display:"flex",justifyContent:"between",position:"absolute",alignItems:"center",left:!0,right:!0,bottom:!0,top:!0,children:[(0,h.jsx)("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{k(e,S)},onKeyUp:e=>{k(e,S)},style:u.slider,children:(0,h.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{visibility:I?"hidden":"visible"}},display:"flex",height:"100%",justifyContent:"center",width:"100%",children:y||(0,h.jsx)(c.JO,{color:"inverse",icon:"arrow-back",accessibilityLabel:P._('View Previous', 'Button to advance carousel to the previous image', 'Button to advance carousel to the previous image')})})}),e&&(0,h.jsx)(n.default,{pinId:p,carouselIndex:t,carouselData:o,handleCarouselSwipe:s,variant:"default"}),(0,h.jsx)("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{k(e,z)},onKeyUp:e=>{k(e,z)},style:u.slider,children:(0,h.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{visibility:B?"hidden":"visible"}},display:"flex",height:"100%",justifyContent:"center",width:"100%",children:v||(0,h.jsx)(c.JO,{color:"inverse",icon:"arrow-forward",accessibilityLabel:P._('View Next', 'Button to advance carousel to the next image', 'Button to advance carousel to the next image')})})})]})},p=(0,i.connect)((({pins:e},{carouselData:t,pinId:o})=>{const i=e[o];return{pin:i,carouselData:t||(0,s.Z)({pin:i})}}),(e=>({changeCarouselSlotIndex:(t,o)=>e((0,a.yR)(t,o))})))(_)},360379:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(661712),n=o(883119),s=o(785893);function r(e){const{children:t,currentCarouselIndex:o,onDeleteSavedState:r,onEditSubmit:a,onToggleModal:l,pinId:d,variant:c,viewParameter:h,shouldUseLegoStyles:u}=e,_="pin"===c?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return(0,s.jsxs)(n.xu,{alignItems:"center",display:"flex",direction:"row",paddingX:"closeup"!==c||u?void 0:2,width:"closeup"===c?"100%":void 0,maxHeight:"100%",children:[t&&(0,s.jsx)(n.xu,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),(0,s.jsx)(n.xu,{paddingX:1,flex:"none",marginStart:"auto",children:(0,s.jsx)(i.default,{component:0,onDelete:r,onSubmit:a,pinId:d,onToggleModal:l,viewParameter:h,carouselSlotCurrentIndex:o,style:_,shouldUseLegoStyles:u,useLegoStyles:"pin"===c})})]})}},50403:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(121093),n=o(486840),s=o(785893);const r=[500329,503259,500410,500688],a=({placementId:e})=>{const t=(0,n.Z)();return(0,s.jsx)(i.Z,{placementId:e,eligibleIds:r,children:({complete:e,dismiss:o})=>(t(e,o),null)})}},101136:(e,t,o)=>{o.d(t,{Z:()=>_});var i=o(667294),n=o(121093),s=o(499128),r=o(407043),a=o(785893);const l=e=>{const{logContextEvent:t}=(0,r.v)();return(0,a.jsx)(n.Z,{eligibleIds:e.eligibleIds,placementId:e.placementId,eligibleTypes:[10],children:({complete:o,dismiss:i,experience:{display_data:n}})=>{const r=n.link||e.linkUrl;return(0,a.jsx)(s.ZP,{duration:n.duration,href:r,text:n.text||"",onClick:()=>{o(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&t({event_type:101,object_id_str:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?o():i()}})}})};var d=o(343341);function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const h=2e3;class u extends i.Component{constructor(...e){super(...e),c(this,"componentDidMount",(()=>{const{delay:e=h}=this.props;this.experienceToastsTimeout=window.setTimeout((()=>this.triggerEducationToasts()),e)}))}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){const{toastManagerContext:e,completionOnDismissal:t,placementId:o,experienceIds:i}=this.props;e.showOneToast((({hideToast:e})=>(0,a.jsx)(l,{experienceIds:i,completionOnDismissal:t,onHide:e,placementId:o,shouldLogClicks:!1})))}render(){return null}}function _(e){return(0,a.jsx)(u,{...e,toastManagerContext:(0,d.F9)()})}c(u,"defaultProps",{completionOnDismissal:!1})},50924:(e,t,o)=>{o.d(t,{Z:()=>x});var i=o(667294),n=o(883119),s=o(785893);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const a=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],l=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),d=e=>e*(Math.PI/180);class c extends i.PureComponent{constructor(...e){super(...e),r(this,"animationTimer",null),r(this,"canvasRemovalTimer",null),r(this,"containerRef",(0,i.createRef)()),r(this,"buildCanvas",(()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),o=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=0-(o-t)/2+"px",i.style.top=0-(o-e)/2+"px",i.style.pointerEvents="none",i.style.width=`${o}px`,i.style.height=`${o}px`,i.style.overflow="visible",i.width=o,i.height=o,i})),r(this,"explode",(()=>{const e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;const o=e.getContext("2d");t.prepend(e);const i=Array.from(Array(120)).map((()=>({x:e.width/2,y:e.height/2,radius:Math.round(l(10,30)),color:a[Math.floor(Math.random()*a.length)],degree:Number(l(0,360).toFixed(1)),speed:Math.round(l(0,25)),friction:.9,opacity:Number(l(0,.5).toFixed(1)),yVel:0,gravity:.04}))),n=(e,t,o,i)=>{window.requestAnimationFrame((()=>n(e,t,o,i))),t.clearRect(0,0,o,i),e.forEach(((e,o)=>{e.x+=e.speed*Math.cos(d(e.degree)),e.y+=e.speed*Math.sin(d(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())}))};n(i,o,e.width,e.height),this.canvasRemovalTimer=setTimeout((()=>{t.removeChild(e)}),(this.props.delay||0)+800)}))}componentDidUpdate(e){const{delay:t,startAnimation:o}=this.props,{startAnimation:i}=e;o&&i!==o&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,s.jsx)(n.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}r(c,"defaultProps",{delay:0});const h=c;var u=o(349700),_=o(898781);function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const g=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),m=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class b extends i.PureComponent{constructor(...e){super(...e),p(this,"state",{isInitialized:!1}),p(this,"containerRef",(0,i.createRef)()),p(this,"pinDestinationRef",(0,i.createRef)())}componentDidMount(){window.requestAnimationFrame((()=>{this.setState({isInitialized:!0})}))}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:o}=this.state,{onDismiss:i}=this.props;o&&i&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(i,2600))}render(){const{firstRepin:e,pin:t,pinImageRef:o,selectedBoardName:r}=this.props,{description:a="",images:l}=t,{height:d=0,width:c=0,url:_=""}=(null==l?void 0:l["236x"])||{},{isInitialized:p}=this.state,{mask:b,imageContainer:x}=((e,t,o,i)=>{var n,s,r;let a,l,d={};const c=null===(n=o.current)||void 0===n?void 0:n.getBoundingClientRect(),h=null===(s=t.current)||void 0===s?void 0:s.getBoundingClientRect(),u=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect();if(h&&c&&u){d={left:c.left-h.left,top:c.top-h.top};const e={x:u.left-c.left,y:u.top-c.top},t={x:(u.width-c.width)/2,y:(u.height-c.height)/2};a=`translate(${e.x}px, ${e.y}px)`,l=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:d.left,top:d.top,width:e?null==u?void 0:u.width:null==c?void 0:c.width,height:e?null==u?void 0:u.height:null==c?void 0:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?a:"none",transform:e?a:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:null==c?void 0:c.width,height:null==c?void 0:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?l:"none",transform:e?l:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(p,this.containerRef,o,this.pinDestinationRef);return(0,s.jsx)(i.Fragment,{children:(0,s.jsxs)(n.xu,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef,children:[(0,s.jsx)(n.xu,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:b},children:(0,s.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:x},children:(0,s.jsx)(n.Ee,{alt:null!=a?a:"",src:_||"",naturalHeight:d||1,naturalWidth:c||1})})}),(0,s.jsx)(n.xu,{color:"default",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(f=p,{pointerEvents:"none",opacity:f?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})},children:(0,s.jsxs)(n.xu,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:g(p)},children:[(0,s.jsx)(h,{delay:1250,startAnimation:p,children:(0,s.jsx)(n.zd,{rounding:2,width:270,height:180,children:(0,s.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",height:"100%",width:"100%",children:[(0,s.jsx)(n.xu,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),(0,s.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:80,children:[(0,s.jsx)(n.xu,{color:"secondary",flex:"grow",marginBottom:1}),(0,s.jsx)(n.xu,{color:"secondary",flex:"grow"})]})]})})}),(0,s.jsx)(n.xu,{paddingX:2,dangerouslySetInlineStyle:{__style:m(p)},children:(0,s.jsx)(n.X6,{align:"center",children:e?(0,u.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:null!=r?r:""}):(0,u.nk)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:null!=r?r:""})})})]})})]})});var f}}function x(e){const t=(0,_.ZP)();return(0,s.jsx)(b,{...e,i18n:t})}p(b,"defaultProps",{firstRepin:!1})},32383:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(275903),n=o(121151),s=o(898781),r=o(780280),a=o(883119),l=o(785893);function d(e){const t=(0,s.ZP)(),{onSectionCreate:o,onClose:d,selectedBoard:c,useLayer:h=!0}=e,{isRTL:u}=(0,r.B)(),_=h?n.ZP:a.u_,p=(0,l.jsx)(a.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(a.xu,{maxWidth:400,children:(0,l.jsx)(a.X6,{align:"center",size:"500",children:t._('Add section', 'Modal header for adding a section', 'Modal header for adding a section')})}),(0,l.jsx)(a.xu,{left:u,paddingX:6,paddingY:5,position:"absolute",right:!u,top:!0,children:(0,l.jsx)(a.hU,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:t._('Close', 'CreateSection.Modal.Icon', 'Icon to close section create modal'),onClick:d})})]})});return(0,l.jsx)(_,{accessibilityModalLabel:t._('Add a section to the board', 'modal to add a section to a board', 'modal to add a section to a board'),heading:p,onDismiss:d,size:"sm",children:(0,l.jsx)(a.xu,{display:"flex",color:"default",rounding:2,children:(0,l.jsx)(i.Z,{board:c,completeCreateSectionAction:o,onClearModal:d,positionRelative:!0,showTitle:!1})})})}},396704:(e,t,o)=>{o.d(t,{Z:()=>h,o:()=>c});var i=o(898781),n=o(19121),s=o(444445),r=o(407043),a=o(946984),l=o(883119),d=o(785893);const c="AddPinRep";function h({ctaText:e,handleClick:t,height:o,iconSize:c,textSize:h}){const{logContextEvent:u}=(0,r.v)(),_=(0,i.ZP)(),p=(0,n.Z)(),g=(0,a.Z)({shouldStopEventPropagation:!1})((()=>{t&&t(),p.isPartner&&u({event_type:101,component:0,element:10643})}));return(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.iP,{role:"link",onTap:g,href:"/pin-builder/",children:(0,d.jsxs)(l.Zb,{children:[(0,d.jsx)(l.xu,{alignItems:"center",color:"secondary",display:"flex",fit:!0,height:o||s.yF,justifyContent:"center",rounding:2,width:o||void 0,children:(0,d.jsx)(l.xu,{color:"default",height:c||40,rounding:"circle",width:c||40,children:(0,d.jsx)(l.JO,{accessibilityLabel:"",color:"error",icon:"add-circle",inline:!0,size:c||40})})}),(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.xv,{color:"subtle",size:h||"300",weight:"bold",children:e||_._('Create Pin', 'label to open create pin modal', 'label to open create pin modal')})})]})})})}},914166:(e,t,o)=>{o.d(t,{ZP:()=>Le,Tr:()=>Ze,aU:()=>Me});var i=o(667294),n=o(966338),s=o(740887),r=o(150361),a=o.n(r),l=o(898781),d=o(883119),c=o(785893);function h({commentsDisabled:e,onCommentChange:t,onPhotoChange:o,photosDisabled:i,isManagedView:n,isNoTitle:s}){const r=(0,l.ZP)(),a=n?6:s?0:3;return(0,c.jsxs)(d.xu,{children:[!s&&(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:n?0:4,paddingY:a,children:[!n&&!s&&(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",children:r._('Comment Permissions', 'Label for comments setting on a pin in pin edit form', 'Label for comments setting on a pin in pin edit form')})}),(0,c.jsxs)(d.xu,{column:12,mdColumn:n?12:8,children:[(0,c.jsxs)(d.xu,{paddingY:1,display:"flex",alignItems:"center","data-test-id":"allow-comments-switch",children:[(0,c.jsx)(d.rs,{onChange:t,id:"CommentSwitch",switched:!e}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"CommentSwitch",children:(0,c.jsx)(d.xv,{size:"200",children:r._('Allow people to comment', 'Label for toggling comments on a pin in pin edit form', 'Label for toggling comments on a pin in pin edit form')})})})]}),o&&(0,c.jsxs)(d.xu,{paddingY:1,alignItems:"center",display:"flex",children:[(0,c.jsx)(d.rs,{onChange:o,id:"PhotoSwitch",switched:!i}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"PhotoSwitch",children:(0,c.jsx)(d.xv,{size:"200",children:r._('Allow people to upload photos', 'Label for toggling photos on a pin in pin edit form', 'Label for toggling photos on a pin in pin edit form')})})})]})]})]})]})}var u=o(27255),_=o(310204),p=o(6637),g=o(414327);var m=o(4392),b=o(618446),x=o.n(b),f=o(121151),v=o(756777),y=o(941646),P=o(499128),C=o(343341);function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class w extends i.PureComponent{constructor(...e){super(...e),j(this,"state",{deleting:!1}),j(this,"unmounted",!1),j(this,"handleConfirm",(()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then((()=>this.handleDeleteDidComplete())).catch((e=>this.handleDeleteDidComplete(e)))})),j(this,"handleDeleteDidComplete",(e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast((({hideToast:e})=>(0,c.jsx)(P.ZP,{onHide:e,text:this.props.i18n._('Pin deleted!', 'User deleted their pin', 'User deleted their pin')})))}))}componentWillUnmount(){this.unmounted=!0}render(){const{i18n:e,onDismiss:t,showStoryPinCreatorDeleteMessage:o}=this.props,{deleting:i}=this.state;return(0,c.jsx)(f.ZP,{heading:e._('Are you sure?', 'Confirm the user wants to delete the pin', 'Confirm the user wants to delete the pin'),accessibilityModalLabel:e._('Are you sure you want to delete this pin?', 'Accessible label to confirm the user wants to delete the pin', 'Accessible label to confirm the user wants to delete the pin'),size:"sm",onDismiss:t,footer:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"center",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,onClick:t,text:e._('Cancel', ' - ', ' -- ')})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(y.Z,{id:"confirm-delete-pin",children:(0,c.jsx)(v.Z,{onClick:this.handleConfirm,text:e._('Delete', 'PinEditModal.DeletePinConfirmation.DeleteButton', 'Delete button to delete a Pin'),submitting:i})})})]}),children:(0,c.jsx)(d.xu,{padding:4,display:"flex",justifyContent:"center",children:(0,c.jsx)(d.xv,{children:o?e._('If you delete this Pin, it\'ll be gone for good and those who\'ve saved it won\'t be able to view it.', 'PinEditModal.DeletePinConfirmation', 'Confirmation to delete a Pin that lets the creator know it will be unavailable to other Pinners who have saved it'):e._('Once you delete a Pin, you can\'t undo it!', ' - ', ' -- ')})})})}}function A(e){const t=(0,l.ZP)();return(0,c.jsx)(w,{...e,i18n:t,toastManagerContext:(0,C.F9)()})}function S({canEdit:e,onAltTextChange:t,altText:o}){const n=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"AltTextField",children:(0,c.jsx)(d.xv,{size:"200",children:n._('Alt text', 'EditPinModal.EditAltText', 'Label for editing alt text of pin')})})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:e?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.nv,{id:"AltTextField",onChange:({value:e})=>t({value:e.slice(0,500)}),size:"lg",value:o||""})}),(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.__,{htmlFor:"AltTextField",children:(0,c.jsx)(d.xu,{marginTop:1,children:(0,c.jsx)(d.xv,{size:"200",color:"subtle",children:n._('This helps people using screen readers understand what your Pin is about.', 'EditPinModal.EditAltText', 'Label for editing alt text of pin')})})})})]}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:o})})})]})]})}var z=o(879089),I=o(543398);function B({board:e={},canEdit:t,isOriginallyQuickCreatesBoard:o,onBoardChange:i,onBoardCreate:n,viewerId:s}){const r=(0,l.ZP)(),{showEnabledSaveBehavior:a}=(0,I.ZP)(s),h="quick_saves"===e.layout&&a,u="quick_creates"===e.layout;return(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"BoardPicker",children:(0,c.jsx)(d.xv,{size:"200",children:o?r._('Organize to a board (optional)', 'editPinModal.editBoard.optionalBoardLabel', 'Label for board dropdown to select optional board'):r._('Board', ' - ', ' -- ')})})}),t?(0,c.jsx)(d.xu,{column:12,mdColumn:8,"data-test-id":"edit-board",children:(0,c.jsx)(z.Z,{board:e,isBoardlessPinsBoard:h,isQuickCreatesBoard:u,onBoardChosen:i,onBoardCreate:n})}):e.name&&(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:e.name})})]})}var k=o(678691),T=o(979607),E=o(407043);function M(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class D extends i.Component{constructor(...e){super(...e),M(this,"state",{focused:!1}),M(this,"suggestionAnchorRef",(0,i.createRef)()),M(this,"handleBlur",(e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)})),M(this,"handleFocus",(e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)})),M(this,"handleChange",(({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})}))}render(){const{canAddUserMentionTags:e,canEdit:t,description:o,errorMessage:n,initialMentions:s,label:r,placeholder:a,onDescriptionChange:l}=this.props,h={__style:{...this.state.focused?{boxShadow:"0 0 0 3px #92c2fb"}:{}}};return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"DescriptionField",children:(0,c.jsx)(d.xv,{size:"200",children:r})})}),t?(0,c.jsxs)(d.xu,{column:12,mdColumn:8,children:[(0,c.jsx)(d.xu,{children:e?(0,c.jsx)(d.xu,{borderStyle:"lg",dangerouslySetInlineStyle:h,id:"DescriptionField",minHeight:48,paddingX:2,paddingY:4,ref:this.suggestionAnchorRef,role:"textbox",rounding:4,children:(0,c.jsx)(k.Z,{initialMentions:s,initialText:o,onAddMention:()=>{this.props.logContextEvent({event_type:8905,element:116,aux_data:{tag_type:1}})},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{this.props.logContextEvent({event_type:8908,element:116,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:()=>{this.props.logContextEvent({event_type:8907,element:116,aux_data:{tag_type:1}})},maxSuggestions:4,placeholder:a})}):(0,c.jsx)(d.Kx,{id:"DescriptionField",placeholder:a,value:o,onChange:({value:e})=>{l({value:e,userMentionTags:[]})},hasError:(n||"").length>0})}),!!n&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(T.Z,{errorMessage:n,htmlFor:"pin-edit-description"})})]}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:o})})]})]})}}const Z=function(e){const{logContextEvent:t}=(0,E.v)();return(0,c.jsx)(D,{...e,logContextEvent:t})};var R=o(333070),L=o(842057),O=o(822119);function F({isCarousel:e,onMouseEnter:t,onMouseLeave:o,shouldShowCarouselSliders:i,onCarouselSlide:n,currentIndex:s,carouselData:r,pinId:a,description:l,image:h={}}){return(0,c.jsxs)(d.xu,{paddingX:4,paddingY:3,children:[e&&(()=>{const e=r&&r.carousel_slots&&r.carousel_slots.length||1;return e>=2&&(0,c.jsx)(d.xu,{padding:2,children:(0,c.jsx)(d.__,{htmlFor:"CardsIndex",children:(0,c.jsxs)(d.xv,{size:"200",children:[s+1,"/",e]})})})})(),(0,c.jsx)(d.zd,{width:236,children:(0,c.jsxs)(d.xu,{onMouseEnter:t,onMouseLeave:o,children:[(0,c.jsxs)(d.zd,{rounding:2,wash:!0,children:[e&&i&&(0,c.jsx)(d.xu,{display:"inlineBlock",height:"100%",position:"absolute",width:"100%",zIndex:new d.Ry(10),dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},children:(0,c.jsx)(L.default,{handleCarouselSwipe:n,carouselIndex:s,carouselData:r,pinId:a,isEditMode:!0})}),e?(0,c.jsx)(O.Z,{carouselIndex:s,isCloseup:!1,carouselData:r,pinId:a,isEditMode:!0}):(0,c.jsx)(d.Ee,{alt:l,color:"#efefef",naturalHeight:h.height,src:h.url,naturalWidth:h.width})]}),e&&(0,c.jsx)(R.default,{carouselIndex:s,carouselData:r,pinId:a,handleCarouselSwipe:n,isEditMode:!0,variant:"legacy"})]})})]})}function N({apiErrorMessage:e,shouldShowGenericUpdateError:t,onClickDeleteButton:o,disableDelete:i,onHide:n,shouldDisableSave:s,triggerBoardAndSectionCreate:r}){const a=(0,l.ZP)();return(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(y.Z,{id:"delete-pin-button",children:(0,c.jsx)(d.zx,{fullWidth:!0,text:a._('Delete', 'EditPinModal.EditPinFooter.Delete', 'delete pin'),onClick:o,disabled:i})}),t&&(0,c.jsx)(d.xu,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center",children:(0,c.jsx)(T.Z,{errorMessage:e||a._('Sorry! There was an error editing your Pin.', 'EditPinModal.EditPinFooter.ErrorMessageToast', 'Toast for pin edit error'),htmlFor:"pin-edit-generic-error"})}),(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2,children:[(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.zx,{fullWidth:!0,text:a._('Cancel', 'EditPinModal.EditPinFooter.Cancel', 'cancel changes'),onClick:n})}),(0,c.jsx)(d.xu,{paddingX:2,"data-test-id":"edit-pin-save",children:(0,c.jsx)(d.zx,{fullWidth:!0,text:a._('Save', 'EditPinModal.EditPinFooter.Save', 'save changes'),color:"red",onClick:r,disabled:s})})]})]})}function U({pinNoteText:e,isCollaborative:t,onPinNoteChange:o}){const n=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"PinNoteField",children:(0,c.jsx)(d.xv,{size:"200",children:t?n._('Note to group', 'editPinModal.editPinNote.groupTitle', 'Label for editing private note on group Pin'):n._('Note to self', 'editPinModal.editPinNote.title', 'Label for editing private note on Pin')})})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,"data-test-id":"note-to-self-input",children:(0,c.jsx)(d.Kx,{errorMessage:e.length>=500?n._('Character limit reached', 'editPinModal.editPinNote.warningText', 'Text to inform user they have reached the length limit on Pin note'):void 0,id:"PinNoteField",onChange:o,placeholder:n._('Add a private note to remember your ideas about this Pin', 'editPinModal.editPinNote.placeholderText', 'Placeholder for editing private note'),value:e})})]})]})}var H=o(316298);function W({board:e,canEdit:t,currentSection:o,onSectionChange:i,onSectionCreate:n,sectionId:s,sectionName:r}){const a=(0,l.ZP)(),h=null!=e&&e.id?H.Z:H.x;return"quick_creates"===(null==e?void 0:e.layout)?null:(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:3,children:(0,c.jsx)(d.__,{htmlFor:"SectionPicker",children:(0,c.jsx)(d.xv,{size:"200",children:a._('Section', 'label for editing a Pin\'s board section', 'label for editing a Pin\'s board section')})})}),t&&e?(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsx)(h,{board:e,onSectionChange:i,selectedSectionId:s,selectedSectionName:r,onSectionCreate:n})}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:o&&!(e||{}).is_collaborative?o.title:a._('No section', 'default dropdown option for selecting a board section on pin edit', 'default dropdown option for selecting a board section on pin edit')})})]})}var $=o(969759);var G=o(952058);var q=o(791250),V=o(803405),Y=o(201238),X=o(70715);function J({keyValueBlocks:e,listBlocks:t,onUpdateKeyValueBlock:o,onUpdateListBlocks:n,templateType:s}){const r=(0,l.ZP)();return(0,c.jsxs)(d.xu,{children:[1===s&&(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:r._('Cook time', 'editModal.editStoryPinModal.details.cookTime', 'Label for cook time detail')}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(X.Z,{onUpdate:e=>o(0,e),value:e[0]||null})})]},"cooktime"),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:r._('Servings', 'editModal.editStoryPinModal.details.servings', 'Label for serving size detail')}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(Y.Z,{showLabel:!1,onUpdate:e=>o(1,e),value:e[1]||null})})]},"servingSize")]}),2===s&&(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:r._('Difficulty', 'editModal.editStoryPinModal.details.difficulty', 'Label for difficulty level detail')}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(q.Z,{showLabel:!1,onUpdate:e=>o(2,e),value:e[2]||null})})]},"difficulty"),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:(()=>{switch(s){case 1:return r._('Ingredients', 'editModal.editStoryPinModal.listHeading', 'Heading for an ingredients list');case 2:return r._('Supplies', 'editModal.editStoryPinModal.listHeading', 'Heading for a supplies list');default:return r._('What they\'ll need', 'editModal.editStoryPinModal.listHeading', 'Heading for a generic list')}})()}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(V.Z,{listBlocks:t,onUpdate:n})})]})]})}var K=o(349700),Q=o(217468),ee=o(782534);const te=(0,n.connect)((()=>({})),(e=>({completeResourceFetch:t=>e((0,g.Sr)("PinResource",{field_set_key:"detailed",id:t.resource_response.data.id},t)),invalidatePin:t=>e((0,g.jB)("PinResource",{field_set_key:"detailed",id:t}))})))((function({apiErrorMessage:e,board:t,completeResourceFetch:o,commentsDisabled:n,description:s,disableDelete:r,invalidatePin:a,isLoadingPin:u,isProcessing:_,onChangeBoard:g,onChangeComment:m,onChangeSection:b,onClickBoardCreate:x,onClickDeleteButton:v,onClickEditPages:y,onClickSectionCreate:P,onHide:C,pinResource:j,sectionId:w,sectionName:A,title:S,triggerBoardAndSectionCreate:I}){var B,k,E,M,D,Z,R,L;const O=(0,l.ZP)(),F=null!==(B=j.data)&&void 0!==B?B:{},N=F.story_pin_data,U=null!==(k=F.images&&F.images["474x"])&&void 0!==k?k:{},[W,q]=(0,i.useState)(!1),[V,Y]=(0,i.useState)(null),[X,te]=(0,i.useState)(!1),[oe,ie]=(0,i.useState)({}),[ne,se]=(0,i.useState)([]);(0,i.useEffect)((()=>{var e;const t=(null==N||null===(e=N.metadata)||void 0===e?void 0:e.basics)||null;if(t){const e=(0,G._i)(t);ie(e.keyValueBlocks||{}),se(e.listBlocks||[])}}),[N]),(0,i.useEffect)((()=>{e&&Y(e)}),[e]);const{anyEnabled:re}=(0,Q.a)("web_story_pin_edit_deprecation"),ae=F.created_at?new Date(F.created_at):null,le=ae&&(0,$.Z)(ae,14),de=!re&&!!le&&new Date<le,ce=ne.length>0||Object.keys(oe).length>0,he=(0,K.nk)(O._('Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Idea Pin is published. Edit the board and engagement settings any time.', 'editModal.editStoryPinModal.editTimeInformation', 'Let the user know how the edit settings are limited'),{numDays:14});return(0,c.jsx)(f.ZP,{accessibilityModalLabel:O._('Edit your previously saved pin', 'editModal.editStoryPinModal.accessibilityLabel', 'Accessible label for edit previously saved story pin modal'),footer:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,c.jsx)(d.xu,{"data-test-id":"delete-pin-button",children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",disabled:r,onClick:v,size:"lg",text:O._('Delete', 'editModal.editStoryPinModal.deleteButton', 'Delete button for previously saved story pin')})}),!!V&&(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"center",children:(0,c.jsx)(T.Z,{errorMessage:V,htmlFor:"pin-edit-generic-error"})}),(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,onClick:C,size:"lg",text:O._('Cancel', 'editModal.editStoryPinModal.cancelButton', 'Cancel button to not save edits to previously saved story pin')})}),(0,c.jsx)(d.xu,{"data-test-id":"edit-pin-save",paddingX:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"red",onClick:()=>{if(W&&N){te(!0);const e=(0,G.Fe)({keyValueBlocks:oe,listBlocks:ne}),t=function(e){var t,o,i,n,s,r,a;return{metadata:{basics:null!==(t=e.metadata)&&void 0!==t&&t.basics?(0,G.CH)(e.metadata.basics):void 0,diy_data:null===(o=e.metadata)||void 0===o?void 0:o.diy_data,pin_image_signature:null===(i=e.metadata)||void 0===i?void 0:i.pin_image_signature,pin_title:null===(n=e.metadata)||void 0===n?void 0:n.pin_title,recipe_data:null===(s=e.metadata)||void 0===s?void 0:s.recipe_data,template_type:null===(r=e.metadata)||void 0===r?void 0:r.template_type},pages:(a=e.pages,(null!=a?a:[]).map((e=>{var t,o;const i=(null!==(t=e.blocks)&&void 0!==t?t:[]).map((e=>{switch(e.type){case"story_pin_paragraph_block":return{block_style:e.block_style,style:e.style,text:e.text,type:0};case"story_pin_heading_block":return{block_style:e.block_style,level:e.level,style:e.style,text:e.text,type:1};case"story_pin_image_block":return{block_style:e.block_style,image_signature:e.image_signature,tracking_id:e.tracking_id,type:2};case"story_pin_video_block":return{block_style:e.block_style,tracking_id:e.tracking_id,type:3,video_signature:e.video_signature};default:return null}})).filter(Boolean);return i.length>0?{blocks:i,layout:e.layout,style:null!==(o=e.style)&&void 0!==o&&o.background_color?{background_color:e.style.background_color}:void 0}:null})).filter(Boolean))}}(N),i={...t,metadata:{...t.metadata,basics:e}},n={pin_id:F.id,story_pin:JSON.stringify(i)};p.ZP.create("StoryPinEditResource",n).callUpdate().then((e=>{a(F.id),o(e),I()})).catch((e=>{Y(e.message),te(!1)}))}else I()},size:"lg",text:O._('Done', 'editModal.editStoryPinModal.doneButton', 'Done button to save edits to previously saved story pin')})})]})]}),heading:O._('Edit Pin', 'editModal.editStoryPinModal.heading', 'Edit a previously saved story pin'),onDismiss:C,size:"md",children:u||!j.isLoaded||X||_?(0,c.jsx)(d.xu,{paddingX:12,paddingY:9,children:(0,c.jsx)(d.$j,{accessibilityLabel:O._('Loading edit information', 'editPinModal.editStoryPinModal.spinner', 'Accessible label for the edit pin loading icon'),show:!0})}):(0,c.jsx)(d.xu,{overflow:"hidden",children:(0,c.jsx)(d.xu,{marginEnd:-4,marginStart:-4,children:(0,c.jsxs)(d.xu,{display:"flex",minHeight:300,overflow:"hidden",paddingX:8,children:[(0,c.jsxs)(d.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",paddingX:4,children:[(0,c.jsxs)(d.zd,{wash:!0,rounding:4,width:120,children:[(0,c.jsx)(d.Ee,{alt:s,color:"#efefef",naturalHeight:null!==(E=U.height)&&void 0!==E?E:1,naturalWidth:null!==(M=U.width)&&void 0!==M?M:1,src:null!==(D=U.url)&&void 0!==D?D:""}),(0,c.jsx)(d.xu,{position:"absolute",left:!0,top:!0,padding:2,children:(0,c.jsxs)(d.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",opacity:.8,padding:2,rounding:"pill",children:[(0,c.jsx)(d.JO,{accessibilityLabel:O._('Idea Pin icon', 'editModal.editStoryPinModal.storyPinIndicator', 'Idea Pin icon indicator'),color:"default",icon:"idea-pin",size:12}),(0,c.jsx)(d.xu,{marginStart:1,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:null===(Z=F.story_pin_data)||void 0===Z?void 0:Z.page_count})})]})})]}),de?(0,c.jsx)(d.xu,{"data-test-id":"edit-pages-button",paddingY:2,children:(0,c.jsx)(d.zx,{onClick:y,text:O._('Edit pages', 'editModal.editStoryPinModal.editPagesButton', 'Edit pages label for story pin creation entry point')})}):null]}),(0,c.jsx)(d.xu,{direction:"column",display:"flex",flex:"grow",paddingX:4,children:(0,c.jsx)(d.xu,{marginBottom:-2,marginTop:-2,children:(0,c.jsx)(d.xu,{maxHeight:500,overflow:"auto",paddingX:1,children:(0,c.jsxs)(d.xu,{maxWidth:504,children:[le&&(0,c.jsx)(d.xu,{paddingY:2,children:de?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xv,{size:"200",children:(0,K.nk)(O._('Edit until {{ editDate }}', 'editModal.editStoryPinModal.lastEditableDate', 'Let user know the last date this Pin can be edited on'),{editDate:(0,c.jsx)(ee.Z,{dateFormatType:ee.k.NUMERIC,useUTC:!1,value:le},`noEditsTwoWeeksAfter-${null!==(R=F.created_at)&&void 0!==R?R:""}`)})}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.xv,{color:"subtle",size:"200",children:he})})]}):(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xv,{size:"200",children:O._('Editing', 'editModal.editStoryPinModal.editLabel', 'Label header for informing users story pin is only editable for board selection')}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",color:"subtle",children:O._('Only board selection and engagement settings can be changed!', 'editModal.editStoryPinModal.editLabel', 'Label header for informing users story pin is only editable for board selection')})})]})}),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:O._('Title', 'editModal.editStoryPinModal.titleLabel', 'Label for form input where users will input the title of their pin')}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsxs)(d.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"between",padding:4,rounding:4,children:[(0,c.jsx)(d.xv,{color:"subtle",lineClamp:1,children:S||""}),(0,c.jsx)(d.JO,{accessibilityLabel:O._('Lock', 'editModal.editStoryPinModal.lockIcon.accessibilityLabel', 'Label for the lock icon to show that editing a story pin title is locked'),color:"default",icon:"lock"})]})})]}),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:O._('Board', 'editModal.editStoryPinModal.boardLabel', 'Label for dropdown where users will choose their board')}),(0,c.jsx)(d.xu,{paddingY:2,children:t?(0,c.jsx)(z.Z,{board:t,isStoryPin:!0,onBoardChosen:g,onBoardCreate:x}):null})]}),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:O._('Section', 'editModal.editStoryPinModal.sectionLabel', 'Label for dropdown where users will choose their section')}),(0,c.jsx)(d.xu,{paddingY:2,children:(null==t?void 0:t.id)&&(0,c.jsx)(H.Z,{isStoryPin:!0,board:t,onSectionChange:b,onSectionCreate:P,selectedSectionId:w,selectedSectionName:A})})]}),ce&&de&&(0,c.jsx)(J,{keyValueBlocks:oe,listBlocks:ne,onUpdateKeyValueBlock:(e,t)=>{ie({...oe,[e]:t}),q(!0)},onUpdateListBlocks:e=>{se(e),q(!0)},templateType:null==N||null===(L=N.metadata)||void 0===L?void 0:L.template_type}),F.can_delete_did_it_and_comments&&(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"200",children:O._('Comments and photos permissions', 'editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel', 'Label for dropdown where users can toggle off permissions for comments and photos')}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(h,{isNoTitle:!0,commentsDisabled:n,onCommentChange:m})})]})]})})})})]})})})})}));function oe({canEdit:e,onTitleChange:t,title:o,errorMessage:n}){const s=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"TitleField",children:(0,c.jsx)(d.xv,{size:"200",children:s._('Title', 'Label for editing title of pin', 'Label for editing title of pin')})})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:e?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{"data-test-id":"pin-title-input",children:(0,c.jsx)(d.nv,{hasError:(n||"").length>0,id:"TitleField",onChange:t,size:"lg",value:o})}),!!n&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(T.Z,{errorMessage:n,htmlFor:"pin-edit-title"})})]}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:o})})})]})]})}function ie({onChangeWebsite:e,link:t,errorMessage:o}){const n=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"WebsiteField",children:(0,c.jsx)(d.xv,{size:"200",children:n._('Website', ' - ', ' -- ')})})}),(0,c.jsxs)(d.xu,{column:12,mdColumn:8,children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.nv,{hasError:(o||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})}),!!o&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(T.Z,{errorMessage:o,htmlFor:"pin-edit-website"})})]})]})]})}var ne,se=o(417498),re=o(674578),ae=o(947599),le=o(167912);const de=void 0!==ne?ne:ne=o(337148);function ce({onShoppingRecChange:e,shoppingRecDisabled:t,storyPinData:o}){var n,s;const r=(0,l.ZP)(),a=(0,le.useLazyLoadQuery)(de,{});if(!a)return null;const{has_product_pins:h}=o||{},u=null===(n=a.v3GetCurrentUserHandlerQuery)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.ipStelaRecDisabled;return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",children:r._('Shopping recommendations', 'Heading for shopping recommendations permissions', 'shopping.recommendations')})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsxs)(d.xu,{paddingY:1,display:"flex",alignItems:"start",children:[(0,c.jsx)(d.rs,{onChange:e,id:"PhotoSwitch",switched:!t,disabled:u||h}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"stelaSwitch",children:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(d.xv,{size:"200",color:u?"subtle":"default",children:r._('Show similar products ', 'Label to toggle similar products on ideal pin', 'ideaPin.stela.toggle')}),u?(0,c.jsxs)(d.xv,{color:"subtle",size:"200",children:[r._('You\u2019ve disabled shopping recommendations for your profile ', 'Text indicating shopping recommendations are currently disabled', 'ideaPin.disable'),(0,c.jsx)(d.xv,{inline:!0,size:"200",weight:"bold",color:"subtle",children:(0,c.jsx)(d.rU,{inline:!0,href:"/settings/permissions",underline:"hover",children:r._('Edit profile settings', 'Link to the settings page to enable shopping recommendations on idea pins', 'ideaPin.link')})})]}):(0,c.jsxs)(d.xu,{display:"flex",direction:"column",marginTop:1,children:[(0,c.jsx)(d.xu,{marginBottom:1,children:(0,c.jsx)(d.xv,{size:"200",children:r._('People can shop products similar to what\u2019s shown in this Idea Pin using visual search', 'Text indicating shopping recommendations are currently enabled', 'ideaPin.enable')})}),(0,c.jsx)(d.xv,{size:"200",children:r._('Shopping recommendations aren\u2019t available for Idea Pins with product or paid partnership tags', 'Explanation about how stela on idea pins with tagged products arent available', 'ideaPin.tagged.unavailable')})]})]})})})]})})]})})}function he({shoppingRecDisabled:e,onShoppingRecChange:t,isNoTitle:o}){const n=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[!o&&(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:o?0:3,children:[!o&&(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.xv,{size:"200",children:n._('Recommendations', 'EditPinModal.recommendations', 'Title of a section in the edit pin modal to manage recommendations on a specific pin.')})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsxs)(d.xu,{paddingY:1,display:"flex",alignItems:"center",children:[(0,c.jsx)(d.rs,{onChange:t,id:"ShoppingRecSwitch",switched:!e}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"ShoppingRecSwitch",children:(0,c.jsx)(d.xv,{size:"200",children:n._('Show shopping recommendations', 'EditPinModal.recommendations.showShoppingRecommendations.label', 'Label for toggling showing shopping recommendations on a specific pin.')})})})]})})]})]})}var ue=o(717615),_e=o(357409),pe=o(784590),ge=o(19121),me=o(935409),be=o(700314),xe=o(224496),fe=o(281615),ve=o(293880),ye=o(865615),Pe=o(482546),Ce=o(232843),je=o(957885),we=o(231947),Ae=o(780280),Se=o(708206),ze=o(619983),Ie=o(134906),Be=o(843747),ke=o(925927);function Te(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ee(e){return Boolean(e&&e.trim().length)}function Me(e,t){const o=Ee(e),i=Ee(t);return(o||i)&&e!==t}class De extends i.Component{constructor(...e){var t,o,i,n,s,r,l,d,c,h,_,g,m,b,f,v,y,P,C;super(...e),Te(this,"state",{altText:(null===(t=this.props.pinResource.data)||void 0===t?void 0:t.alt_text)||"",board:(null===(o=this.props.pinResource.data)||void 0===o?void 0:o.board)||null,commentsDisabled:(null===(i=this.props.pinResource.data)||void 0===i?void 0:i.comments_disabled)||(null===(n=this.props.pinResource.data)||void 0===n?void 0:n.did_it_disabled)||!1,description:(null===(s=this.props.pinResource.data)||void 0===s||null===(r=s.description)||void 0===r?void 0:r.trim())||"",apiErrorMessage:null,link:(null===(l=this.props.pinResource.data)||void 0===l?void 0:l.link)||"",pinNoteText:(null===(d=this.props.pinResource.data)||void 0===d||null===(c=d.pin_note)||void 0===c?void 0:c.text)||"",sectionId:(null===(h=this.props.pinResource.data)||void 0===h||null===(_=h.section)||void 0===_?void 0:_.id)||null,sectionName:(null===(g=this.props.pinResource.data)||void 0===g||null===(m=g.section)||void 0===m?void 0:m.title)||null,showDeleteConfirmation:!1,carousel_data:(null===(b=this.props.pinResource.data)||void 0===b?void 0:b.carousel_data)||null,title:(null===(f=this.props.pinResource.data)||void 0===f?void 0:f.title)||"",isLoadingPin:!Boolean(this.props.pinResource.isLoaded),isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:(null===(v=this.props.pinResource.data)||void 0===v||null===(y=v.carousel_data)||void 0===y?void 0:y.index)||0,shoppingRecDisabled:null===(P=this.props.pinResource.data)||void 0===P?void 0:P.shopping_rec_disabled,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:(null===(C=this.props.pinResource.data)||void 0===C?void 0:C.user_mention_tags)||[]}),Te(this,"onClickDeleteButton",(()=>this.setState({showDeleteConfirmation:!0}))),Te(this,"onHideConfirmation",(()=>this.setState({showDeleteConfirmation:!1}))),Te(this,"updateCarouselSlotIndex",(()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})})),Te(this,"handleBoardChange",(e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})})),Te(this,"createBoard",(e=>{const{createBoard:t,viewer:o,orbacActingAs:i}=this.props,{board:n}=this.state,s=(0,we.lJ)(o,i);!n.id&&n.name&&e&&t(n.name,e,s).then((e=>{if(this._isMounted){const{sectionId:t,sectionName:o}=this.state;!t&&o?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}}))})),Te(this,"handleBoardCreateClick",(e=>{if(!e)return;const t={name:e,privacy:u.Z.BoardPrivacy.PUBLIC,access:"write"};this.setState({board:t,sectionId:null,sectionName:null})})),Te(this,"createSection",(()=>{const{board:e,sectionName:t}=this.state,{viewer:o,orbacActingAs:i}=this.props,n=(0,we.lJ)(o,i);if(!t)return;if(!e.id)return void this.createBoard();const s={boardId:e.id,name:t},{createSection:r}=this.props;r(s,n).then((e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())})).catch((()=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:null})}))})),Te(this,"handleSectionCreateClick",(e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})})),Te(this,"handleSectionChange",(e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1}))),Te(this,"handleDeletePin",(()=>{const{advertiser_id:e,changeBoardPinCount:t,changeUserPinCount:o,dispatch:i,onDelete:n,onHide:s,orbacActingAs:r,pinId:a,pinResource:{data:l},removeBoardlessPin:d,viewer:c}=this.props,h=(0,we.lJ)(c,r),u={...e?{advertiser_id:e}:{},...h?{orbac_subject_id:h}:Object.freeze({}),id:a};return p.ZP.create("PinResource",u).callDelete().then((()=>{if(this._isMounted){if(!l)return;const{board:{id:e}={},pinner:{id:r}={},section:d}=l,c=null==d?void 0:d.id;t({boardId:e,sectionId:c,increment:-1}),o({userId:r,increment:-1}),i((0,ve.xQ)(e)),i((0,re.Z)({feedId:c||e,feedType:c?fe.DV.SECTION_PINS:fe.DV.BOARD_PINS,itemIds:[a],itemType:"pin"})),i((0,re.Z)({feedId:r,feedType:fe.DV.CREATED_TAB_STORY_PINS_FEED,itemIds:[a],itemType:"pin"})),i((0,re.Z)({feedId:r,feedType:fe.DV.CREATED_TAB_ACTIVITY_PINS_FEED,itemIds:[a],itemType:"pin"})),c&&i((0,se.Z)(c)),s(),n&&n()}c.id&&d(c.id,a)}))})),Te(this,"sanitizeCarouselData",(e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach((e=>{const o={};o.description=e.details||"",o.title=e.title||"",o.link=e.link||"",t.carousel_slots.push(o)})),t}}return null})),Te(this,"triggerBoardAndSectionCreate",(e=>()=>{const{board:t,sectionId:o,sectionName:i}=this.state;t&&!t.id&&t.name?this.createBoard(e):!o&&i?this.createSection():this.handleSave()})),Te(this,"logPinEditEvent",((e,t,o,i,n)=>{const s={},{pinId:r,view:a,viewParameter:l}=this.props,{userMentionTags:d}=this.state;if(s.objectId=r,s.num_user_mention_tags=d.length,e&&(s.board_was_modified=!0),!e&&t&&(s.board_section_was_modified=!0),o){const{description:e}=this.state,{description:t}=n;s.original_pin_description=t,s.edited_pin_description=e}if(i){const{carousel_data:e}=this.state,{carousel_data:t}=n;s.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(t)),s.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(e))}this.props.logContextEvent({event_type:2,component:208,view_type:a,view_parameter:l,aux_data:{...s}})})),Te(this,"handleSave",(()=>{this.setState({apiErrorMessage:null,isProcessing:!0});const{advertiser_id:e,completeResourceFetch:t,invalidatePinResource:o,orbacActingAs:i,pinId:n,pinResource:{data:s},onHide:r,removeBoardlessPin:a,updatePinNote:l,viewer:d}=this.props;if(!s)return;const{alt_text:c,board:h,comments_disabled:u,did_it_disabled:_,title:g,description:m,link:b,pin_note:f,section:v,carousel_data:y,shopping_rec_disabled:P}=s,C=null==f?void 0:f.text,{carousel_data:j,shouldShowValidationLinkFormatError:w}=this.state;let A;if(j){const e=this.sanitizeCarouselData();e&&(A=JSON.stringify(e))}const{altText:S,board:z,commentsDisabled:I,currentIndex:B,title:k,description:T,pinNoteText:E,sectionId:M,shoppingRecDisabled:D,carousel_data:Z,userMentionTags:R}=this.state,L=z||h,O=w?b:this.state.link,F=(0,we.lJ)(d,i),N={alt_text:S,board_id:null==L?void 0:L.id,board_section_id:M,carousel_data_json:A,description:T,disable_comments:I,disable_did_it:I,id:n,link:O,shopping_rec_disabled:D,title:k,user_mention_tags:JSON.stringify(R),...e?{advertiser_id:e}:{},...F?{orbac_subject_id:F}:Object.freeze({})},U=v&&v.id||null,H=null==L?void 0:L.id,W=null==h?void 0:h.id,$=Me(c,S),G=W!==H,q=(Boolean(U)||Boolean(M))&&U!==M,V=Me(g,k),Y=Me(m,T),X=Me(b,O),J=Boolean(Z)&&Boolean(y)&&!x()(Z,y),K=u!==I||_!==I,Q=Me(C,E);$||G||q||V||Y||Q||X||J||K||P!==D?(Q&&l(n,C,E,F),p.ZP.create("PinResource",N).callUpdate().then((e=>{if(this._isMounted){var i;const{changeBoardPinCount:c,onSubmit:h,pinId:u,pinMoved:_}=this.props;var n,l;if((G||q)&&H&&W)_({selectedPinIds:[u],source:{boardId:W,sectionId:U},target:{boardId:H,sectionId:M}}),c({boardId:H,sectionId:M||void 0,increment:1}),c({boardId:W,sectionId:U||void 0,increment:-1}),d.id&&"quick_saves"===(null===(n=s.board)||void 0===n?void 0:n.layout)&&a(d.id,u);if(h&&H&&null!=L&&L.url)h({boardId:H,title:null!==(l=L.name)&&void 0!==l?l:"",sectionId:M,url:L.url});r(),o(u,F),null!==(i=e.resource_response)&&void 0!==i&&i.data.carousel_data&&(e.resource_response.data.carousel_data.index=B),t(e,F),this.logPinEditEvent(G,q,Y,J,s)}})).catch((()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:o}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!o})}))):(r(),o(n,F)),this.setState({isProcessing:!1})})),Te(this,"handleTextChanges",((e,t)=>{const{carousel_data:o}=this.state;if(!o)return;const i=a()(o),{carousel_slots:n=[]}=i,{currentIndex:s,shouldApplyTextToAll:r,description:l,link:d,title:c}=this.state,h=this.valueIsValidForType(e,t);switch(r?n.forEach((o=>o[t]=e)):n[s]&&(n[s][t]=e),t){case"details":const t=0===s?e:l;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!h,shouldShowGenericUpdateError:!1});break;case"link":const o=0===s?e:d;this.setState({link:o,carousel_data:i||null,shouldShowValidationLinkFormatError:!h,shouldShowGenericUpdateError:!1});break;case"title":const n=0===s?e:c;this.setState({title:n,carousel_data:i||null,shouldShowValidationTitleError:!h,shouldShowGenericUpdateError:!1})}})),Te(this,"handleDescriptionChange",(({value:e,userMentionTags:t})=>{const o=this.valueIsValidForType(e,"description"),i=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&this.props.logContextEvent({event_type:8906,element:116,aux_data:{tag_type:1}}),this.setState({description:e,userMentionTags:t,shouldShowValidationDescriptionError:!o,shouldShowValidationUserMentionTagsError:!i,shouldShowGenericUpdateError:!1})})),Te(this,"handleCarouselDetailsChange",(({value:e})=>{this.handleTextChanges(e,"details")})),Te(this,"handleTitleChange",(({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})})),Te(this,"handleCarouselTitleChange",(({value:e})=>{this.handleTextChanges(e,"title")})),Te(this,"handleAltTextChange",(({value:e})=>{this.setState({altText:e})})),Te(this,"valueIsValidForType",((e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===(0,Ie.FU)([(0,Ie.Jx)({message:this.props.i18n._('Not a valid url.', 'Validation error for an improperly formated url', 'Validation error for an improperly formated url')})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}})),Te(this,"handleWebsiteChange",(({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})})),Te(this,"handleCarouselWebsiteChange",(({value:e})=>{this.handleTextChanges(e,"link")})),Te(this,"handleCommentChange",(e=>this.setState({commentsDisabled:!e.value}))),Te(this,"handleShoppingRecChange",(e=>{this.setState({shoppingRecDisabled:!e.value})})),Te(this,"handleShouldApplyToAll",(e=>{if(e){const{currentIndex:t=0,carousel_data:o}=this.state;if(!o)return;const i=a()(o),{carousel_slots:n=[]}=i,{details:s,link:r,title:l}=n[t];n.forEach((e=>{e.details=s,e.title=l,e.link=r})),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})})),Te(this,"handleCarouselSlider",(e=>{const{carousel_data:t}=this.state,o=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<o&&this.setState({currentIndex:e})})),Te(this,"handleClickStoryPinPages",(()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/idea-pin-builder/${e.id}/edit`)})),Te(this,"handleMouseEnter",(()=>{this.setState({shouldShowCarouselSliders:!0})})),Te(this,"handleMouseLeave",(()=>{this.setState({shouldShowCarouselSliders:!1})}))}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}componentDidUpdate(e){const{pinResource:{data:t,isLoaded:o},carouselSlotCurrentIndex:i}=this.props;var n;t&&o!==e.pinResource.isLoaded&&this.setState({altText:t.alt_text,board:t.board,commentsDisabled:t.comments_disabled||t.did_it_disabled,description:t.description&&t.description.trim(),isLoadingPin:!1,link:t.link,pinNoteText:(null===(n=t.pin_note)||void 0===n?void 0:n.text)||"",sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,carousel_data:t.carousel_data,currentIndex:void 0!==i?i:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[],shoppingRecDisabled:t.shopping_rec_disabled})}componentWillUnmount(){this._isMounted=!1}getCurrentUserId(e){return e.isAuth?e.id:""}render(){var e,t,o;const{disableDelete:i,onHide:n,orbacActingAs:r,pinResource:a,pinId:l,requestContext:u,viewer:_}=this.props,{experiments:p}=u,{altText:g,apiErrorMessage:m,board:b,commentsDisabled:x,description:v,link:y,pinNoteText:P,sectionId:C,sectionName:j,showDeleteConfirmation:w,title:z,isLoadingPin:I,isProcessing:k,carousel_data:T,shouldApplyTextToAll:E,currentIndex:M,shoppingRecDisabled:D,shouldDisableSave:R,shouldShowCarouselSliders:L,shouldShowValidationTitleError:O,shouldShowValidationDescriptionError:H,shouldShowValidationLinkFormatError:$,shouldShowGenericUpdateError:G,shouldShowValidationUserMentionTagsError:q,userMentionTags:V}=this.state,Y=a.data||{},X=!!(Y&&Y.story_pin_data_id&&Y.story_pin_data),J=(null===(e=Y.native_creator)||void 0===e?void 0:e.id)===this.getCurrentUserId(_);if(w)return(0,c.jsx)(A,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation,showStoryPinCreatorDeleteMessage:X&&J});const K=!!(T&&T.carousel_slots&&T.carousel_slots.length>1),Q=T&&T.carousel_slots&&T.carousel_slots.length>0&&T.carousel_slots[M]||{},{details:ee="",link:ne="",title:se=""}=Q,re=Y&&(Y.access||[]).includes("write")||this.props.canEdit||!!b&&(0,s.Z)({action:4,board:b,viewer:_})||!!b&&(0,we.KY)(_,b,r),le=e=>{const t=(0,we.lJ)(e,r),o=t||this.getCurrentUserId(e),i=this.props.canEdit&&this.props.advertiserOwnerUserId?this.props.advertiserOwnerUserId:o;return re&&!Y.is_repin&&!X&&(K||!T)&&(Y.native_creator&&Y.native_creator.id===i||K&&Y.pinner&&Y.pinner.id===i||Y.link_domain&&Y.link_domain.official_user&&Y.link_domain.official_user.id===i||!!Y.domain&&Y.pinner&&Y.pinner.id===i&&Y.pinner.domain_url&&Y.pinner.domain_url.includes(Y.domain))},de=Y&&Y.images&&Y.images["474x"]||{},ue=new ze.v(u,"web_story_pin_creator").enabledWithNoActivation(),_e=new ze.v(u,"web_alt_text").enabledWithNoActivation(),pe=!new ze.e(u,"web_ip_stela_opt_in").getGroup().includes("pwt")&&new ze.v(u,"web_ip_stela_opt_in").enabled(),ge=X&&!!Y.story_pin_data&&pe&&J,me=Y.story_pin_data&&Y.story_pin_data.metadata&&Y.story_pin_data.metadata.version?(0,be.n)(Y.story_pin_data.metadata.version,xe.RR):null,fe=null!=me&&me>=0,ve=!!Y.story_pin_data&&!!Y.story_pin_data.metadata&&!!Y.story_pin_data.metadata.is_editable&&Y.native_creator&&Y.native_creator.id===this.getCurrentUserId(_);if(X&&ue&&fe&&ve)return(0,c.jsx)(te,{apiErrorMessage:m,board:b,commentsDisabled:x,description:v,disableDelete:!re||i,isLoadingPin:I,isProcessing:k,onChangeBoard:this.handleBoardChange,onChangeComment:this.handleCommentChange,onChangeSection:this.handleSectionChange,onClickBoardCreate:this.handleBoardCreateClick,onClickDeleteButton:this.onClickDeleteButton,onClickEditPages:this.handleClickStoryPinPages,onClickSectionCreate:this.handleSectionCreateClick,onHide:n,pinResource:a,sectionId:C,sectionName:j,title:z,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(_.username&&_.username)});const ye=le(_)?(0,c.jsx)(oe,{canEdit:re,onTitleChange:K?this.handleCarouselTitleChange:this.handleTitleChange,title:K&&se?se:z,errorMessage:O?(0,je.Y8)(K,this.props.i18n):""}):null,Pe=(re||_.isAuth&&(Y.pinner||{}).id===_.id)&&le(_)?(0,c.jsx)(Z,{canAddUserMentionTags:!K,canEdit:re,description:(K?ee:v)||"",errorMessage:(()=>H?(0,je.MM)(K,this.props.i18n):q?(0,je.bl)(K,this.props.i18n):"")(),initialMentions:V,label:this.props.i18n._('Description', 'Label for editing description', 'Label for editing description'),placeholder:this.props.i18n._('Tell us about this Pin...', 'Placeholder for editing description', 'Placeholder for editing description'),onDescriptionChange:K?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,Ce=(0,c.jsx)(U,{isCollaborative:!(null==b||!b.is_collaborative),onPinNoteChange:({value:e})=>{this.setState({pinNoteText:e})},pinNoteText:P}),Ae=(e=>le(e)&&!(Y.aggregated_pin_data&&Y.aggregated_pin_data.is_shop_the_look))(_)?(0,c.jsx)(ie,{link:K&&ne?ne:y,onChangeWebsite:K?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:$?(0,je.qj)(K,this.props.i18n):""}):null,Se=K?(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end",children:[(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"applyTextToAll",children:(0,c.jsx)(d.xv,{children:this.props.i18n._('Apply text to all', 'Apply title, description, link to all cards', 'Apply title, description, link to all cards')})})}),(0,c.jsx)(d.xu,{paddingX:2,paddingY:2,children:(0,c.jsx)(d.rs,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:E})})]}):null,Ie=le(_)&&_e?(0,c.jsx)(S,{canEdit:re,onAltTextChange:this.handleAltTextChange,altText:g}):null,Be=Y.can_delete_did_it_and_comments?(0,c.jsx)(h,{commentsDisabled:x,onCommentChange:this.handleCommentChange}):null,ke=p.checkExperiment("web_shopping_rec_setting",{dangerouslySkipActivation:!0}).group;ke.match("pwt")||p.v2ActivateExperiment("web_shopping_rec_setting");const Te=!["enabled","employees"].includes(ke)||!_.isAuth||(null===(t=Y.pinner)||void 0===t?void 0:t.id)!==_.id||Y.is_repin||Y.story_pin_data||_.shopping_rec_disabled?null:(0,c.jsx)(he,{shoppingRecDisabled:D,onShoppingRecChange:this.handleShoppingRecChange}),Ee=!!_.has_quicksave_board&&!!_.boardCount&&_.boardCount<2,Me="quick_creates"===(null===(o=Y.board)||void 0===o?void 0:o.layout),De=(0,we.Ms)(_,r);return(0,c.jsx)(f.ZP,{heading:this.props.i18n._('Edit this Pin', 'EditPinModal.ModalHeading.EditThisPin', 'Edit a previously saved pin'),accessibilityModalLabel:this.props.i18n._('Edit your previously saved pin', 'EditPinModal.ModalHeading.AccessibleLabel', 'Accessible label for edit previously saved pin modal'),size:Ee?"sm":"lg",onDismiss:n,footer:(0,c.jsx)(N,{apiErrorMessage:m,shouldShowGenericUpdateError:G,onClickDeleteButton:this.onClickDeleteButton,disableDelete:!re||i,onHide:n,shouldDisableSave:R,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(De)}),children:I||!a.isLoaded||k?(0,c.jsx)(d.kC,{alignItems:"center",justifyContent:"center",children:(0,c.jsx)(d.$j,{accessibilityLabel:this.props.i18n._('loading', 'EditPinModal.LoadingPin.Spinner', 'Accessible label for the edit pin loading icon'),show:!0})}):(0,c.jsxs)(d.xu,{display:"flex",justifyContent:Ee?"center":"between",minHeight:350,paddingX:4,children:[Ee?null:(0,c.jsxs)(d.xu,{column:12,mdColumn:9,children:[(0,c.jsx)(B,{board:b||Y.board,canEdit:re,isOriginallyQuickCreatesBoard:Me,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick,viewerId:_.id||""}),(0,c.jsx)(W,{board:b||Y.board,canEdit:re,onSectionCreate:this.handleSectionCreateClick,onSectionChange:this.handleSectionChange,sectionId:C,sectionName:j,currentSection:Y.section}),ye,Pe,Ae,Se,Ie,Ce,Be,Te,ge&&(0,c.jsx)(ae.Z,{children:(0,c.jsx)(ce,{onShoppingRecChange:this.handleShoppingRecChange,shoppingRecDisabled:D,storyPinData:Y.story_pin_data})})]}),(0,c.jsx)(F,{isCarousel:K,shouldShowCarouselSliders:L,onCarouselSlide:this.handleCarouselSlider,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,currentIndex:this.state.currentIndex,carouselData:this.state.carousel_data,pinId:l,description:v,image:de})]})})}}const Ze=(e,t,o)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...o?{orbac_subject_id:o}:Object.freeze({})}),Re=(0,n.connect)(null,((e,t)=>({changeBoardPinCount:t=>e((0,me.Br)(t)),changeUserPinCount:t=>e((0,Pe.JS)(t)),completeResourceFetch:(t,o)=>e((0,g.Sr)("PinResource",Ze(t.resource_response.data.id,!1,o),t)),createBoard:(t,o,i)=>e(function(e,t,o){const i={name:e,privacy:u.Z.BoardPrivacy.PUBLIC,username:t,...o?{orbac_subject_id:o}:Object.freeze({})};return e=>p.ZP.create("BoardResource",i).callCreate().then((o=>{const i=o.resource_response.data;return e(t&&(0,g.jB)("BoardsResource",(0,_.Z)(t,!1))),i}))}(t,o,i)),createSection:(o,i)=>e((0,m.Z)(o,t.i18n,i)),invalidatePinResource:(t,o)=>e((0,g.jB)("PinResource",Ze(t,!0,o))),removeBoardlessPin:(t,o)=>e((0,re.Z)({feedId:t,feedType:fe.DV.BOARDLESS_PINS,itemIds:[o],itemType:"pin"})),pinMoved:(0,Se.bindActionCreators)(Be.S,e),updatePinNote:(t,o,i,n)=>e((0,ye._)(t,o,i,n))})))(De);function Le(e){var t;const o=(0,l.ZP)(),{logContextEvent:i}=(0,E.v)(),s=(0,n.useSelector)((({advertiser:e})=>e)),r=null===(t=(0,Ce.W)())||void 0===t?void 0:t.onPinDelete,a=(0,ue.Z)(),d=(0,ge.Z)(),h=(0,we.lJ)(d,a),u=(0,pe.Z)({name:"PinResource",options:Ze(e.pinId,!0,h)}),_=d.isAuth&&Boolean(s)?s.id:void 0,p=d.isAuth&&Boolean(s)&&s.owner_user_id!==d.id?s.owner_user_id:void 0,g=(0,_e.Z)(u.data);return(0,c.jsx)(Re,{...e,dispatch:(0,n.useDispatch)(),history:(0,ke.k6)(),pinResource:u,requestContext:(0,Ae.B)(),i18n:o,onDelete:()=>{var t;g(),null===(t=e.onDelete)||void 0===t||t.call(e),r&&r({pinId:e.pinId})},orbacActingAs:a,advertiser_id:_,advertiserOwnerUserId:p,viewer:d,logContextEvent:i})}},957885:(e,t,o)=>{function i(e,t){return e?t._('Title too long. Make sure all cards\' titles have less than 100 characters', 'Title entered is too long while editing a carousel pin and/or one of its pins', 'Title entered is too long while editing a carousel pin and/or one of its pins'):t._('Title too long. Make sure title has less than 100 characters', 'Title entered is too long while editing a pin', 'Title entered is too long while editing a pin')}function n(e,t){return e?t._('Description too long. Make sure all cards\' descriptions have less than 500 characters', 'Description entered is too long while editing a carousel pin and/or one of its pins', 'Description entered is too long while editing a carousel pin and/or one of its pins'):t._('Description too long. Make sure description has less than 500 characters', 'Description entered is too long while editing a pin', 'Description entered is too long while editing a pin')}function s(e,t){return t._('Too many mentions. Make sure you have at most 5.', 'editPinModal.errorMessages.userMentionOverLimit', 'Too many mentions used in the description')}function r(e,t){return e?t._('Need to provide a valid URL. Make sure all cards\' links are valid', 'Invalid URL/link provided while editing a carousel pin and/or one of its pins', 'Invalid URL/link provided while editing a carousel pin and/or one of its pins'):t._('Need to provide a valid URL. Make sure the link is valid', 'Invalid URL/link provided while editing a pin', 'Invalid URL/link provided while editing a pin')}o.d(t,{MM:()=>n,Y8:()=>i,bl:()=>s,qj:()=>r})},691024:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(966338),n=o(396704),s=o(271807),r=o(778993),a=o(883119),l=o(785893);const d=1.25*r.J;function c({story:e}){const{action:{text:t,url:o},custom_properties:{image:i,image_alt:n}}=e;return(0,l.jsxs)(a.xu,{position:"relative",children:[(0,l.jsx)(a.zd,{rounding:4,height:d,width:r.J,children:(0,l.jsx)(a.Ee,{alt:n,color:"black",fit:"cover",naturalHeight:2688,naturalWidth:2e3,src:i})}),(0,l.jsx)(a.xu,{bottom:!0,display:"flex",justifyContent:"center",position:"absolute",width:r.J,padding:4,children:(0,l.jsx)(a.zx,{role:"link",href:o,fullWidth:!0,color:"white",text:t})})]})}const h=(0,i.connect)(((e,t)=>({story:e.stories[t.storyId]})),(()=>({})))((function({story:e,...t}){if(!e)return null;switch(e.story_type){case"BUBBLE_ONE_COL":return(0,l.jsx)(s.Z,{bubbles:e.objects,id:t.storyId,referringSource:e.referring_source,slotIndex:t.slot,storyType:e.story_type,title:e.title,viewType:t.viewType,viewParameter:t.viewParameter});case"feed_card_default":case"feed_card_video":return(0,l.jsx)(c,{story:e});case"add_pin":return(0,l.jsx)(n.Z,{});default:return null}}))},880544:(e,t,o)=>{o.d(t,{Z:()=>B});var i=o(667294),n=o(966338),s=o(124237),r=o(417498),a=o(768559),l=o(820384),d=o(674578),c=o(140582),h=o(6637),u=o(342877),_=o(357409),p=o(19121),g=o(281615),m=o(349700),b=o(293880),x=o(482546),f=o(232843),v=o(898781),y=o(946984),P=o(935409),C=o(941353),j=o(243550),w=o(558068),A=o(925927),S=o(785893);function z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class I extends i.PureComponent{constructor(...e){super(...e),z(this,"state",{step:"unsaved"}),z(this,"deletePin",(e=>h.ZP.create("PinResource",{id:e}).callDelete())),z(this,"repin",(()=>{const{location:e,pin:t,target:{board:o,boardSection:i},eventContext:n,previousHistory:s}=this.props,r=(0,a.Z)(t,e,s)||`${t.tracking_params||""}-0`,l=!t.id&&t.image_url?(0,c.Z)(t.image_url,t.link):"",d=i&&i.id,u={board_id:o.id||"",clientTrackingParams:r,description:t.description||"",image_base64:t.image_base64,link:t.link,image_url:l,is_buyable_pin:!1,is_removable:t.promoted_is_removable,media_upload_id:t.media_upload_id,pin_id:t.id||"",section:d,title:t.title||"",eventContext:n};return h.ZP.create("RepinResource",u).callCreate({showError:!1})})),z(this,"handleSave",this.props.requireAuth((()=>{const{onSave:e,makeCancelablePromise:t}=this.props,{step:o}=this.state;if("unsaving"===o)return void this.setState({step:"saving"});this.setState({step:"saving"});t(this.repin().then((({resource_response:{data:e}})=>this.shouldCompleteSave(e)))).then(e).catch((({isCanceled:e})=>{if(!e){const{target:{board:e,boardSection:t}}=this.props;s.Z.showError(t?(0,m.nk)(this.props.i18n._('Failed to save the Pin to {{sectionName}}', 'Error message when failed to save to a section within a board', 'Error message when failed to save to a section within a board'),{sectionName:t.title}).join(""):(0,m.nk)(this.props.i18n._('Failed to save the Pin to {{boardName}}', 'Error message when failed to save to a board', 'Error message when failed to save to a board'),{boardName:e.name}).join(""))}}))}))),z(this,"shouldCompleteSave",(e=>{const{saveToBoard:t,pin:o,dispatch:i,target:{board:n,boardSection:s}}=this.props,{step:r}=this.state,a=s&&s.id,d={pinId:o.id,boardId:n.id,sectionId:a,title:o.title||""};if("saving"===r){this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id}),t(n),i((0,l.Z)({feedId:a||n.id,feedType:a?g.DV.SECTION_PINS:g.DV.BOARD_PINS,itemIds:[o.id],itemType:"pin"}));const{image_url:r,images:c}=o,h=r||(null==c?void 0:c["236x"])&&c["236x"].url||"";return!s&&n.image_cover_url||(n.image_cover_url=h,i((0,P.yT)(n))),i((0,j.a1)({...d,localPinId:e.id})),i((0,P.Br)({boardId:n.id,sectionId:s?s.id:void 0,increment:1})),i((0,x.JS)({userId:e.pinner.id,increment:1})),this.setState({step:"saved"}),e}"unsaving"===r&&this.handleUnsave(e.id)})),z(this,"handleUnsave",(e=>{const{step:t}=this.state,{savedInfo:o}=this.props;if("unsaved"===t)return;if("saving"===t)return void this.setState({step:"unsaving"});const i=o&&o.localPinId||e;i&&(this.setState({step:"unsaving"}),this.deletePin(i).then((()=>this.shouldCompleteUnsave())))})),z(this,"shouldCompleteUnsave",(()=>{const{pin:e,savedInfo:t,target:{board:o,boardSection:i},dispatch:n,onDelete:s,viewerId:a}=this.props,{step:l}=this.state;if("unsaving"===l){if(t){const t=null==i?void 0:i.id;n((0,j.jg)({pinId:e.id})),n((0,P.Br)({boardId:o.id,sectionId:t,increment:-1})),n((0,x.JS)({userId:a,increment:-1})),n((0,b.xQ)(o.id)),n((0,d.Z)({feedId:t||o.id,feedType:t?g.DV.SECTION_PINS:g.DV.BOARD_PINS,itemIds:[e.id],itemType:"pin"})),t&&n((0,r.Z)(t)),s&&s()}this.setState({step:"unsaved"})}"saving"===l&&this.handleSave()}))}render(){const{children:e,savedInfo:t}=this.props,{step:o}=this.state;return e({save:this.handleSave,saved:"saved"===o||"saving"===o||!(!t||!t.localPinId),savedInfo:t,unsave:this.handleUnsave})}}const B=(0,n.connect)(((e,{pin:{id:t}})=>({savedInfo:e.pins[t]&&e.pins[t].savedInfo})))((function(e){var t;const{previous:o}=(0,w.H)(),{saveToBoard:i}=(0,C.N)(),n=null===(t=(0,f.W)())||void 0===t?void 0:t.onPinCreate,s=(0,v.ZP)(),r=(0,u.Z)(),a=(0,A.TH)(),l=(0,y.Z)(),d=(0,p.Z)(),c=(0,_.Z)(e.pin);return(0,S.jsx)(I,{...e,previousHistory:o,saveToBoard:i,location:a,makeCancelablePromise:r,onDelete:()=>{var t;c(),null===(t=e.onDelete)||void 0===t||t.call(e)},onPinCreate:n,requireAuth:l,i18n:s,viewerId:d.isAuth?d.id:""})}))},657986:(e,t,o)=>{o.d(t,{U:()=>_,Z:()=>p});var i=o(667294),n=o(294184),s=o.n(n),r=o(701500),a=o(360379),l=o(898781),d=o(883119),c=o(785893);const h={sm:32,md:40,lg:48},u=(0,i.memo)((0,i.forwardRef)((({carouselData:e,disabled:t=!1,iconOnly:o,isCloseupPin:i,onBoardUpdated:n,onClick:r,onSavedClick:u,onToggleModal:_,onUnsaved:p,renderSavedStatus:g,saveButtonType:m="classic",saved:b,savedInfo:x,size:f="md",variant:v="classic",viewParameter:y},P)=>{const C=(0,l.ZP)();return b&&"controlled"===m?(0,c.jsx)(d.zx,{fullWidth:!0,disabled:!0,text:C._('Saved', ' - ', ' -- '),size:"sm"}):!i&&x&&g&&p&&n&&"classic"===m?(0,c.jsx)(a.Z,{currentCarouselIndex:e&&e.index,onDeleteSavedState:p,onEditSubmit:n,onToggleModal:_,pinId:x.localPinId,variant:"pin",viewParameter:y,children:g()}):b&&"classic"===m&&i?(0,c.jsx)(d.zx,{fullWidth:!0,accessibilityLabel:C._('Saved button', 'saveButton.saved.label', 'Saved state label on save button'),text:C._('Saved!', 'saveButton.saved', 'Saved state text on save button'),size:"md",color:"white",onClick:u}):o?(0,c.jsx)(d.xu,{ref:P,"data-test-id":"SaveButton",children:(0,c.jsx)(d.hU,{accessibilityLabel:C._('Save', 'Accessibility label for the save button', 'Accessibility label for the save button'),bgColor:"white",icon:"pin",onClick:({event:e})=>r(e),iconColor:"darkGray"})}):(0,c.jsx)(d.xu,{display:i?void 0:"flex",justifyContent:"end",children:(0,c.jsx)("div",{ref:P,className:s()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===v}),"data-test-id":"SaveButton",onClick:t?void 0:r,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),r(e))},role:"button",tabIndex:"0",children:(0,c.jsx)("div",{className:s()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===v}),children:(0,c.jsx)(d.xu,{alignItems:"center",minHeight:h[f],dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",children:(0,c.jsx)(d.xv,{color:t?"subtle":"inverse",size:"lego"===v?"100":"200",weight:"bold",children:(0,c.jsx)("span",{className:s()("SaveButton__label",{"SaveButton__label--lego":"lego"===v}),children:C._('Save', 'Pin save button label', 'Pin save button label')})})})})})})}))),_=({isPulsarDisplayed:e,...t})=>{const[o,n]=(0,i.useState)(null);return(0,c.jsx)(r.Z,{anchor:".PinActionBar .repin.pinActionBarButton",anchorElementRef:o,isHidden:!e,children:(0,c.jsx)(u,{ref:e=>{null===e||o||n(e)},...t})})},p=u},284513:(e,t,o)=>{o.d(t,{Z:()=>h,c:()=>d});var i=o(667294),n=o(898781),s=o(349700),r=o(780280),a=o(883119),l=o(785893);const d=48,c=(0,i.forwardRef)(((e,t)=>{const{addButtonRef:o,collaboratorCount:i,nonDisplayedCollaboratorCount:c,displayedCollaborators:h,onClick:u,showAddButton:_}=e,p=(0,n.ZP)(),{isRTL:g}=(0,r.B)(),m=h.map((e=>e.name));let b="";switch(c?"default":m.length){case 3:b=(0,s.Wc)(p._('{{ first }}, {{ second }}, and {{ last }}', 'BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames'),{first:`${m[0]}`,second:`${m[1]}`,last:`${m[2]}`});break;case 2:b=(0,s.Wc)(p._('{{ first }} and {{ second }}', 'BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.'),{first:`${m[0]}`,second:`${m[1]}`});break;default:b=m.join(", ")}const x=c?(0,s.Wc)(p.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', c, 'BoardAvatarGroup.AvatarGroup.accessibilityLabel.aboveTwoCollaborators', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:b,leftCount:`${c}`}):(0,s.Wc)(p._('Collaborators: {{ userNames }}.', 'BoardAvatarGroup.AvatarGroup.accessibilityLabel.notAboveTwoCollaborators', 'Accessibility label that lists the names of collaborators'),{userNames:b}),f=h.length>1?[...h,...Array(c).fill({name:"",src:""})]:h,v=(h.length>1||0===i)&&_,y=p._('Invite collaborators.', 'BoardAvatarGroup.AvatarGroup.accessibilityLabel.inviteCollaborators', 'It informs the users that they can invite other collaborators.');return(0,l.jsxs)(a.xu,{position:"relative",rounding:"pill","data-test-id":"user-rep-avatar",children:[v?(0,l.jsx)(a.xu,{height:d,position:"absolute",left:g,ref:o,right:!g,rounding:"circle",top:!0,width:d}):null,(0,l.jsx)(a.HE,{accessibilityLabel:v?`${x} ${y}`:`${x}`,addCollaborators:v,collaborators:f,onClick:u,ref:t,role:"button",size:"md"})]})}));c.displayName="BoardAvatarGroup";const h=c},902263:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(667294),n=o(898781),s=o(892819),r=o(349700),a=o(780280),l=o(284513),d=o(883119),c=o(785893);function h({addButtonRef:e,nonDisplayedCollaboratorCount:t,displayedCollaborators:o,onClick:h,pileRef:u,showAddButton:_}){const[p,g]=(0,i.useState)(!1),m=(0,n.ZP)(),b=(0,s.Z)(),{locale:x}=(0,a.B)(),f=m._('Invite collaborators.', 'DeprecatedBoardCollaboratorFacepile.accessibilityLabel.inviteCollaborators', 'It informs the users that they can invite other collaborators.'),v=(0,r.Wc)(m.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', t, 'DeprecatedBoardCollaboratorFacepile.accessibilityLabel', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:o.map((e=>e.name)).join(", "),leftCount:`${t}`}),y=({children:e,hovered:t})=>(0,c.jsxs)(d.xu,{position:"relative",children:[(0,c.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0}),e]}),P=o.map((({name:e,src:t},o)=>(0,c.jsx)(d.xu,{"aria-hidden":"true",marginStart:0!==o?-4:void 0,children:(0,c.jsx)(y,{hovered:p&&!!h,children:(0,c.jsx)(d.xu,{color:"default",height:l.c,width:l.c,rounding:"circle",children:(0,c.jsx)(d.qE,{name:e,outline:!0,src:t})})})},`face-${o}`)));return P.length>1&&t&&P.push((0,c.jsx)(d.xu,{"aria-hidden":"true",zIndex:new d.Ry(1),children:(0,c.jsx)(d.xu,{marginStart:-4,children:(0,c.jsx)(y,{hovered:p&&!!h,children:(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:(0,c.jsx)(d.xu,{alignItems:"center",color:"secondary",display:"flex",height:l.c,justifyContent:"center",position:"relative",rounding:"circle",width:l.c,children:(0,c.jsx)(d.xv,{size:"300",weight:"bold",children:b(x,t,{shortform:!0})})})})})})},"additionalCount")),P.length>1&&_&&P.push((0,c.jsx)(d.xu,{"aria-hidden":"true",ref:e,zIndex:new d.Ry(1),children:(0,c.jsx)(d.xu,{marginStart:-4,children:(0,c.jsx)(y,{hovered:p,children:(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:(0,c.jsx)(d.xu,{alignItems:"center",color:"secondary",display:"flex",height:l.c,justifyContent:"center",rounding:"circle",width:l.c,children:(0,c.jsx)(d.JO,{accessibilityLabel:"Add",icon:"add",color:"default",size:20})})})})})},"addIcon")),(0,c.jsx)(d.kC,{alignItems:"center",children:(0,c.jsx)(d.iP,{accessibilityLabel:_?`${v} ${f}`:`${v}`,ref:u,onTap:h,rounding:"pill",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,c.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:P})})})}},623122:(e,t,o)=>{o.d(t,{I:()=>l,Z:()=>a});var i=o(845772),n=o(784590),s=o(217468);const r=({boardId:e,ownerUsername:t,ownerName:o,ownerImgSrc:r})=>{const{anyEnabled:a}=(0,s.t)("web_m10n_business_access_orbac_ga")(),l=(0,i.Z)(),{data:d,isLoaded:c}=(0,n.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...a&&l?{orbac_subject_id:l}:{}}}),h=[{name:o,src:r,href:`/${t}/`,isDim:!1}];return c&&d&&d.length>0&&d.forEach((e=>{h.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})})),h},a=r;function l({children:e,...t}){return e(r(t))}},744656:(e,t,o)=>{o.d(t,{Z:()=>ue});var i=o(667294),n=o(946327),s=o(443678),r=o(104498),a=o(784590),l=o(19121),d=o(883119),c=o(407043),h=o(898781),u=o(785893);function _({label:e,path:t,selected:o}){return(0,u.jsx)(d.JO,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:t},color:o?"default":"subtle",size:24})}function p({selected:e}){const t=(0,h.ZP)();return(0,u.jsx)(_,{label:t._('Dense', 'Label for selecting the dense pin density view', 'Label for selecting the dense pin density view'),path:"M16.00,20.00 L20.00,20.00 L20.00,16.00 L16.00,16.00 L16.00,20.00 Z M10.00,8.00 L10.00,4.00 L14.00,4.00 L14.00,8.00 L10.00,8.00 Z M4.00,8.00 L4.00,4.00 L8.00,4.00 L8.00,8.00 L4.00,8.00 Z M16.00,8.00 L16.00,4.00 L20.00,4.00 L20.00,8.00 L16.00,8.00 Z M4.00,14.00 L4.00,10.00 L8.00,10.00 L8.00,14.00 L4.00,14.00 Z M10.00,14.00 L10.00,10.00 L14.00,10.00 L14.00,14.00 L10.00,14.00 Z M16.00,14.00 L16.00,10.00 L20.00,10.00 L20.00,14.00 L16.00,14.00 Z M4.00,20.00 L4.00,16.00 L8.00,16.00 L8.00,20.00 L4.00,20.00 Z M10.00,20.00 L10.00,16.00 L14.00,16.00 L14.00,20.00 L10.00,20.00 Z",selected:e})}function g({selected:e}){const t=(0,h.ZP)();return(0,u.jsx)(_,{label:t._('Regular', 'Label for selecting the regular pin density view', 'Label for selecting the regular pin density view'),path:"M13.00,20.00 L13.00,13.00 L20.00,13.00 L20.00,20.00 L13.00,20.00 Z M4.00,11.00 L4.00,4.00 L11.00,4.00 L11.00,11.00 L4.00,11.00 Z M13.00,11.00 L13.00,4.00 L20.00,4.00 L20.00,11.00 L13.00,11.00 Z M4.00,20.00 L4.00,13.00 L11.00,13.00 L11.00,20.00 L4.00,20.00 Z",selected:e})}var m=o(330899);class b extends i.Component{constructor(...e){var t,o,i;super(...e),i=({activeIndex:e})=>{const{viewType:t,component:o,pinView:i,logContextEvent:n}=this.props,a=0===e?"regular":"dense";var l,d,c,h;(0,s.Z)({boardDensity:a,component:o,viewType:t},n),(0,r.Z)({density:a,surface:i}),"board"===i?null===(l=(d=this.props).updateBoardPinDensity)||void 0===l||l.call(d,a):null===(c=(h=this.props).updateProfilePinDensity)||void 0===c||c.call(h,a)},(o="handleItemChange")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidUpdate(){const{metadata:e,pinView:t,updatedBoardPinDensity:o,updateBoardPinDensity:i,updateProfilePinDensity:n}=this.props;if(e&&e.data&&""===o){const{profile_pin_rep_view_type:o,board_pin_rep_view_type:s}=e.data;"board"===t&&(o?null==i||i(o):null==i||i("regular")),"profile"===t&&(s?null==n||n(s):null==n||n("regular"))}}render(){const{metadata:e,updatedBoardPinDensity:t}=this.props;if(!e||!e.data)return null;const o="dense"===t?1:0;return(0,u.jsx)("div",{className:"OwnBoardSelector",children:(0,u.jsx)(d.sY,{items:[(0,u.jsx)(g,{selected:"regular"===t}),(0,u.jsx)(p,{selected:"dense"===t})],onChange:this.handleItemChange,selectedItemIndex:o,responsive:!0})})}}function x(e){var t;const o=(0,m.x)(),{logContextEvent:i}=(0,c.v)(),n=(0,l.Z)(),s=(0,a.Z)({name:"UserMetadataResource",options:{user:{id:n.isAuth?n.username:""}},noCache:!0}),r=null!==(t="board"===e.pinView?null==o?void 0:o.boardPinDensity:null==o?void 0:o.profilePinDensity)&&void 0!==t?t:"";return(0,u.jsx)(b,{...e,metadata:s,updateBoardPinDensity:null==o?void 0:o.setBoardPinDensity,updatedBoardPinDensity:r,updateProfilePinDensity:null==o?void 0:o.setProfilePinDensity,logContextEvent:i})}var f=o(419112),v=o(13788);function y({board:e,currentView:t,inBoardOrganizationMode:o,onContentViewChange:n,onOrganizeClick:s,pinCount:r,showSortOptions:a}){const c=(0,h.ZP)(),_=(0,l.Z)();return(0,u.jsxs)(d.xu,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,children:[(0,u.jsx)(d.xu,{paddingX:1,flex:"grow",children:(0,u.jsx)(d.X6,{children:c._('Pins', 'Heading for Pins outside of board sections on board page', 'Heading for Pins outside of board sections on board page')})}),a&&(0,f.tk)(r)&&(0,u.jsx)(d.xu,{paddingX:2,children:(0,u.jsx)(f.ZP,{currentView:t,onChange:n,board:e,viewer:_})}),r>=v.Ev&&(0,u.jsxs)(i.Fragment,{children:[r>=v.IK&&(0,u.jsx)(x,{viewType:5,component:13183,pinView:"board"}),!o&&(0,u.jsx)(d.xu,{paddingX:2,children:(0,u.jsx)(d.zx,{fullWidth:!0,text:c._('Organize', 'The board organization button', 'The board organization button'),onClick:s})})]})]})}var P=o(966338),C=o(717615),j=o(281615),w=o(565497),A=o(231947),S=o(990270);const z=(0,P.connect)(((e,t)=>(0,S.fx)(e.feeds[j.DV.BOARD_PINS][t.board.id])))((function(e){const t=(0,l.Z)(),o=(0,C.Z)(),i=(0,A.lJ)(t,o),n=(0,a.Z)({name:"BoardFeedResource",options:(0,w.q)(e.board,e.viewer,e.currentView,e.currentFilter,i)});return(0,u.jsx)(S.ZP,{...e,resource:n})}));z.displayName="BoardSectionlessPinGrid";const I=z;var B=o(830944);const k=({children:e,shouldNavigate:t,to:o})=>t?(0,u.jsx)(d.iP,{role:"link",href:o,children:e}):e;var T=o(66699);const E=e=>{const t=(0,h.ZP)(),{numberOfSelectedPins:o}=e;return(0,u.jsx)(d.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsx)(d.xu,{color:"default",padding:3,rounding:"pill",children:(0,u.jsx)(d.xv,{weight:"bold",children:(0,T.Z)(t.ngettext('Move {{ count }} Pin here', 'Move {{ count }} Pins here', o, 'Call to action overlay on a section to move selected Pins', 'Call to action overlay on a section to move selected Pins'),{count:o})})})})};var M=o(396026),D=o.n(M);const Z=157,R=141,L=118,O=106;function F(e){return"dense"===e?2:3}function N(e){return(("dense"===e?L:O)+1)*F(e)-1}function U({ariaLabel:e,isHovered:t,mode:o,pins:i}){const n=F(o),s="dense"===o,r=s?Z:R,a=s?L:O,l=N(o);return(0,u.jsx)(d.zd,{rounding:4,width:l,children:(0,u.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(d.xu,{"aria-label":e,"aria-required":"true",bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,top:!0}),D()(n).map((e=>{var t,o,s,l,c,h;const _=e===n-1,p=i[e];return(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:_?void 0:1}},children:(0,u.jsx)(d.zd,{height:r,width:a,rounding:0,wash:!0,children:p&&(0,u.jsx)(d.Ee,{alt:null!==(t=p.description)&&void 0!==t?t:"",color:"transparent",fit:"cover",naturalHeight:null!==(o=null===(s=p.image_large_size_pixels)||void 0===s?void 0:s.height)&&void 0!==o?o:1,naturalWidth:null!==(l=null===(c=p.image_large_size_pixels)||void 0===c?void 0:c.width)&&void 0!==l?l:1,src:null!==(h=p.image_large_url)&&void 0!==h?h:""})})},e)}))]})})}var H=o(874917),W=o(780280);function $({children:e,mode:t}){return"dense"===t?(0,u.jsx)(d.xv,{weight:"bold",children:e}):(0,u.jsx)(d.X6,{accessibilityLevel:2,size:"400",lineClamp:1,children:e})}function G({children:e,displayEditIcon:t,mode:o,mouseCursor:i,onEditClick:n,onTouch:s,pinCount:r,title:a}){const l=(0,h.ZP)(),{isRTL:c}=(0,W.B)(),_=(0,u.jsxs)(d.xu,{children:[(0,u.jsxs)(d.xu,{position:"relative",children:[e,t&&(0,u.jsx)(d.xu,{position:"absolute",bottom:!0,left:c,right:!c,children:(0,u.jsx)(d.xu,{padding:2,children:(0,u.jsx)(d.hU,{bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:n,accessibilityLabel:l._('Edit', 'BoardSectionCard.SectionRep.EditIcon', 'accessibility label for the board section name edit button'),accessibilityHaspopup:!0,size:"sm"})})})]}),(0,u.jsx)(d.kC,{alignItems:"start",justifyContent:"between",width:N(o),children:(0,u.jsxs)(d.xu,{padding:2,flex:"grow",children:[(0,u.jsx)($,{mode:o,children:a}),(0,u.jsx)(d.xu,{marginTop:1,children:(0,u.jsx)(H.i,{count:r,size:"100"})})]})})]});return s?(0,u.jsx)(d.iP,{fullWidth:!1,mouseCursor:i,onTap:s,rounding:4,children:_}):_}const q=e=>{var t,o,n;const{board:s,boardSection:r,canEdit:a,focused:c,hovered:h,inOrganizationMode:_,isDragging:p,isMergeTarget:g,onBlur:b,oneTapMovePinsHandler:x,onFocus:f,onMouseEnter:v,onMouseLeave:y,onShowEditSectionModal:P}=e,j=(0,l.Z)(),w=(0,C.Z)(),S=(0,A.lJ)(j,w),z=S&&(0,B.Z)(s)?`?orbac_subject_id=${S}`:"",{slug:I,title:T,preview_pins:M=[]}=r,D=null!==(t=null===(o=(0,m.x)())||void 0===o?void 0:o.boardPinDensity)&&void 0!==t?t:"",Z=x&&x.numberOfSelectedPins;let R;Z&&x&&(R=()=>{x.moveToSection(r)});let L="pointer";p?L="grabbing":!Z&&_&&(L="grab");const O=!!a&&!p&&(h||c),F=x&&x.numberOfSelectedPins>0&&!!Z&&h&&!p&&(0,u.jsx)(E,{numberOfSelectedPins:x.numberOfSelectedPins});return(0,u.jsxs)(d.xu,{alignItems:"center",color:"default","data-test-id":`section-${r.title}`,direction:"row",display:"flex",onBlur:b,onFocus:f,onMouseEnter:v,onMouseLeave:y,position:"relative",rounding:2,children:[(0,u.jsx)(k,{shouldNavigate:!_,to:`${null!==(n=s.url)&&void 0!==n?n:""}${I}/${z}`,children:(0,u.jsx)(G,{displayEditIcon:O,mode:D,mouseCursor:L,onEditClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),P(r)},onTouch:R,pinCount:r.pin_count,title:T,children:(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(U,{ariaLabel:`section-${r.title}`,isHovered:h||g||c,mode:D,pins:M}),F]})})}),(0,u.jsx)("div",{className:"sectionHoverSurface"})]})};var V=o(274319),Y=o(345221),X=o(215292),J=o(583421),K=o(278380);function Q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ee extends i.Component{constructor(...e){super(...e),Q(this,"state",{dragDrop:null,sectionIds:this.props.sections.map((e=>e.id))}),Q(this,"cancelHoverTimeout",(()=>{const e=this.dragHoverTimeout;e&&clearTimeout(e.timeoutId),this.dragHoverTimeout=null})),Q(this,"dragHoverTimeout",null),Q(this,"isDragging",(()=>!!this.state.dragDrop)),Q(this,"handleSectionDragBegin",(e=>{this.setState({dragDrop:{previewIndex:e,sourceIndex:e,target:null}})})),Q(this,"handleSectionDragHover",((e,t)=>{const{dragDrop:o}=this.state,i=this.props.allowReordering;if(!t||!o)return;const{previewIndex:n}=o,s=(0,K.TI)({hoverRelativePosition:t,centerEnabled:e!==n&&i}),r={itemIndex:e,regionWithinItem:s};if(this.dragHoverTimeout&&(0,K.Lz)(r,this.dragHoverTimeout.hoverLocation))return;this.cancelHoverTimeout();const a="center"===s?"merge":"reorder",l={action:a,index:(0,K.X3)({hoverLocation:r,sourceIndex:n})};l.index!==n?this.dragHoverTimeout={hoverLocation:r,timeoutId:setTimeout((()=>{this.dragHoverTimeout=null,"reorder"===a?this.setState((({dragDrop:e,sectionIds:t})=>({dragDrop:{...e,target:l,previewIndex:l.index},sectionIds:(0,j.zX)(t,n,l.index)}))):this.setState((({dragDrop:e})=>({dragDrop:{...e,target:l}})))}),"reorder"===a?200:20)}:o.target&&o.target.index!==l.index&&this.setState({dragDrop:{...o,target:l}})})),Q(this,"handleSectionDragEnd",(e=>{const{sections:t,onShowMergeSectionsConfirmationModal:o,onSectionReorder:i}=this.props,{dragDrop:n,sectionIds:s}=this.state,r=n&&n.target;if(this.cancelHoverTimeout(),!e||!n||!r||r.index===n.sourceIndex)return void this.setState({dragDrop:null,sectionIds:t.map((e=>e.id))});const{previewIndex:a,sourceIndex:l}=n,{action:d,index:c}=r;if(this.setState({dragDrop:null}),"merge"===d){const e=e=>{const o=s[e];return o&&t.find((({id:e})=>e===o))},i=e(a),n=e(c);i&&n&&o(i,n)}else i(l,c)})),Q(this,"renderSection",((e,t)=>{const{allowReordering:o,board:i,canEdit:n,oneTapMovePinsHandler:s,onShowEditSectionModal:r,organizeMode:a}=this.props,{dragDrop:l}=this.state,c=l&&l.target;return(0,u.jsx)(d.xu,{padding:2,children:(0,u.jsx)(X.q,{children:({focused:l,hovered:d,onBlur:h,onFocus:_,onMouseEnter:p,onMouseLeave:g})=>(0,u.jsx)(q,{allowReordering:o,board:i,boardSection:e,canEdit:n,focused:l,hovered:d,inOrganizationMode:a,isDragging:this.isDragging(),isMergeTarget:!!c&&"merge"===c.action&&t===c.index,onBlur:e=>{const t=e.currentTarget;setTimeout((()=>{t.contains(document.activeElement)||h()}),0)},onFocus:_,onMouseEnter:p,onMouseLeave:g,oneTapMovePinsHandler:s,onShowEditSectionModal:r})})})}))}componentDidUpdate(e){const{sections:t}=e,{sections:o}=this.props,i=e=>e.map((({id:e})=>e)).join(",");if(t.length!==o.length&&i(t)!==i(o)){this.cancelHoverTimeout();const e=o.map((e=>e.id));this.setState({dragDrop:null,sectionIds:e})}}componentWillUnmount(){this.cancelHoverTimeout()}render(){const{allowReordering:e,connectDropTarget:t,isDragWithinBounds:o,sections:i}=this.props,{sectionIds:n}=this.state,s=this.isDragging(),r=i.reduce(((e,t)=>({...e,[t.id]:t})),{}),a=(0,u.jsx)(d.xu,{display:"flex",justifyContent:"center",marginStart:6,marginEnd:6,wrap:!0,children:n.map((e=>r[e])).filter((e=>!!e)).map(((t,i)=>(0,u.jsx)(d.xu,{children:e?(0,u.jsx)(J.Z,{index:i,onDragBegin:this.handleSectionDragBegin,onDragEnd:this.handleSectionDragEnd,onDragHover:this.handleSectionDragHover,type:J.y.Section,children:(0,u.jsx)("div",{style:{opacity:s&&!o?.5:1},children:this.renderSection(t,i)})}):(0,u.jsx)(d.xu,{children:this.renderSection(t,i)})},t.id)))});return(0,u.jsxs)(d.xu,{width:"100%",children:[e&&t?t((0,u.jsx)("div",{children:a})):a,s&&(0,u.jsx)(V.Z,{})]})}}const te=(0,Y.Z)(J.y.Section)(ee);function oe(e){const t=(0,h.ZP)(),{allowReordering:o,fetchMore:i,isAtEnd:n,isFetching:s}=e;return(0,u.jsxs)(d.xu,{width:"100%",children:[(0,u.jsx)(d.gr,{isAtEnd:n,isFetching:s,fetchMore:i}),o?(0,u.jsx)(te,{...e}):(0,u.jsx)(ee,{...e}),s&&!n&&(0,u.jsx)(d.xu,{position:"relative",paddingY:6,children:(0,u.jsx)(d.$j,{accessibilityLabel:t._('Loading sections', 'loading state for board sections', 'loading state for board sections'),show:!0})})]})}var ie=o(993404),ne=o(6637);class se extends i.Component{constructor(...e){var t,o,i;super(...e),i=(e,t)=>{const{board:o,dispatch:i,enableReordering:n,sections:s,viewParameter:r}=this.props;if(!n)return;const a=s[e].id,l=s[t].id,d=(0,j.zX)(s,e,t).map((e=>e.id)),c=d.indexOf(a),h=e=>e>=0&&e<d.length,u={boardId:o.id,sourceSectionId:a,targetSectionId:l,...h(c+1)?{sectionIdAfter:d[c+1]}:{},...h(c-1)?{sectionIdBefore:d[c-1]}:{}},_={object_id_str:a,view_type:5,view_parameter:r};var p;i((p=u,e=>{const{boardId:t,sectionIdBefore:o,sectionIdAfter:i,sourceSectionId:n,targetSectionId:s}=p;e((0,ie.Z)({feedType:j.DV.BOARD_SECTIONS,feedId:t,itemType:"board_section",sourceItemId:n,targetItemId:s}));const r={section_id:n,section_before:o||void 0,section_after:i||void 0};return ne.ZP.create("BoardSectionsReorderResource",r).callUpdate({showError:!1})})).then((()=>this.props.logContextEvent({event_type:7133,..._})))},(o="handleSectionReorder")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidMount(){const{sectionsInvalidated:e,onLoadedAll:t,sectionsResource:{isFetching:o,refresh:i,isAtEnd:n}}=this.props;e&&!o&&i(),n&&t()}componentDidUpdate(e){!this.props.sectionsInvalidated||e.sectionsInvalidated||this.props.isFetching||this.props.refreshData(),!e.sectionsResource.isAtEnd&&this.props.sectionsResource.isAtEnd&&this.props.onLoadedAll()}render(){var e;const{board:t,enableReordering:o,inBoardOrganizationMode:i,oneTapMovePinsHandler:n,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:r,sections:a,sectionsResource:l,viewer:c,orbacActingAs:h}=this.props,{isLoaded:_,isFetching:p,fetchMore:g,isAtEnd:m}=l;if(!_)return this.props.i18n._('Board sections loading spinner', 'BoardPage.BoardSections.loadingSpinner', 'Accessibility label for the spinner on board sections'),(0,u.jsx)(d.$j,{accessibilityLabel:this.props.i18n._('Board sections loading spinner', ' - ', ' -- '),show:!0});const b=(t.access||[]).includes("write")||(0,A.D3)(c,(null===(e=t.owner)||void 0===e?void 0:e.id)||"",h);return(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"center",children:(0,u.jsx)(oe,{allowReordering:o,board:t,canEdit:b,fetchMore:g,isAtEnd:m,isFetching:p,oneTapMovePinsHandler:n,onSectionReorder:this.handleSectionReorder,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:r,organizeMode:i,sections:a})})}}const re=(0,P.connect)((function(e,t){const{feeds:{[j.DV.BOARD_SECTIONS]:o={}},sections:i}=e,{board:{id:n}}=t,s=o[n];return{sections:(s||[]).reduce(((e,t)=>"board_section"===t.type&&i[t.id]?e.concat([i[t.id]]):e),[]),sectionsInvalidated:null===s}}))((function(e){const{logContextEvent:t}=(0,c.v)(),o=(0,h.ZP)(),i=(0,l.Z)(),n=(0,C.Z)(),s=(0,A.lJ)(i,n),{board:r}=e,d=(0,a.Z)({name:"BoardSectionsResource",options:{board_id:e.board.id,redux_normalize_feed:!0,...(0,B.Z)(r)&&s?{orbac_subject_id:s}:{}}});return(0,u.jsx)(se,{...e,sectionsResource:d,i18n:o,viewer:i,orbacActingAs:n,logContextEvent:t})}));var ae=o(542190),le=o(11415),de=o(535095),ce=o(904411),he=o(946984);function ue({actions:e,board:t,bulkEditSelectedPins:o,currentFilter:s,currentView:r,displayActionBar:a,enableReordering:h,inBoardOrganizationMode:_,inSectionOrganizationMode:p,inSelectAll:g,isOwnBoard:b,isPinGridSorted:x,onBulkEditPinClick:f,onContentViewChange:P,oneTapMovePinsHandler:C,onShowEditSectionModal:j,onShowMergeSectionsConfirmationModal:w,refreshFilteredFeed:A,viewParameter:S}){var z;const B=(0,ce.gC)()(t.id),k=(B?B.section_count:t.section_count)||0,T=null===(z=(0,m.x)())||void 0===z?void 0:z.boardPinDensity,{logContextEvent:E}=(0,c.v)(),[M,D]=(0,i.useState)(0===k),Z=(0,he.Z)({shouldStopEventPropagation:!1}),R=(0,le.Z)(t.url),L=(0,l.Z)(),O=Z((()=>{const{onBoardOrganizeClick:t}=e;E({event_type:101,component:69,element:400}),t&&t(!0)})),{is_collaborative:F,pin_count:N}=t,U=(t.access||[]).includes("write"),H=b||t.collaborated_by_me,W=Boolean("number"==typeof N&&N>=v.Oj&&F&&H);return(0,u.jsxs)(d.xu,{marginBottom:12,children:[(0,u.jsx)(n.Z,{setMaxWidth:!1,children:(0,u.jsxs)(d.xu,{children:[k>0&&(!s||s===de.cg)&&(0,u.jsx)(re,{board:t,enableReordering:h,inBoardOrganizationMode:_,inSectionOrganizationMode:p,oneTapMovePinsHandler:C,onLoadedAll:()=>D(!0),onShowEditSectionModal:j,onShowMergeSectionsConfirmationModal:w,viewParameter:S}),a&&M&&H&&k>0&&(0,u.jsx)(y,{board:t,currentView:r,inBoardOrganizationMode:_,onContentViewChange:P,onOrganizeClick:O,pinCount:null!=N?N:0,showSortOptions:W})]})}),M&&(0,u.jsx)(d.xu,{"data-test-id":"board-feed",dangerouslySetInlineStyle:{__style:{paddingBottom:"8px"}},paddingX:3,position:"relative",children:(0,u.jsx)(I,{board:t,bulkEditSelectedPins:o,currentFilter:s,currentView:r,denseViewSelected:U&&"dense"===T,inBoardOrganizationMode:_,inSectionOrganizationMode:p,inSelectAll:g,isOwnBoard:b,isPinGridSorted:x,onBulkEditPinClick:f,refreshFilteredFeed:A,renderFooterStory:e=>!_&&!t.archived_by_me_at&&H&&(0,u.jsx)(d.xu,{marginBottom:6,children:(0,u.jsx)(n.Z,{children:(0,u.jsx)(ae.Z,{collection:t,storyId:e,url:R})})}),viewParameter:S,viewer:L})})]})}},851942:(e,t,o)=>{o.d(t,{Z:()=>m});var i=o(667294),n=o(898781),s=o(13788),r=o(883119),a=o(785893);function l({anchor:e,hideAddSectionTooltip:t}){const o=(0,n.ZP)();return(0,a.jsx)(r.mh,{children:(0,a.jsx)(r.xu,{zIndex:s.bW,position:"absolute",top:!0,children:(0,a.jsx)(r.J2,{anchor:e,color:"blue",idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,showCaret:!0,size:"sm",children:(0,a.jsx)(r.xu,{padding:4,children:(0,a.jsx)(r.xv,{color:"inverse",weight:"bold",children:o._('Tap + to add a section any time', 'boardActionsButton.addIconButton.addSectionFlyout', 'Flyout to point out where you can find add section')})})})})})}var d=o(217468);function c({anchor:e,idealDirection:t,onAddBoardNote:o,onAddOrEditDate:s,onAddSection:l,onClose:c,onCreateBoard:h,onCreatePin:u,onCreateStoryPin:_,surface:p,isWithinFixedContainer:g}){const m=(0,n.ZP)(),{anyEnabled:b}=(0,d.a)("web_story_pin_creator"),{anyEnabled:x}=(0,d.a)("web_sp2s"),f=(0,i.useMemo)((()=>({pin:m._('Pin', 'BoardActionsButton.LegoFlyout.Pin', 'Option to create a pin'),rename:x?m._('Idea Pin', 'BoardActionsButton.LegoFlyout.IdeaPin', 'Option to create a Idea Pin'):m._('Story Pin', 'BoardActionsButton.LegoFlyout.StoryPin', 'Option to create a Story Pin'),board:m._('Board', 'profileHeader.actionBar.board', 'Option to create a board'),section:m._('Section', 'BoardActionsButton.LegoFlyout.Section', 'Option to create a board section'),date:m._('Date', 'BoardActionsButton.LegoFlyout.Date', 'Option to add a date to a board'),todos:m._('To-dos', 'BoardActionsButton.LegoFlyout.Note', 'Option to create a board note'),new:m._('New', 'BoardActionsButton.LegoFlyout.New', 'New option indicator')})),[m,x]);return(0,a.jsxs)(r.Lt,{id:"board_actions",anchor:e,idealDirection:t||"down",onDismiss:c,isWithinFixedContainer:g,zIndex:new r.Ry(1),children:[(0,a.jsx)(r.Lt.Section,{label:m._('Create', 'BoardActionsButton.LegoFlyout.Create', 'Label for a list of options to create a pin or a section'),children:[(0,a.jsx)(r.Lt.Item,{dataTestId:"Create Pin",onSelect:()=>{u(),c()},option:{label:f.pin,value:f.pin}},"actions-create-0"),_&&b&&(0,a.jsx)(r.Lt.Item,{dataTestId:"Create Story Pin",onSelect:()=>{_(),c()},option:{label:f.rename,value:f.rename}},"actions-create-1"),"profileBoards"===p&&h&&(0,a.jsx)(r.Lt.Item,{dataTestId:"Create board",onSelect:()=>{h(),c()},option:{label:f.board,value:f.board}},"actions-create-2")].filter(Boolean)}),"board"===p&&(0,a.jsx)(r.Lt.Section,{label:m._('Add', 'BoardActionsButton.LegoFlyout.Add', 'Label for a list of options to add board sections or a board date'),children:[o&&(0,a.jsx)(r.Lt.Item,{dataTestId:"addBoardNote",onSelect:()=>{o(),c()},option:{label:f.todos,value:f.todos},badge:{text:f.new,type:"info"}},"actions-add-0"),l&&(0,a.jsx)(r.Lt.Item,{dataTestId:"addSection",onSelect:()=>{l(),c()},option:{label:f.section,value:f.section}},"actions-add-1"),!!s&&(0,a.jsx)(r.Lt.Item,{onSelect:()=>{s(),c()},option:{label:f.date,value:f.date}},"actions-add-2")].filter(Boolean)})]})}var h=o(333312),u=o(806986);function _({anchor:e}){const t=(0,u.JI)();return(0,a.jsx)(r.mh,{children:(0,a.jsx)(r.xu,{zIndex:s.bW,position:"absolute",top:!0,children:(0,a.jsx)(h.default,{anchor:e,experienceIds:[503447],idealDirection:"down",flyoutSize:"md",onClickComplete:()=>{t(!0)},placementId:19,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center",textWeight:"normal"})})})}function p({anchor:e}){return(0,a.jsx)(r.mh,{children:(0,a.jsx)(r.xu,{zIndex:s.bW,position:"absolute",top:!0,children:(0,a.jsx)(h.default,{anchor:e,experienceIds:[502096],idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0})})})}var g=o(424432);function m({children:e,idealDirection:t,onAddBoardNote:o,onAddOrEditDate:s,onAddSection:d,onCreateBoard:h,onCreatePin:u,onCreateStoryPin:m,onOpen:b=(()=>{}),surface:x,isWithinFixedContainer:f}){var v;const y=(0,n.ZP)(),{showCreateSectionTooltip:P,setShowCreateSectionTooltip:C}=null!==(v=(0,g.L)())&&void 0!==v?v:{},j=()=>C(!1),w=(0,i.useRef)(),[A,S]=(0,i.useState)(!1),z=()=>S(!1),I=()=>{A?z():(b(),P&&j(),S(!0))},B={board:y._('Board Actions', 'button that allows user view actions on a board such as add section, create pin, create pincode, and create widget', 'button that allows user view actions on a board such as add section, create pin, create pincode, and create widget'),profileBoards:y._('Profile Actions', 'profileHeader.actionBar.createButton', 'Button on user\'s profile to open flyout with options to create a pin or a board'),profilePins:y._('Profile Actions', 'profileHeader.actionBar.createButton', 'Button on user\'s profile to open flyout with options to create a pin or a board'),section:y._('Create Pin', 'Button to begin pin creation flow', 'Button to begin pin creation flow')},k=e&&e({active:A,openFlyout:I})||(0,a.jsx)(r.hU,{accessibilityLabel:B[x],icon:"add",onClick:"section"===x?u:I,size:"lg"});let T;return A||"board"!==x||(P?T="addSectionTooltip":s&&(T="planningActionsExperience")),A||"profileBoards"!==x||(T="createBoardTooltip"),(0,a.jsxs)(r.xu,{"data-test-id":"boardActionsButton",children:[(0,a.jsx)(r.xu,{ref:w,children:k}),A&&(0,a.jsx)(c,{anchor:w.current,idealDirection:t,onAddBoardNote:o,onAddOrEditDate:s,onAddSection:d,onClose:z,onCreateBoard:h,onCreatePin:u,onCreateStoryPin:m,surface:x,isWithinFixedContainer:!!f}),"addSectionTooltip"===T&&(0,a.jsx)(l,{anchor:w.current,hideAddSectionTooltip:j}),"planningActionsExperience"===T&&(0,a.jsx)(p,{anchor:w.current}),"createBoardTooltip"===T&&(0,a.jsx)(_,{anchor:w.current})]})}},563126:(e,t,o)=>{o.d(t,{Z:()=>X});var i=o(667294),n=o(319915),s=o(947599),r=o(499128),a=o(898781),l=o(343341),d=o(883119),c=o(785893);const h=(0,i.lazy)((()=>o.e(4603).then(o.t.bind(o,774855,23))));function u({linkURL:e,onDidFocus:t,onDidClickCopyButton:o}){const i=(0,a.ZP)(),{showOneToast:u}=(0,l.F9)(),_=i._('Copy link', '[button] copy a URL link shown, to paste in another place', '[button] copy a URL link shown, to paste in another place');return(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingX:4,children:[(0,c.jsx)(d.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(d.nv,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})}),(0,c.jsx)(n.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(s.Z,{fallback:(0,c.jsx)(d.zx,{text:_,disabled:!0}),children:(0,c.jsx)(h,{text:e,onCopy:(e,t)=>{t&&u((({hideToast:e})=>(0,c.jsx)(r.ZP,{onHide:e,text:i._('Link copied to clipboard!', 'toast message to confirm if users copied the url successfully', 'toast message to confirm if users copied the url successfully')}))),o()},children:(0,c.jsx)(d.zx,{text:_,size:"lg"})})})})]})}var _=o(720247),p=o(845772),g=o(587857),m=o(217468),b=o(407043),x=o(363719);const f=(e,t)=>({invite_category:4,invite_channel:12,object_type:g.d.BOARD,object_id:e,...t?{orbac_subject_id:t}:{}}),v=e=>({component:13305,element:10921,object_id_str:e,view_type:5,view_parameter:3059});function y({boardId:e}){const{logContextEvent:t}=(0,b.v)(),[o,n]=(0,i.useState)(!1),[s,r]=(0,i.useState)(null),{anyEnabled:a}=(0,m.t)("web_m10n_business_access_orbac_ga")(),l=(0,p.Z)();(0,i.useEffect)((()=>{if(!s){const t=f(e,a?l:""),{cancel:o,promise:i}=(0,_.Z)(x.Z.createShareInviteData(t));return i.then((e=>r(e))),()=>{o()}}}),[]);const d=s?s.invite_url:"...",h=()=>{null===s||o||(n(!0),x.Z.logShareInvite(f(e),s))};return(0,c.jsx)(u,{linkURL:d,onDidClickCopyButton:()=>{t({event_type:101,...v(e)}),h()},onDidFocus:h})}var P=o(426151),C=o(116303),j=o(784590);function w({boardId:e,invitedUserId:t,isInvited:o,onClick:n,buttonSize:s="sm"}){const r=(0,a.ZP)(),{anyEnabled:l}=(0,m.t)("web_m10n_business_access_orbac_ga")(),h=(0,p.Z)(),u=(0,j.Z)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t,...l&&h?{orbac_subject_id:h}:{}}});(0,i.useEffect)((()=>{u.refresh()}),[]);const _={text:r._('Invite', '[button] invite someone to collaborate on a board', 'it appears in the list expanded when click invite button at the top of board page'),color:"red",disabled:!1};return u.isFetching&&(_.text=r._('Loading', '[button] disabled button status text when checking if the user has been invited', 'it appears in the list expanded when click invite button at the top of board page'),_.color="gray",_.disabled=!0),(o||u.isLoaded&&u.data)&&(_.text=r._('Invited', '[button] disabled button status text when a user has been invited to a board', 'it appears in the list expanded when click invite button at the top of board page'),_.color="gray",_.disabled=!0),(0,c.jsx)(d.zx,{fullWidth:!0,color:_.color,size:s,disabled:_.disabled,onClick:n,text:_.text})}var A=o(355600),S=o(209716),z=o(936776),I=o(172071),B=o(730447),k=o(717615),T=o(19121),E=o(231947),M=o(412456);function D({boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:o,shareSuggestions:n}){const{logContextEvent:s}=(0,b.v)(),r=(0,a.ZP)(),{anyEnabled:l}=(0,m.t)("web_m10n_business_access_orbac_ga")(),h=(0,T.Z)(),u=(0,k.Z)(),_=l?(0,E.lJ)(h,u):"",[p,g]=(0,i.useState)(""),[x,f]=(0,i.useState)([]),[v,y]=(0,i.useState)({}),[P,j]=(0,i.useState)({}),D=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||r._('On Pinterest', 'is a user of Pinterest', 'is a user of Pinterest');case"emailcontact":case"email_share_suggestion":return e.email||r._('Email Contact', 'invited user has an email', 'invited user has an email')}return""},Z=(i,n)=>{const{id:r,full_name:a,debug_reason:l}=i;let d="";l&&(d=l.reason),((t,o)=>{s({event_type:101,component:13029,element:p?1044:1039,object_id_str:e,view_type:5,view_parameter:3059,aux_data:{entered_query:p,result_index:t+1,rs:o}})})(n,d);const c={...v};c[r]=!0,y(c),(0,M.pS)(e,[r],_).then((()=>{o(a,!0)})).catch((e=>{o(a,!1,e);const t={...v};t[r]=!1,y(t)})).finally(t)};let R=n;return p&&(R=x),(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:0,children:[(0,c.jsx)(d.xu,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:(0,c.jsx)(d.xu,{flex:"grow",children:(0,c.jsx)(B.Z,{onTypeaheadSuggestionsChange:e=>{I.Z.increment("web_contacts_search",1,{source:"board_invite"}),f(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25,..._?{orbac_subject_id:_}:Object.freeze({})},value:p,children:(0,c.jsx)(d.xu,{paddingX:4,children:(0,c.jsx)(d.Um,{accessibilityLabel:r._('Search for a name or email', 'accessible label for contact search input field', 'accessible label for contact search input field'),id:"search",onChange:({value:e})=>{g(e),s({event_type:4113,component:13029,element:1043,view_parameter:3059,aux_data:{entered_query:e}})},placeholder:r._('Search by name or email', 'search input field prompt for finding contacts', 'search input field prompt for finding contacts'),size:"lg",value:p})})})})}),(0,c.jsxs)(d.xu,{overflow:"scrollY",maxHeight:414,children:[R.map(((t,o)=>{const i=t.username?`/${t.username}/`:null;return(0,c.jsx)(d.xu,{children:(0,c.jsx)(A.Z,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:D(t),accessory:(0,c.jsx)(w,{boardId:e,invitedUserId:t.id,isInvited:(n=t.id,!!v[n]),onClick:()=>Z(t,o),buttonSize:"lg"}),linkURL:i})},o);var n})),p&&((0,z.Z)(p)?(0,c.jsx)(A.Z,{name:p,title:p,accessory:(L=!!P[p],O=()=>{const i=p;if(!(0,z.Z)(i))return;const n={...P};n[i]=!0,j(n),(0,M.OA)(e,[i],_).then((()=>{o(i,!0),g("")})).catch((e=>{o(i,!1,e);const t={...P};t[i]=!1,j(t)})).finally(t)},F="lg",(0,c.jsx)(d.zx,{fullWidth:!0,color:L?"gray":"red",disabled:!!L,size:F,onClick:O,text:L?r._('Invited', '[button] disabled button status text when a user has been invited to a board', '[button] disabled button status text when a user has been invited to a board'):r._('Invite', '[button] invite someone to collaborate on a board', '[button] invite someone to collaborate on a board')}))}):(0,c.jsx)(S.Z,{iconNode:(0,c.jsx)(C.Z,{name:p,size:"md"}),title:p,subtitle:r._('Keep typing!', 'boardCollabInviterForm.label', 'Message for user to keep typing')}))]})]});var L,O,F}var Z=o(349700);function R({boardId:e}){const{logContextEvent:t}=(0,b.v)(),o=(0,a.ZP)(),n=(0,l.F9)(),{anyEnabled:s}=(0,m.t)("web_m10n_business_access_orbac_ga")(),h=(0,p.Z)(),{refresh:u}=(0,j.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...s&&h?{orbac_subject_id:h}:{}},noCache:!0}),{refresh:_}=(0,j.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval",...s&&h?{orbac_subject_id:h}:{}},noCache:!0}),{data:g,isLoaded:x}=(0,j.Z)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board",...h?{orbac_subject_id:h}:{}},noCache:!0});(0,i.useEffect)((()=>{t({event_type:7120,object_id_str:e,view_type:5,view_parameter:3059})}),[]),(0,i.useEffect)((()=>{if(x){const e=g&&g.length>0?7511:7512;t({event_type:e,component:13305,element:10592,view_type:5,view_parameter:3059})}}),[x]);const f=(e,t=!1)=>{n.showOneToast((({hideToast:o})=>(0,c.jsx)(r.ZP,{duration:3e3,onHide:o,text:e,variant:t?"error":void 0})))};return x?(0,c.jsx)(D,{boardId:e,onInvitesDidUpdate:()=>{u(),_()},onInviteDidComplete:(e,t,i)=>{t?f(o._('1 invite sent!', 'BoardCollabInviteFormContainer.showInviteSuccessToast.text', 'Toast for successfully sending invitation of collaborating a board')):((e,t)=>{const i=o._('Failed to invite {{userIdentifier}} to collaborate', 'Toast for failing to send invitation of collaborating a board', 'Toast for failing to send invitation of collaborating a board');f(t&&t.message?t.message:(0,Z.nk)(i,{userIdentifier:e}).join(""),!0)})(e,i)},shareSuggestions:g||[]}):(0,c.jsx)(d.xu,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:(0,c.jsx)(d.$j,{accessibilityLabel:o._('Loading contacts', 'BoardCollab.BoardCollabInviteFormContainer', 'Accessibility label on loading spinner'),show:!0})})}const L="INVITE_SETTING",O="REQUEST_TO_JOIN_SETTING";function F({boldHeading:e,setting:t,viewerIsOwner:o}){const n=(0,a.ZP)(),s={0:{name:n._('Do (almost) everything', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:n._('Add, move or delete Pins and sections, comment and react', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting')},1:{name:n._('Save and comment', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:o?n._('Save Pins, organize them, comment and react', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting'):n._('Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!', 'save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab', 'Text explaining collaborator permission setting')},[L]:{name:n._('Invite other people', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:n._('Collaborators can invite others to this board', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting')},[O]:{name:n._('Board requests', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:n._('People can request to join this board', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting')}};return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xv,{color:"default",size:e?"300":"200",weight:e?"bold":"normal",children:s[t].name}),(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(d.xv,{color:"subtle",size:"300",children:s[t].description})})]})}var N=o(573799),U=o(121151),H=o(88301),W=o(925927),$=o(780280);function G({board:e,currentPermissionLevel:t,fromBoardEditModal:o,navigateToPermissions:n,onDismiss:s}){var r;const l=(0,a.ZP)(),h="number"==typeof e.collaborator_count&&e.collaborator_count>0,[u,_]=(0,i.useState)(!h),p=(0,$.B)(),g=(0,T.Z)(),m=(0,W.k6)(),b=g.isAuth&&(null===(r=e.owner)||void 0===r?void 0:r.id)===g.id,x=b||e.collaborator_invites_enabled,f=u&&!h||!u;return(0,c.jsx)(H.k,{boardName:e.name,pendingOwnershipTransfer:e.pending_ownership_transfer,viewerIsOwner:b,children:(0,c.jsx)(U.ZP,{_dangerouslyDisableScrollBoundaryContainer:!0,accessibilityModalLabel:u?l._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a modal'):l._('Collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a modal'),footer:x&&!u?(0,c.jsx)(d.iP,{onTap:()=>_(!0),rounding:8,children:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.hU,{accessibilityLabel:l._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'accessibility label on icon button'),icon:"add",bgColor:"red",iconColor:"white"}),(0,c.jsx)(d.xu,{paddingX:3,children:(0,c.jsx)(d.xv,{size:"300",weight:"bold",children:l._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Clickable text to show invite form')})})]})}):null,heading:(0,c.jsxs)(d.xu,{padding:8,children:[o&&(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!p.isRTL,right:p.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:l._('Back', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a button'),icon:"arrow-back",iconColor:"darkGray",onClick:s})}),(0,c.jsx)(d.X6,{align:"center",size:"500",children:u?l._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Heading for a modal'):l._('Collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Heading for a modal')})]}),onDismiss:s,children:(0,c.jsxs)(d.xu,{marginBottom:5,children:[f&&(0,c.jsxs)(d.xu,{paddingX:6,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:b?l._('Collaborators can...', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Text before explaining current collaborator permission setting'):l._('You can...', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Text before explaining current collaborator permission setting')})}),(0,c.jsxs)(d.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,c.jsx)(d.xu,{width:"60%",children:(0,c.jsx)(F,{boldHeading:!0,viewerIsOwner:b,setting:t})}),b&&(0,c.jsx)(d.hU,{accessibilityLabel:l._('Edit board permissions', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on icon button'),icon:"arrow-forward",onClick:n})]})]}),u?(0,c.jsxs)(d.xu,{paddingX:2,children:[(0,c.jsx)(y,{boardId:e.id}),(0,c.jsx)(R,{boardId:e.id})]}):(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{paddingX:6,paddingY:5,children:(0,c.jsx)(d.xv,{size:"100",children:l._('Collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Header before listing collaborators on a group board')})}),(0,c.jsx)(N.Z,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=g.isAuth?`/${g.username}`:"/";m.replace(e)},renderInvite:(e,t,o)=>{if(!e.invited_user)return null;const i={invite:e,invitedUser:e.invited_user,onBoardLeave:t,onInviteDidUpdate:o,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(P.Z,{...i})}})]})]})})})}var q=o(966338),V=o(162158);function Y({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:o},currentPermissionLevel:n,navigateToCollaborators:s,onDismiss:r}){const{logContextEvent:l}=(0,b.v)(),h=(0,a.ZP)(),[u,_]=(0,i.useState)(n),[p,g]=(0,i.useState)(e),[m,x]=(0,i.useState)(t),[f,v]=(0,i.useState)(!1),y=(0,$.B)(),P=(0,q.useDispatch)();return(0,c.jsx)(U.ZP,{accessibilityModalLabel:h._('Board permissions', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a modal'),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!y.isRTL,right:y.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:h._('Back', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a button'),icon:"arrow-back",iconColor:"darkGray",onClick:s})}),(0,c.jsx)(d.X6,{align:"center",size:"500",children:h._('Collaborators can...', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Heading for a modal')}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:y.isRTL,right:!y.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:h._('Close', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a button'),icon:"cancel",iconColor:"darkGray",onClick:r})})]}),footer:(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,c.jsx)(d.zx,{color:"red",disabled:f||u===n&&p===e&&m===t,onClick:()=>{v(!0);const i={},s={view_type:5,view_parameter:3472};p!==e&&(i.collaborator_invites_enabled=p,l({event_type:p?106:107,element:11896,...s})),u!==n&&(i.collaborator_permissions_setting=u,l({event_type:8841,...s})),m!==t&&(i.collaborator_requests_enabled=m),P((0,V.V)(o,i)).then((()=>r()))},size:"lg",text:h._('Done', 'save.board.BoardPage.ModalContents.PermissionsModal', 'Submit button on a form')})}),onDismiss:r,children:(0,c.jsxs)(d.xu,{paddingX:12,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:h._('Permissions', 'save.board.BoardPage.ModalContents.PermissionsModal', 'Heading before listing possible board permissions')})}),(0,c.jsxs)(d.kC,{alignItems:"center",children:[(0,c.jsx)(d.EU,{checked:0===u,id:"ALL",onChange:()=>_(0),value:0}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:0})})]}),(0,c.jsxs)(d.xu,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[(0,c.jsx)(d.EU,{checked:1===u,id:"SAVE_ONLY",onChange:()=>_(1),value:1}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:1})})]}),(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:h._('Invitations', 'save.board.BoardPage.ModalContents.PermissionsModal', 'Heading before group board invitation permission form setting')})}),(0,c.jsxs)(d.xu,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[(0,c.jsx)(d.XZ,{checked:p,id:"inviteSetting",onChange:({checked:e})=>g(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:L})})]}),(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.XZ,{checked:m,id:"inviteSetting",onChange:({checked:e})=>x(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:O})})]})]})})}function X({board:e,fromBoardEditModal:t,onDismiss:o}){const[n,s]=(0,i.useState)("collaboratorsView"),{collaborator_permissions_setting:r}=e;return"collaboratorsView"===n?(0,c.jsx)(G,{board:e,currentPermissionLevel:r,fromBoardEditModal:t,navigateToPermissions:()=>s("permissionsView"),onDismiss:o}):(0,c.jsx)(Y,{board:e,currentPermissionLevel:r,navigateToCollaborators:()=>s("collaboratorsView"),onDismiss:o})}},565486:(e,t,o)=>{o.d(t,{Z:()=>Ye});var i=o(966338),n=o(552091),s=o(499128),r=o(898781),a=o(349700),l=o(883119),d=o(343341),c=o(683190),h=o(785893);function u({shouldArchive:e,board:t,onClose:o,onConfirm:u}){const _=(0,r.ZP)(),p=(0,i.useDispatch)(),{showOneToast:g}=(0,d.F9)();return(0,h.jsx)(n.Z,{confirmButtonLabel:e?_._('Archive', 'BoardPage.ModalContents.BoardModalManager', 'button label on confirming board archive'):_._('Unarchive', 'BoardUnarchiveConfirmation.BoardEditConfirmation.buttonLabel', 'button label on confirming board unarchive'),heading:e?_._('Archive this board?', 'BoardPage.ModalContents.BoardModalManager', 'modal heading for board archive confirmation'):_._('Unarchive this board?', 'BoardUnarchiveConfirmation.BoardEditConfirmation.heading', 'modal heading for board unarchive confirmation'),message:(0,a.nk)(e?_._('If you archive {{ boardName }}, you won\u2019t be able to save Pins to it. We\u2019ll hide it from your profile and stop using it for recommendations. (Don\u2019t worry: You can unarchive your board to undo this!)', 'BoardPage.ModalContents.BoardModalManager', 'Confirmation message when archiving a board'):_._('If you unarchive {{ boardName }}, it will show up on your profile and you\u2019ll be able to save new Pins to it.', 'BoardUnarchiveConfirmation.BoardEditConfirmation.message', 'Confirmation message when unarchiving a board'),{boardName:(0,h.jsx)(l.xv,{inline:!0,weight:"bold",children:t.name},t.name)}),onCancel:o,onConfirm:()=>{p(e?(0,c.xk)(t.id):(0,c.YV)(t.id)),u(),o(),g((({hideToast:o})=>{var i;return(0,h.jsx)(s.ZP,{imageUrl:null!==(i=t.image_cover_url)&&void 0!==i?i:"",onHide:o,text:e?(0,a.nk)(_._('Archived {{ boardName }}', 'board.BoardPage.ModalContents.BoardArchiveConfirmation', 'Toast text on complete archiving board'),{boardName:t.name}).join(""):(0,a.nk)(_._('Unarchived {{ boardName }}', 'BoardUnarchiveConfirmation.handleConfirmUnarchive.message', 'Toast text on completing unarchiving board'),{boardName:t.name}).join("")})}))}})}var _=o(563126),p=o(402524),g=o(667294),m=o(121151),b=o(56291);function x({fetchMore:e,followers:t,followersCount:o,isFetching:i,onDismiss:n}){const s=(0,r.ZP)();return(0,h.jsx)(m.ZP,{accessibilityModalLabel:s._('Board Followers', 'boardFollowersList.modal.accessibilityLabelForModal', 'Accessibility label for modal'),heading:(0,h.jsx)(l.xu,{display:"flex",justifyContent:"center",padding:8,children:(0,h.jsx)(l.X6,{size:"500",accessibilityLevel:1,children:(0,a.nk)(s.ngettext('{{ followersCount }} Follower', '{{ followersCount }} Followers', o, 'Label for the number of people following a board', 'Label for the number of people following a board'),{followersCount:o.toLocaleString()})})}),onDismiss:n,size:"sm",children:(0,h.jsx)(l.xu,{maxHeight:600,paddingX:6,overflow:"auto",children:t&&t.length>0?(0,h.jsxs)(g.Fragment,{children:[t.map((e=>(0,h.jsx)(b.Z,{user:e},e.id))),o-t.length>0?(0,h.jsx)(l.xu,{display:"flex",justifyContent:"center",padding:5,marginBottom:2,children:(0,h.jsx)(l.zx,{disabled:i,onClick:e,size:"lg",text:s._('See more', 'BoardFollowerList.SeeMore', 'Button to load more items in the board follower list')})}):null]}):(0,h.jsx)(l.xu,{marginBottom:8,children:(0,h.jsx)(l.$j,{accessibilityLabel:s._('Loading board followers', 'BoardModalManager.Spinner', 'Spinner which shows when loading board followers'),show:!0})})})})}var f=o(27255),v=o(784590);function y({boardId:e,followersCount:t,onDismiss:o}){const{data:i=[],fetchMore:n,isFetching:s}=(0,v.Z)({name:"BoardFollowersResource",options:{board_id:e,page_size:f.Z.MAX_FETCH_NUM_FOLLOWERS_PER_PAGE}});return(0,h.jsx)(x,{fetchMore:n,followers:i,followersCount:t,isFetching:s,onDismiss:o})}var P=o(89061),C=o(694379);const j=({handleClick:e,selectedBoard:t,sourceBoard:o,targetBoardCandidates:i})=>{const n=(0,r.ZP)(),s=(0,h.jsx)(l.xv,{weight:"bold",inline:!0,children:null==o?void 0:o.name}),d=(0,h.jsx)(l.xv,{weight:"bold",inline:!0,children:null==o?void 0:o.pin_count});return 0===i.length?(0,h.jsx)(l.xv,{children:n._('There is no board to merge this board into.', 'BoardMergeModal.NoBoards.Text', 'helper text for selecting merge target board')}):o?(0,h.jsxs)(l.xu,{maxWidth:540,maxHeight:532,marginStart:4,marginEnd:4,children:[(0,h.jsx)(l.xv,{size:"300",align:"center",children:(0,a.nk)(n._('Your board {{ sourceBoardName }} and all {{ sourceBoardPinCount }} pins will be gone for good. You won\u2019t be able to get them back.', 'BoardMergeModal.Merge.Text', 'helper text for merging board'),{sourceBoardName:s,sourceBoardPinCount:d})}),(0,h.jsx)(l.xu,{marginTop:4,marginStart:2,children:(0,h.jsx)(l.xv,{size:"100",children:n._('All boards', 'MergeModal.AllBoards.Text', 'all boards section title')})}),i.map((o=>{var i,s;return(0,h.jsx)(l.iP,{onTap:()=>e(o),children:(0,h.jsxs)(l.xu,{color:(null==t?void 0:t.id)===o.id?"lightGray":"transparent",display:"flex",justifyContent:"between",alignItems:"center",height:64,padding:2,rounding:2,children:[(0,h.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:[(0,h.jsx)(l.zd,{height:48,width:48,rounding:2,children:(0,h.jsx)(l.Ee,{fit:"cover",src:o.image_cover_url||"",color:"steelblue",naturalHeight:48,naturalWidth:48,alt:n._('Board Cover Image', 'MergeModal.Board.CoverImage', 'board cover image')})}),(0,h.jsxs)(l.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,children:[(0,h.jsx)(l.xu,{marginBottom:1,children:(0,h.jsx)(l.xv,{size:"300",weight:"bold",children:o.name})}),(0,h.jsx)(l.xv,{size:"100",children:(0,a.nk)(n.ngettext('{{ count }} Pin', '{{ count }} Pins', null !== (i = o.pin_count) && void 0 !== i ? i : 0, 'boardEdit.boardMergeModalBody.pinCount', 'label for n amount of pins'),{count:(0,h.jsx)(C.Z,{value:null!==(s=o.pin_count)&&void 0!==s?s:0})})})]})]}),(0,h.jsxs)(l.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:["secret"===o.privacy&&(0,h.jsx)(l.xu,{marginEnd:3,children:(0,h.jsx)(l.JO,{icon:"lock",color:"default",accessibilityLabel:n._('Private board icon', 'MergeModal.Board.Private.Icon', 'private board accesibility label')})}),o.is_collaborative&&(0,h.jsx)(l.xu,{marginEnd:3,children:(0,h.jsx)(P.Z,{isCompact:!0,board:o})}),!!o.section_count&&(0,h.jsx)(l.JO,{icon:"arrow-forward",color:"default",accessibilityLabel:n._('Board section icon', 'MergeModal.Board.Section.Icon', 'board secetion accesibility label')})]})]})},o.id)}))]}):null};function w(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class A extends g.Component{constructor(...e){super(...e),w(this,"state",{selectedTargetBoard:null}),w(this,"handleChange",(e=>{this.setState({selectedTargetBoard:e})})),w(this,"handleSubmit",(()=>{const{onSubmit:e}=this.props,{selectedTargetBoard:t}=this.state;t&&e(t)})),w(this,"renderModalBody",(()=>{const{boardsResource:e,sourceBoardId:t}=this.props,{selectedTargetBoard:o}=this.state,{data:i}=e;if(!i)return(0,h.jsx)(l.$j,{accessibilityLabel:this.props.i18n._('Loading board list', 'spinner accessibility label', 'spinner accessibility label'),show:!0});const n=i.find((e=>e.id===t)),s=i.filter((e=>e.id!==t));return(0,h.jsx)(j,{handleClick:this.handleChange,selectedBoard:o,sourceBoard:n,targetBoardCandidates:s})}))}render(){const{onCancel:e}=this.props,{selectedTargetBoard:t}=this.state,o=(0,h.jsxs)(l.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:6,children:[(0,h.jsx)(l.xu,{}),(0,h.jsx)(l.X6,{size:"500",children:this.props.i18n._('Combine boards', 'BoardMergeModal.CombineBoards', 'title for board merging modal')}),(0,h.jsx)(l.iP,{fullWidth:!1,onTap:e,accessibilityLabel:this.props.i18n._('Close merge boards modal', 'BoardMergeModal.Close.TapArea', 'close icon for board merging modal'),children:(0,h.jsx)(l.JO,{icon:"cancel",color:"default",size:18,accessibilityLabel:this.props.i18n._('Close merge boards modal', 'BoardMergeModal.Close.Label', 'close icon for board merging modal')})})]});return(0,h.jsx)(m.ZP,{accessibilityModalLabel:this.props.i18n._('Move Pins to', 'BoardEdit.BoardMergeModal.accessibilityLabel', 'accessibility label for board merging modal'),heading:o,onDismiss:e,footer:(0,h.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,h.jsx)(l.zx,{color:"red",disabled:!t,onClick:this.handleSubmit,size:"lg",text:this.props.i18n._('Done', 'BoardMergeModal.Button.Submit', 'button for merging a board')})}),children:(0,h.jsx)(l.xu,{padding:8,children:this.renderModalBody()})})}}function S(e){const t=(0,r.ZP)(),o=(0,v.Z)({name:"BoardsResource",options:{privacy_filter:"all",sort:"alphabetical",field_set_key:"detailed",username:"me"},noCache:!0});return(0,h.jsx)(A,{...e,boardsResource:o,i18n:t})}var z=o(672643);const I="236x",B="474x",k="736x",T=e=>t=>t.replace(/pinimg\.com\/\d+x\d*\//,`pinimg.com/${e}/`),E=e=>[I,B,k].map(((t,o)=>`${T(t)(e)} ${o+1}x`)).join(", ");function M({boardId:e,customizable:t}){const o=(0,v.Z)({name:"BoardFeedResource",options:{board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:t?60:4}}),i=!o.isLoaded,n=(o.data||[]).filter((({type:e})=>"pin"===e)).map((({images:e})=>e["236x"]));return(0,h.jsx)(z.ZP,{getDownloadImageURL:T("1200x"),getMainImageURL:T(B),getThumbnailImageSrcSet:E,id:e,images:n,isLoadingImages:i,customizable:t})}function D({onCompleteBulkDelete:e,onClearModal:t,pinCountToDelete:o}){const i=(0,r.ZP)(),n=1===o?i._('Delete this Pin', ' - ', ' -- '):i._('Delete these Pins', ' - ', ' -- '),s=1===o?i._('Are you sure you want to permanently delete this Pin?', ' - ', ' -- '):i._('Are you sure you want to permanently delete these Pins?', ' - ', ' -- ');return(0,h.jsx)(m.ZP,{accessibilityModalLabel:i._('delete Pins', 'accessibility label for bulk delete modal', 'accessibility label for bulk delete modal'),footer:(0,h.jsxs)(l.xu,{children:[(0,h.jsx)(l.xu,{marginBottom:2,children:(0,h.jsx)(l.zx,{fullWidth:!0,text:i._('Cancel', ' - ', ' -- '),onClick:t})}),(0,h.jsx)(l.zx,{fullWidth:!0,text:i._('Delete', ' - ', ' -- '),color:"red",onClick:()=>{e(),t()}})]}),heading:n,onDismiss:t,children:(0,h.jsx)(l.xu,{paddingX:8,children:(0,h.jsx)(l.xv,{children:s})})})}var Z=o(879089);function R(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class L extends g.Component{constructor(...e){super(...e),R(this,"state",{chosenBoardId:null}),R(this,"handleChosenBoardChange",(e=>{this.setState({chosenBoardId:e.id})})),R(this,"handleConfirm",(()=>{const{onCopyToBoard:e,onClearModal:t}=this.props,{chosenBoardId:o}=this.state;o&&(e(o),t())}))}render(){const{onClearModal:e,pinCountToCopy:t}=this.props,{chosenBoardId:o}=this.state,i=1===t?this.props.i18n._('Pick another board for this Pin', ' - ', ' -- '):this.props.i18n._('Pick another board for these Pins', ' - ', ' -- ');return(0,h.jsx)(m.ZP,{accessibilityModalLabel:this.props.i18n._('Copy your pins to a different board', 'BoardPage.ModalContents.BulkEditBoardPicker.accessibilityModalLabel', 'Accessiblilty modal label'),heading:i,onDismiss:e,footer:(0,h.jsxs)(l.xu,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:[(0,h.jsx)(l.xu,{paddingX:1,children:(0,h.jsx)(l.zx,{fullWidth:!0,onClick:e,text:this.props.i18n._('Cancel', ' - ', ' -- ')})}),(0,h.jsx)(l.xu,{paddingX:1,children:(0,h.jsx)(l.zx,{fullWidth:!0,disabled:!o,onClick:this.handleConfirm,text:this.props.i18n._('Copy', ' - ', ' -- '),color:"red"})})]}),children:(0,h.jsx)(l.xu,{padding:8,minHeight:400,children:(0,h.jsx)(Z.Z,{onBoardChosen:this.handleChosenBoardChange})})})}}function O(e){const t=(0,r.ZP)();return(0,h.jsx)(L,{...e,i18n:t})}var F=o(657986),N=o(420632),U=o(444445);function H(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const W=()=>{};class $ extends g.PureComponent{constructor(...e){super(...e),H(this,"state",{isHovered:!1}),H(this,"hover",(()=>this.setState({isHovered:!0}))),H(this,"unhover",(()=>this.setState({isHovered:!1}))),H(this,"handlePinClick",(({event:e})=>{const{save:t,unsave:o,saved:i}=this.props;e.preventDefault(),e.stopPropagation(),i?o():t()}))}render(){const{children:e,boardName:t,saved:o}=this.props,{isHovered:i}=this.state;return(0,h.jsxs)(l.xu,{position:"relative",children:[(0,h.jsx)(l.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,h.jsx)(l.iP,{accessibilityLabel:this.props.i18n._('Save this Pin', 'jumpstartBoardPinWrapper.tapArea.accessibilityLabel', 'Accessibility label describing purpose of tap area'),fullHeight:!0,fullWidth:!0,onMouseEnter:this.hover,onMouseLeave:this.unhover,onTap:this.handlePinClick,children:(i||o)&&(0,h.jsx)(l.xu,{paddingX:4,paddingY:4,position:"absolute",top:!0,width:U.yF,zIndex:new l.Ry(1),children:o?(0,h.jsxs)(l.kC,{alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(l.xu,{flex:"grow",children:(0,h.jsx)(N.Z,{isNewlySaved:!0,url:null,name:t})}),(0,h.jsx)("div",{className:"jumpstart-undo-icon",children:(0,h.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Undo', 'Undo saving a pin to a board', 'Undo saving a pin to a board'),bgColor:"transparentDarkGray",icon:"refresh",iconColor:"white",onClick:W})})]}):(0,h.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,h.jsx)(l.xu,{children:(0,h.jsx)(F.Z,{onClick:W,saved:o,variant:"lego"})})})})})}),(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}}function G(e){const t=(0,r.ZP)();return(0,h.jsx)($,{...e,i18n:t})}var q=o(880544),V=o(301921),Y=o(407043);function X(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class J extends g.PureComponent{constructor(...e){super(...e),X(this,"scollRef",(0,g.createRef)()),X(this,"clickLogging",(e=>{const{board:t}=this.props;this.props.logContextEvent({event_type:101,component:13380,element:10599,aux_data:{reason:e,board_id:t.id}})})),X(this,"handleSave",(()=>{this.clickLogging("save")})),X(this,"handleDelete",(()=>{this.clickLogging("delete")})),X(this,"renderPin",(({data:e,itemIdx:t})=>{const{board:o}=this.props;return(0,h.jsx)(q.Z,{pin:e,target:{board:o},onSave:this.handleSave,onDelete:this.handleDelete,eventContext:{viewType:5,viewParameter:3173,element:10599},children:({save:i,unsave:n,saved:s})=>{var r;return(0,h.jsx)(G,{save:i,unsave:n,saved:s,boardName:null!==(r=o.name)&&void 0!==r?r:"",children:(0,h.jsx)(V.default,{attributionOption:"hide",blockClickEvents:!0,pin:e,pinId:e.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},surface:"JumpstartBoard",trackingParameters:{slotIndex:t,viewParameter:3173,viewType:5}})})}})}))}render(){const{resource:e}=this.props;return(0,h.jsxs)(l.xu,{maxHeight:600,maxWidth:ee,overflow:"auto",ref:this.scollRef,padding:4,children:[e.isLoaded&&e.data&&(0,h.jsx)(l.Rk,{comp:this.renderPin,columnWidth:U.yF,gutterWidth:U.$H,items:e.data,scrollContainer:()=>this.scollRef.current,loadItems:e.fetchMore}),(0,h.jsx)(l.$j,{accessibilityLabel:this.props.i18n._('Loading pins', 'Loading indicator', 'Loading indicator'),show:e.isFetching})]})}}function K({board:e}){const{logContextEvent:t}=(0,Y.v)(),o=(0,r.ZP)(),i=(0,v.Z)({name:"BoardContentRecommendationResource",options:{type:"board",id:e.id,__track__referrer:21}});return(0,h.jsx)(J,{board:e,resource:i,i18n:o,logContextEvent:t})}var Q=o(925927);const ee=1112;function te({board:e,onDismiss:t}){const o=(0,r.ZP)(),i=(0,Q.k6)(),n=(0,Q.TH)(),s=()=>{const e={...n&&n.state||{}};e.newBoard&&(delete e.newBoard,i.replace({...n,state:e})),t()};return(0,h.jsx)(m.ZP,{accessibilityModalLabel:o._('add pins to empty board modal', 'accessibility label for modal', 'accessibility label for modal'),allowScroll:!0,heading:o._('Save some Pins to your new board', 'jumpstartBoardModal.heading', 'heading for modal to add Pins to an empty board'),onDismiss:s,size:ee,footer:(0,h.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,h.jsx)(l.zx,{color:"red",onClick:s,text:o._('Done', 'done adding pins to empty board', 'done adding pins to empty board'),accessibilityLabel:o._('Done', 'done adding pins to empty board', 'done adding pins to empty board')})}),children:(0,h.jsx)(K,{board:e})})}var oe=o(740887),ie=o(275903),ne=o(843747),se=o(931319),re=o(957119);function ae(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class le extends g.Component{constructor(...e){super(...e),ae(this,"getSections",(e=>{var t,o,i;const{board:n,canMoveToOtherBoards:s}=this.props,r=null!==(t=null===(o=this.props.boardsResource.data)||void 0===o?void 0:o.all_boards)&&void 0!==t?t:[],a=null!==(i=this.props.sectionsResource.data)&&void 0!==i?i:[],l=r.filter((e=>e.id!==n.id));return e.length>=2?[a.length?{items:(0,re.j)([n],e),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},{items:(0,re.j)(a,e,"title"),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}},s?{items:(0,re.j)(l,e)}:{items:[]}]:[a.length?{title:this.props.i18n._('Current board', 'title in move pins flow', 'title in move pins flow'),items:[n,...a],customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},s?{title:this.props.i18n._('Other boards', 'heading text for a list of a user\'s other boards in the move pins flow', 'heading text for a list of a user\'s other boards in the move pins flow'),items:l}:{items:[]}]})),ae(this,"isDisabled",(e=>e.id===this.props.selectedRowId))}render(){const{board:e,boardsResource:{error:t,isLoaded:o},boardSavedTo:i,onRowSelected:n,onSectionCreate:s,pinId:r,sectionsResource:{error:a,isLoaded:l},selectedRowId:d}=this.props;return(0,h.jsx)(se.Z,{boardSavedTo:i,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),disabledRowId:d,hasLoadError:!!t||!!a,isLoaded:o&&l,getSections:this.getSections,onCreate:s,onSelected:n,pinId:r},e.id)}}function de(e){const t=(0,r.ZP)(),o=(0,v.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}}),i=(0,v.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",onlyFetchBoards:!0}});return(0,h.jsx)(le,{...e,boardsResource:i,i18n:t,sectionsResource:o})}function ce({board:e,boardSavedTo:t,onMove:o,onSectionedBoardSelect:i,onSectionCreate:n,selectedRowId:s,showOtherBoards:a}){const d=(0,r.ZP)(),c=a&&!e.section_count?d._('Choose board', ' - ', ' -- '):d._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section');return(0,h.jsxs)(l.xu,{display:"flex",direction:"column",color:"default",flex:"grow",top:!0,bottom:!0,right:!0,position:"absolute",rounding:2,width:330,dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[(0,h.jsx)(l.xu,{paddingY:3,paddingX:3,children:(0,h.jsx)(l.X6,{size:"400",children:c})}),(0,h.jsx)(de,{board:e,boardSavedTo:t,canMoveToOtherBoards:a,onRowSelected:t=>{if("board_section"===t.type){o(e,t)}else if("board"===t.type){const n=t;n&&n.id!==e.id&&(n.section_count||0)>0?i(n):o(n,null)}},onSectionCreate:n,selectedRowId:s})]})}var he=o(19121),ue=o(565497),_e=o(414327),pe=o(904411),ge=o(960673),me=o(396026),be=o.n(me);function xe({previewPin:e,extraPinCount:t,showFullImage:o}){if(!e)return(0,h.jsx)(ge.Z,{height:214,pin:null,rounded:!0,width:142});const{description:i,images:n={},dominant_color:s}=e,r=n["474x"],a=Math.min(217*r.height/r.width,450),l=o?a:214,d=o?217:142;return(0,h.jsx)(ge.Z,{additionalPinCount:t,height:l,pin:{description:i,dominantColor:s,imageUrl:r.url},rounded:!0,width:d})}function fe({pins:e}){const t=e.length>0&&e.length<=2?e.length:4,o=be()(0,t).map((o=>(0,h.jsx)(l.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{padding:3}},children:(0,h.jsx)(xe,{previewPin:e[o],extraPinCount:3===o?Math.max(e.length-t,0):0,showFullImage:1===e.length})},o)));return(0,h.jsx)(l.xu,{alignItems:"center",display:0===e.length||e.length>2?"inlineBlock":"flex",height:440,justifyContent:"center",width:296,children:o})}var ve=o(804081);function ye(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Pe extends g.Component{constructor(e){var t;super(e),ye(this,"showSuccessToast",(()=>{const{movedBoard:e,movedSection:t}=this.state,{board:o,inSelectAll:i,toastManagerContext:n}=this.props;if(i)n.showOneToast((({hideToast:e})=>(0,h.jsx)(s.ZP,{duration:ve.Au,onHide:e,text:this.props.i18n._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.')})));else if(e){var r;const i=t?(0,a.nk)(this.props.i18n._('Moved to {{sectionName}} in {{boardName}}', 'Toast for successfully moving pins to a section within a board', 'Toast for successfully moving pins to a section within a board'),{sectionName:t.title,boardName:e.name}).join(""):(0,a.nk)(this.props.i18n._('Moved to {{boardName}}', 'Toast for successfully moving pins to a different board', 'Toast for successfully moving pins to a different board'),{boardName:e.name}).join(""),l=t?`${null!==(r=e.url)&&void 0!==r?r:""}${t.slug}`:e.url;n.showOneToast((({hideToast:e})=>{var t;return(0,h.jsx)(s.ZP,{duration:ve.Au,href:l,imageUrl:null!==(t=o.image_cover_url)&&void 0!==t?t:"",onHide:e,text:i})}))}})),ye(this,"handleMove",((e,t)=>{const{board:o,boardSection:i,dispatch:n,inSelectAll:s,onCompleteMove:r,selectedPinIds:a}=this.props,l={boardId:o.id,sectionId:i&&i.id||null},d={boardId:e.id,sectionId:t&&t.id||null};if(l.boardId===d.boardId&&l.sectionId===d.sectionId)return;const c=d.sectionId||d.boardId;this._setBoardSavedTo(c,ve.SN.LOADING),n((0,ne.Z)({inverseSelection:s,selectedPinIds:a,source:l,target:d},this.props.i18n)).then((()=>{this._setBoardSavedTo(c,ve.SN.SUCCESS),this.setState({movedBoard:e,movedSection:t}),r()}))})),ye(this,"handleSectionedBoardSelect",(e=>{this.setState({initialBoardName:"",selectedBoard:e})})),ye(this,"handleSectionCreateComplete",(e=>{const{onCompleteMove:t,toastManagerContext:o}=this.props;t();const i=(0,a.nk)(this.props.i18n._('Moved to {{sectionName}} in {{boardName}}', 'moveSectionModal.handleSectionCreate.toast', 'Toast for successfully moving pins to a section within a board'),{sectionName:e.title,boardName:e.board.name});o.showOneToast((({hideToast:t})=>{var o;return(0,h.jsx)(s.ZP,{duration:ve.Au,href:`${null!==(o=e.board.url)&&void 0!==o?o:""}${e.slug}`,imageUrl:" ",onHide:t,text:i.join("")})}))})),ye(this,"handleShowCreate",(e=>{this.setState({initialBoardName:e,showCreate:!0})})),ye(this,"handleHideCreate",(()=>{const{onClearModal:e,sectionCount:t}=this.props;0===t?e():this.setState({initialBoardName:"",showCreate:!1})}));const{board:o,viewer:i,showCreateOnly:n}=e;this.state={boardSavedTo:null,initialBoardName:"",movedBoard:null,movedSection:null,selectedBoard:e.board,showCreate:n||(null===(t=o.owner)||void 0===t?void 0:t.id)!==i.id&&0===o.section_count}}componentWillUnmount(){const{dispatch:e,viewer:t}=this.props,{movedBoard:o,movedSection:i}=this.state;o&&(!i&&t.isAuth&&e((0,_e.jB)("BoardFeedResource",(0,ue.q)(o,t))),this.showSuccessToast())}_setBoardSavedTo(e,t){this.setState({boardSavedTo:{board:e,state:t}})}render(){const{board:e,boardSection:t,inSelectAll:o,onClearModal:i,selectedPinIds:n,selectedPins:s,shouldShowOtherBoards:r}=this.props,{boardSavedTo:a,initialBoardName:d,selectedBoard:c,showCreate:u}=this.state,_=o?330:660;return(0,h.jsx)(m.ZP,{accessibilityModalLabel:this.props.i18n._('Choose the section or board you want to move pins to', 'moveSectionModal.modal.accessibilityLabelForModal', 'Accessibility label for modal'),onDismiss:i,size:_,children:(0,h.jsxs)(l.xu,{color:"default",display:"flex",height:540,rounding:2,width:_,children:[!o&&(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},marginBottom:6,paddingX:2,children:(0,h.jsx)(fe,{pins:s})}),u?(0,h.jsx)(ie.Z,{board:c,completeCreateSectionAction:this.handleSectionCreateComplete,initialName:d,onClearModal:this.handleHideCreate,pinImport:{all:o,pinIds:n},showTitle:!0}):(0,h.jsx)(ce,{board:c,boardSavedTo:a,onMove:this.handleMove,onSectionCreate:this.handleShowCreate,onSectionedBoardSelect:this.handleSectionedBoardSelect,selectedRowId:t&&t.id||e&&e.id,showOtherBoards:r})]})})}}function Ce(e){var t;const o=(0,r.ZP)(),n=(0,i.useDispatch)(),s=(0,he.Z)(),a=s.isAuth?s.id:"",l=(0,i.useSelector)((({pins:t})=>e.selectedPinIds.reduce(((e,o)=>{const i=t[o];return i?e.concat([i]):e}),[]))),c=(0,i.useSelector)((({pins:t})=>(0,oe.Z)({action:2,board:e.board,viewer:s})||!e.selectedPinIds.some((e=>{const o=t[e];return o&&o.pinner&&o.pinner.id&&o.pinner.id!==a})))),u=(0,pe.gC)()(e.board.id),_=null!==(t=null==u?void 0:u.section_count)&&void 0!==t?t:0;return(0,h.jsx)(Pe,{...e,dispatch:n,sectionCount:_,selectedPins:l,shouldShowOtherBoards:c,toastManagerContext:(0,d.F9)(),viewer:s,i18n:o})}var je=o(529758),we=o(32383),Ae=o(837481);function Se(e,t){return t.isAuth&&(e||{}).id===t.id}var ze=o(124237),Ie=o(676297),Be=o(316298);function ke(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Te extends g.Component{constructor(...e){super(...e),ke(this,"state",{section:null}),ke(this,"handleSectionChange",(e=>{this.setState({section:e})})),ke(this,"handleSubmit",(()=>{const{onSubmit:e}=this.props,{section:t}=this.state;t&&e(t)}))}render(){const{board:e,boardSection:t,onCancel:o}=this.props,{section:i}=this.state;return(0,h.jsx)(m.ZP,{size:"md",accessibilityModalLabel:this.props.i18n._('Move Pins', 'BoardPage.ModalContents.SectionMergeModal', 'accessibility label for merging modal'),onDismiss:()=>{o()},heading:i?this.props.i18n._('Move Pins and delete section?', 'title for board section merging modal', 'title for board section merging modal'):this.props.i18n._('Move all Pins to...', 'title for board section merging modal', 'title for board section merging modal'),footer:(0,h.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,h.jsxs)(l.hE,{children:[(0,h.jsx)(l.zx,{onClick:o,text:this.props.i18n._('Cancel', ' - ', ' -- '),size:"lg"}),(0,h.jsx)(l.zx,{color:"red",disabled:!i,onClick:this.handleSubmit,text:this.props.i18n._('Move Pins and delete section', 'button for merging a board section', 'button for merging a board section'),size:"lg"})]})}),children:(0,h.jsx)(l.xu,{padding:8,minHeight:400,children:(0,h.jsx)(Be.Z,{board:e,mergingFromSectionId:t.id,onSectionChange:this.handleSectionChange,selectedSectionId:i?i.id:null})})})}}function Ee(e){const t=(0,r.ZP)();return(0,h.jsx)(Te,{...e,i18n:t})}var Me=o(820384),De=o(674578),Ze=o(6637),Re=o(281615),Le=o(4392);function Oe(e,t,o,i){return n=>Ze.ZP.create("BoardSectionEditResource",{section_id:t,title:o,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate({showError:!1}).then((t=>{const o=t.resource_response.data;return n(function(e,t){return o=>{const i=t.board;i&&i.id!==e?(o((0,Ae.H)(e,t.id)),o((0,De.Z)({feedId:e,feedType:Re.DV.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),o((0,c.Tq)(e,"pin_count")),o((0,Le.h)(i.id,t)),o((0,Me.Z)({feedId:i.id,feedType:Re.DV.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),o((0,c.Tq)(e,"pin_count"))):o({type:"SECTION_UPDATED",payload:{boardId:e,section:t}})}}(e,o)),n((0,_e.jB)("BoardSectionsRepinResource",{board_id:e})),o}))}var Fe=o(717615),Ne=o(980750),Ue=o(231947);function He(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class We extends g.Component{constructor(...e){super(...e),He(this,"state",{deleting:!1,editMode:"main",title:this.props.boardSection.title}),He(this,"handleSaveSection",(e=>{if(e.preventDefault(),this.saveDisabled())return;const{board:t,boardSection:o,dispatch:i,onSaveSection:n,viewer:s,orbacActingAs:r}=this.props,{title:a}=this.state,l=(0,Ue.lJ)(s,r);i(Oe(t.id,o.id,a.trim(),l)).then(n).catch((e=>this.setState({titleErrorMessage:e.message||this.props.i18n._('Invalid section name', 'error message of section name input field', 'error message of section name input field')})))})),He(this,"saveDisabled",(()=>this.state.title===this.props.boardSection.title||""===this.state.title.trim())),He(this,"handleChangeTitle",(({value:e})=>{this.setState({title:e,titleErrorMessage:void 0})})),He(this,"handleDeleteSectionButtonClick",(()=>{this.setState({editMode:"confirmDelete"})})),He(this,"handleMergeButtonClick",(()=>{this.setState({editMode:"merge"})})),He(this,"handleBackToMainMenu",(()=>{this.setState({editMode:"main"})})),He(this,"handleDeleteSection",(()=>{const{board:e,boardSection:t,dispatch:o,onDeleteSection:i,toastManagerContext:n,viewer:r,orbacActingAs:a}=this.props;if(this.state.deleting)return;const{id:l}=t;this.setState({deleting:!0}),o((0,Ae.Z)(e.id,l,(0,Ue.lJ)(r,a))).then((()=>{i(),n.showToast((({hideToast:e})=>(0,h.jsx)(s.ZP,{onHide:e,text:this.props.i18n._('Section deleted!', 'Toast for successfully deleting a board section', 'Toast for successfully deleting a board section')})))})).catch((e=>ze.Z.showError(e.message||this.props.i18n._('Failed to delete the section', 'error message for failed to delete section', 'error message for failed to delete section'))))})),He(this,"handleMergeSection",(e=>{var t;const{board:o,boardSection:i,dispatch:n,showBlockingActionToast:s,onDeleteSection:r}=this.props;this.state.deleting||(this.setState({deleting:!0}),this.props.logContextEvent({event_type:7173,object_id_str:i.id,aux_data:{merge_flow:"menu"}}),n((0,Ie.Z)(o.id,i.id,null!==(t=e.id)&&void 0!==t?t:"")).then(r).then((()=>{s({actionType:"merge",board:o,section:e})})).catch((e=>ze.Z.showError(e.message||this.props.i18n._('Failed to merge the section', 'error message for failed to merge section', 'error message for failed to merge section')))))}))}componentDidMount(){window.requestAnimationFrame((()=>{const e=this._textField;e&&(e.focus(),e.select())}))}render(){const{board:e,boardSection:t,onClearModal:o,viewer:i,orbacActingAs:s}=this.props,{title:r,titleErrorMessage:a,editMode:d}=this.state,c=Se(t.user,i)||(0,oe.Z)({action:10,board:e,viewer:i})||(0,Ue.KY)(i,e,s),u=e.section_count>1&&(Se(t.user,i)||(0,oe.Z)({action:13,board:e,viewer:i}));return"confirmDelete"===d?(0,h.jsx)(n.Z,{confirmButtonLabel:this.props.i18n._('Delete section', 'button for deleting a board section', 'button for deleting a board section'),onCancel:this.handleBackToMainMenu,onConfirm:this.handleDeleteSection,message:this.props.i18n._('Once you delete a section and all its Pins, you can\'t undo it!', ' - ', ' -- ')}):"merge"===d?(0,h.jsx)(Ee,{board:e,boardSection:t,onCancel:this.handleBackToMainMenu,onSubmit:this.handleMergeSection}):(0,h.jsx)(m.ZP,{accessibilityModalLabel:this.props.i18n._('Edit your section', ' - ', ' -- '),size:"md",onDismiss:o,heading:this.props.i18n._('Edit your section', ' - ', ' -- '),footer:(0,h.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,h.jsx)(l.sg,{span:6,children:(c||u)&&(0,h.jsxs)(l.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[c&&(0,h.jsx)(l.xu,{"data-test-id":"delete-section-button",paddingX:1,children:(0,h.jsx)(l.zx,{onClick:this.handleDeleteSectionButtonClick,text:this.props.i18n._('Delete', 'Delete button', 'Delete button')})}),u&&(0,h.jsx)(l.xu,{paddingX:1,children:(0,h.jsx)(l.zx,{onClick:this.handleMergeButtonClick,text:this.props.i18n._('Merge', 'button for merging a board section', 'button for merging a board section')})})]})}),(0,h.jsx)(l.sg,{span:6,children:(0,h.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,h.jsx)(l.xu,{marginEnd:3,children:(0,h.jsx)(l.zx,{text:this.props.i18n._('Cancel', ' - ', ' -- '),onClick:o})}),(0,h.jsx)(l.zx,{type:"submit",color:"red",text:this.props.i18n._('Save', ' - ', ' -- '),disabled:this.saveDisabled(),onClick:({event:e})=>{this.handleSaveSection(e)}})]})})]}),children:(0,h.jsx)("form",{onSubmit:this.handleSaveSection,children:(0,h.jsx)(l.xu,{display:"flex",direction:"column",padding:8,children:(0,h.jsx)(l.nv,{errorMessage:a,id:"title",label:this.props.i18n._('Name', ' - ', ' -- '),onChange:this.handleChangeTitle,ref:e=>{this._textField=e},size:"lg",value:r})})})})}}const $e=(0,i.connect)()((function(e){const{logContextEvent:t}=(0,Y.v)(),o=(0,r.ZP)(),i=(0,he.Z)(),n=(0,Fe.Z)(),s=(0,Ne.Z)();return(0,h.jsx)(We,{...e,i18n:o,viewer:i,orbacActingAs:n,logContextEvent:t,showBlockingActionToast:s,toastManagerContext:(0,d.F9)()})}));function Ge({source:e,target:t,onConfirm:o,onCancel:i}){const n=(0,r.ZP)();return(0,h.jsx)(m.ZP,{accessibilityModalLabel:n._('Move Pins and delete section?', 'title for board section merging confirmation', 'title for board section merging confirmation'),heading:n._('Move Pins and delete section?', 'title for board section merging confirmation', 'title for board section merging confirmation'),onDismiss:i,footer:(0,h.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,h.jsxs)(l.hE,{children:[(0,h.jsx)(l.zx,{onClick:i,text:n._('Cancel', ' - ', ' -- ')}),(0,h.jsx)(l.zx,{color:"red",onClick:o,text:n._('Move Pins and delete section', 'button for merging a board section', 'button for merging a board section')})]})}),children:(0,h.jsx)(l.xu,{padding:8,children:(0,h.jsx)(l.xv,{children:(0,a.nk)(n._('You\'re about to move all Pins from your {{ sourceName }} section to your {{ targetName }} section.', 'helper text for section merge confirmation modal', 'helper text for section merge confirmation modal'),{sourceName:(0,h.jsx)(l.xv,{inline:!0,weight:"bold",children:e.title},"source"),targetName:(0,h.jsx)(l.xv,{inline:!0,weight:"bold",children:t.title},"target")})})})})}var qe=o(607905),Ve=o(693680);function Ye({actions:e,board:t,boardSection:o,bulkEditSelectedPins:i,currentModal:n,groupPinsData:s,inSelectAll:r,onClearModal:a,mergeConfirmationModalProps:l}){var d,c;const{completeCreateSectionAction:g,completeMoveAction:m,onBoardArchiveChange:b,onBoardDelete:x,onBoardLeave:f,onBoardSectionDelete:v,onBoardSectionSave:P,onConfirmMergeSection:C,onCopyPinsToBoard:j,onDeletePins:w,onBoardMerge:A}=e;switch(n){case Ve.s.boardArchiveConfirmation:return b?(0,h.jsx)(u,{shouldArchive:!0,board:t,onClose:a,onConfirm:b}):null;case Ve.s.boardUnarchiveConfirmation:return b?(0,h.jsx)(u,{shouldArchive:!1,board:t,onClose:a,onConfirm:b}):null;case Ve.s.boardEdit:return(0,h.jsx)(p.Z,{boardId:t.id,onBoardArchiveChange:b,onBoardDelete:x,onBoardLeave:f,onClose:a});case Ve.s.bulkDelete:return w?(0,h.jsx)(D,{pinCountToDelete:i&&i.length||0,onCompleteBulkDelete:w,onClearModal:a}):null;case Ve.s.bulkCopy:return j?(0,h.jsx)(O,{currentBoardId:t.id,onCopyToBoard:j,onClearModal:a,pinCountToCopy:i&&i.length||0}):null;case Ve.s.collaboratorsAndPermissions:return(0,h.jsx)(_.Z,{board:t,onDismiss:a});case Ve.s.editSection:return o?(0,h.jsx)($e,{board:t,boardSection:o,onClearModal:a,onDeleteSection:v,onSaveSection:P}):null;case Ve.s.mergeBoard:return A?(0,h.jsx)(S,{onCancel:a,onSubmit:A,sourceBoardId:t.id}):null;case Ve.s.createSection:case Ve.s.moveSection:return!!i&&!!m&&(0,h.jsx)(Ce,{board:t,boardSection:o,inSelectAll:!!r,selectedPinIds:i,showCreateOnly:n===Ve.s.createSection,onClearModal:a,onCompleteMove:m});case Ve.s.sectionMergeConfirm:return l&&C?(0,h.jsx)(Ge,{onCancel:a,onConfirm:C,source:l.source,target:l.target}):null;case Ve.s.followers:return(0,h.jsx)(y,{boardId:t.id,onDismiss:a,followersCount:null!==(d=t.follower_count)&&void 0!==d?d:0});case Ve.s.pincode:return(0,h.jsx)(je.Z,{onHide:a,objectId:t.id,children:(0,h.jsx)(M,{boardId:t.id,customizable:!(null===(c=t.owner)||void 0===c||!c.is_partner)})});case Ve.s.jumpstartBoard:return(0,h.jsx)(te,{board:t,onDismiss:a});case Ve.s.simpleCreateSection:return g?(0,h.jsx)(we.Z,{selectedBoard:t,onClose:a,onSectionCreate:g}):null;case Ve.s.groupPins:return(0,h.jsx)(qe.Z,{boardId:t.id,clusterId:null==s?void 0:s.clusterId,suggestedSectionTitle:(null==s?void 0:s.suggestedSectionName)||"",onDismiss:a});default:return null}}},693680:(e,t,o)=>{o.d(t,{s:()=>i});const i={addOrEditDate:"addOrEditDate",boardArchiveConfirmation:"boardArchiveConfirmation",boardEdit:"boardEdit",boardUnarchiveConfirmation:"boardUnarchiveConfirmation",bulkCopy:"bulkCopy",bulkDelete:"bulkDelete",collaboratorsAndPermissions:"collaboratorsAndPermissions",createSection:"createSection",editSection:"editSection",followers:"followers",groupPins:"groupPins",jumpstartBoard:"jumpstartBoard",mergeBoard:"mergeBoard",moveSection:"moveSection",pincode:"pincode",sectionMergeConfirm:"sectionMergeConfirm",sendBoard:"sendBoard",simpleCreateSection:"simpleCreateSection"}},863098:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(667294),n=o(966338),s=o(965261),r=o(273022),a=o(925927);function l(){const e=(0,n.useDispatch)(),t=(0,a.k6)(),{pathname:o}=(0,a.TH)(),l=(0,n.useSelector)((({ui:e})=>e.mainComponent.locationToErrorMap));(0,i.useEffect)((()=>{(0,s.Z)();const i=`/${o.split("/")[1]}/`;l[o]&&(e((0,r.m)(i,l[o])),t.replace(i))}),[])}},677215:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(667294),n=o(966338),s=o(124237),r=o(676297),a=o(898781),l=o(980750),d=o(407043),c=o(946984);function h({board:e}){const{logContextEvent:t}=(0,d.v)(),o=(0,a.ZP)(),[h,u]=(0,i.useState)(null),_=(0,n.useDispatch)(),{showBlockingActionToast:p}=(0,l.Z)(),g=(0,c.Z)({shouldStopEventPropagation:!1}),m=(0,i.useCallback)(g((()=>{if(!h)return;const{source:i,target:n}=h;u(null),t({event_type:7173,object_id_str:i.id,aux_data:{merge_flow:"dnd"}}),_((0,r.Z)(e.id,i.id,n.id)).then((()=>{p({actionType:"merge",board:e,section:n})})).catch((e=>{s.Z.showError(e.message||o._('Failed to merge sections', 'useSectionMergeAction.errorMessage', 'Error message when failed to merge sections'))}))})),[null==h?void 0:h.source,null==h?void 0:h.target]);return{handleShowMergeSectionsConfirmationModal:g(((e,t)=>{u({source:e,target:t})})),mergeConfirmationModalProps:h,onConfirm:m}}},292965:(e,t,o)=>{o.d(t,{Z:()=>Ft});var i=o(667294),n=o(966338),s=o(396026),r=o.n(s),a=o(883119),l=o(785893);const d=80,c=1.2;function h({layoutType:e,thumbnails:t}){switch(e){case 4:const e=t&&t[0]&&t[0]["236x"];return(0,l.jsx)(a.zd,{rounding:4,width:d,height:80,children:e?(0,l.jsx)(a.Ee,{alt:"",color:"gray",fit:"cover",naturalHeight:e.height,naturalWidth:e.width,src:e.url||""}):(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,l.jsx)(a.xu,{color:"secondary",height:d,width:39.4}),(0,l.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:c}},children:[(0,l.jsx)(a.xu,{color:"secondary",height:39.4,width:39.4}),(0,l.jsx)(a.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{marginTop:"1.2px"}},height:40.6,width:39.4})]})]})});case 2:return(0,l.jsx)(a.zd,{rounding:4,width:d,height:80,children:(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:r()(0,2).map((e=>{const o=!!t&&t.length>0&&t[e];return(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:c}},children:(0,l.jsx)(a.xu,{height:d,width:39.4,children:o&&(0,l.jsx)(a.Ee,{alt:"",color:"gray",fit:"cover",naturalHeight:d,naturalWidth:39.4,src:o["236x"].url||""})})},e)}))})});default:return null}}var u=o(121093),_=o(391254),p=o(407043);const g=[502043,502085];function m({boardId:e,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:o}){return(0,l.jsx)(u.Z,{placementId:18,eligibleIds:g,children:({experience:i,complete:n,dismiss:s})=>(0,l.jsx)(b,{boardId:e,displayData:i.display_data,complete:n,dismiss:s,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:o})})}function b({boardId:e,displayData:t,complete:o,dismiss:n,handleShowArchiveConfirmation:s,handleShowGroupPinsModal:r}){const{logContextEvent:d}=(0,p.v)(),c=t.custom_properties,[u,g]=(0,i.useState)(null);(0,i.useEffect)((()=>()=>clearTimeout(u)),[u]);const m={2:s,3:()=>{c&&r(c.cluster_id,c.section_name)}};return(0,i.useEffect)((()=>{(e=>{if(!u){const t=setTimeout((()=>{e()}),2e4);g(t)}})(n),d({event_type:13,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}})}),[]),(0,l.jsxs)(a.mh,{children:[(0,l.jsx)(_.Z,{unsafeCSS:"\n.BoardActionUpsellCard {\n  animation-duration: 0.5s;\n  animation-fill-mode: forwards;\n  animation-name: slideUp;\n  animation-timing-function: ease-out;\n  background-color: #fff;\n  border-radius: 16px;\n  box-shadow: 0 2px 14px 0 rgba(0, 0, 0, 0.25);\n  display: flex;\n  justify-content: between;\n  left: 50%;\n  margin-left: -210px; // half of width\n  padding: 24px;\n  position: fixed;\n  transition: bottom 1s;\n  width: 420px;\n}\n\n@keyframes slideUp {\n  from {\n    bottom: -200px;\n  }\n\n  to {\n    bottom: 14px;\n  }\n}\n"}),(0,l.jsxs)("div",{className:"BoardActionUpsellCard",children:[(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(h,{layoutType:t.layout_type,thumbnails:t.thumbnail_image_urls})}),(0,l.jsxs)(a.xu,{marginStart:4,children:[(0,l.jsx)(a.xv,{inline:!0,children:(0,l.jsx)(a.X6,{size:"400",children:t.text})}),(0,l.jsxs)(a.xu,{display:"flex",justifyContent:"start",marginTop:4,width:"100%",children:[(0,l.jsx)(a.zx,{color:"gray",onClick:()=>{d({event_type:123,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}}),n()},text:t.dismiss_button.text}),(0,l.jsx)(a.xu,{paddingX:2,children:(0,l.jsx)(a.zx,{color:"red",onClick:()=>{m[t.complete_button.action_type](),d({event_type:101,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}}),o()},text:t.complete_button.text})})]})]})]})]})}var x=o(443678),f=o(104498),v=o(898781),y=o(330899),P=o(535095);function C({board:e,currentFilter:t,eligibleFilters:o,isOwnBoard:n,surface:s,setCurrentFilter:r,setTitle:d}){const c=(0,y.x)(),{logContextEvent:h}=(0,p.v)(),u=(0,v.ZP)(),_=(0,i.useRef)(null),g=null==c?void 0:c.boardPinDensity,[m,b]=(0,i.useState)(!1),C=()=>{b(!1)},j=e=>{const t="board"===s?13183:13187,o="board"===s?5:164;(0,x.Z)({boardDensity:e,component:t,viewType:o},h),(0,f.Z)({density:e,surface:"board"}),null==c||c.setBoardPinDensity(e)},w=[],A={[P.cg]:12111,[P.c7]:12110,[P.Ac]:12227};if(o){const i={items:o.map((o=>{var i;return{isSelected:o.pin_type===t,onClick:()=>{var t,i;h({event_type:101,component:13475,element:A[null!==(t=o.pin_type)&&void 0!==t?t:-1],object_id_str:e.id,view_type:5,view_parameter:n?3069:3070}),r(null!==(i=o.pin_type)&&void 0!==i?i:-1),d(o.pin_type===P.cg?null:o.text),C()},text:null!==(i=o.text)&&void 0!==i?i:""}})),label:u._('Filter by type', 'board.experimentalBoardActionBar.filterOptions', 'List of board filter options')};w.push(i)}return w.push({items:[{isSelected:"regular"===g,onClick:()=>{C(),j("regular")},text:u._('Default', 'BoardHeader.ActionBar.DensityOption-Default', 'Clickable text to set board view density to default mode')},{isSelected:"dense"===g,onClick:()=>{C(),j("dense")},text:u._('Compact', 'BoardHeader.ActionBar.DensityOption-Compact', 'Clickable text to set board view density to compact mode')}],label:u._('View options', 'BoardHeader.ActionBar.ViewOptions', 'List of board view options')}),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xu,{ref:_,children:(0,l.jsx)(a.hU,{accessibilityLabel:u._('Board Filter', 'board.experimentalBoardActionBar.boardFilter', 'Filter to select specific Pins on board'),icon:"filter",iconColor:"darkGray",onClick:()=>{h({event_type:101,element:12020,object_id_str:e.id,view_type:5,view_parameter:n?3069:3070}),b(!m)},selected:m,size:"lg"})}),m&&(0,l.jsx)(a.Lt,{id:"filter_board",anchor:_.current,onDismiss:C,children:w.map((({items:e,label:t})=>(0,l.jsx)(a.Lt.Section,{label:t,children:e.map((({isSelected:e,onClick:t,text:o})=>(0,l.jsx)(a.Lt.Item,{selected:e?{label:o,value:o}:null,onSelect:t,option:{label:o,value:o}},o)))},t)))})]})}var j=o(784450),w=o(349700);const A=(0,j.ZP)(1000332)((function({board:e,currentFilter:t,isOwnBoard:o,section:n,setCurrentFilter:s,showExperienceTooltip:r}){const d=(0,v.ZP)(),{eligible_pin_type_filters:c}=null!=n?n:e,[h,_]=(0,i.useState)(null),p=(0,i.useRef)(null),g=n?n.pin_count:e.pin_count;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.xu,{alignItems:"center",direction:"row",display:"flex",paddingX:8,children:[(0,l.jsx)(a.xu,{flex:"grow",children:(0,l.jsx)(a.X6,{accessibilityLevel:2,size:"400",children:t>0&&h?h:(0,w.nk)(d.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', null != g ? g : 0, 'board.experimentalBoardActionBar.pinCount', 'Number of Pins on board or section'),{pinCount:g})})}),(0,l.jsx)(a.xu,{ref:p,children:(0,l.jsx)(C,{board:e,isOwnBoard:o,currentFilter:t,eligibleFilters:c,setCurrentFilter:s,setTitle:_,surface:n?"section":"board"})})]}),r&&p&&(0,l.jsx)(a.mh,{children:(0,l.jsx)(u.Z,{eligibleIds:[502974],placementId:1000332,children:({dismiss:e,experience:{display_data:t}})=>((e,t)=>{var o;return p&&(null===(o=p.current)||void 0===o||o.scrollIntoView(!1)),(0,l.jsx)(a.J2,{showCaret:!0,anchor:p.current,color:"blue",idealDirection:"down",onDismiss:e,shouldFocus:!1,size:312,children:(0,l.jsx)(a.xu,{padding:3,children:(0,l.jsx)(a.xv,{align:"center",color:"inverse",overflow:"normal",weight:"bold",children:t.text})})})})(e,t)})})]})}));var S=o(744656),z=o(946327),I=o(784913),B=o(104443),k=o(879616),T=o(121151),E=o(49491);function M(){const e=(0,v.ZP)(),t=(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",paddingX:8,children:(0,l.jsx)(a.xv,{children:(0,w.nk)(e._('Add a {{ star }} to show collaborators your favorite Pins', 'groupBoardFavoriteEducationModal.text', 'Text for modal informing users of changes from group board reactions to board favorites'),{star:(0,l.jsx)(a.xu,{display:"inlineBlock",children:(0,l.jsx)(a.JO,{accessibilityLabel:e._('Favorite icon', 'groupBoardFavoriteEducationModal.bodyFavoriteIcon', 'Accessibility label for favorite icon'),color:"default",dangerouslySetSvgPath:E.W,size:12})})})})}),o=t=>(0,l.jsx)(a.kC,{justifyContent:"end",children:(0,l.jsx)(a.zx,{onClick:()=>t(),text:e._('Got it', 'groupBoardFavoriteEducationModal.doneButton', 'Done button for modal')})}),i=t=>(0,l.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingX:4,paddingY:6,position:"relative",children:[(0,l.jsx)(a.xu,{maxWidth:400,children:(0,l.jsx)(a.X6,{align:"center",size:"500",children:(0,w.nk)(e._('{{ heart }}  is now  {{ star }}', 'groupBoardFavoriteEducationModal.heading', 'Heading for modal informing users of changes from group board reactions to board favorites'),{heart:(0,l.jsx)(a.xu,{display:"inlineBlock",paddingX:1,children:(0,l.jsx)(a.JO,{accessibilityLabel:e._('Heart icon', 'groupBoardFavoriteEducationModal.headingHeartIcon', 'Accessibility label for heart icon'),color:"default",icon:"heart",size:16})}),star:(0,l.jsx)(a.xu,{display:"inlineBlock",paddingX:1,children:(0,l.jsx)(a.JO,{accessibilityLabel:e._('Favorite icon', 'groupBoardFavoriteEducationModal.headingFavoriteIcon', 'Accessibility label for favorite icon'),color:"default",dangerouslySetSvgPath:E.W,size:16})})})})}),(0,l.jsx)(a.xu,{position:"absolute",top:!0,right:!0,padding:6,children:(0,l.jsx)(a.hU,{accessibilityLabel:e._('Close', 'groupBoardFavoriteEducationModal.closeModalButton', 'Accessibility label for close modal button'),icon:"cancel",iconColor:"darkGray",onClick:t})})]});return(0,l.jsx)(u.Z,{eligibleIds:[503077],placementId:18,children:({complete:n,dismiss:s})=>(0,l.jsx)(T.ZP,{accessibilityModalLabel:e._('Group board reaction', 'groupBoardFavoriteEducationModal.modalAccessibilityLabel', 'Accessiblility label for modal used to educate group board collaborators about favorite button'),footer:o(n),heading:i(s),onDismiss:s,size:"sm",children:t})})}var D=o(280773),Z=o(542190),R=o(11415),L=o(19121),O=o(622403),F=o(281615),N=o(693680);const U=()=>{};function H({board:e,currentView:t,handleContentViewChange:o,handleSetCurrentModal:s,handleShowEditSectionModal:r,handleShowMergeSectionsConfirmationModal:d,isOwnerOrCollaborator:c,isOwnBoard:h,isPinGridSorted:u,refreshBoardData:_=U,refreshSectionData:p=U,section:g}){var m;const b=(0,L.Z)(),x=(0,k.Z)({board:e,viewer:b}),f=(e.access||[]).includes("write"),v=null===(m=(0,y.x)())||void 0===m?void 0:m.boardPinDensity,C=(0,R.Z)(g?(0,B.Z)(e,g):""),[j,w]=(0,i.useState)(P.cg),[T,E]=(0,i.useState)(!1),H=(0,n.useDispatch)();(0,i.useEffect)((()=>()=>{j!==P.cg&&H(g?(0,D.Z)(F.DV.SECTION_PINS,g.id):(0,D.Z)(F.DV.BOARD_PINS,e.id))}),[e,j,H,g]);const W=(0,i.useCallback)((()=>{j>0&&(w(P.cg),g?p():_())}),[j,p,_,g]),$=(0,i.useMemo)((()=>g?{currentFilter:j,eligibleFilters:g.eligible_pin_type_filters,refreshData:p,sectionId:g.id}:{currentFilter:j,eligibleFilters:e.eligible_pin_type_filters,refreshData:_,setShowExperienceTooltip:E}),[g,e.eligible_pin_type_filters,j,_,p]);return g?(0,l.jsx)(O.k,{value:$,children:(0,l.jsxs)(i.Fragment,{children:[c&&(0,l.jsx)(A,{board:e,currentFilter:j,isOwnBoard:h,section:g,setCurrentFilter:w,showExperienceTooltip:!1}),(0,l.jsx)(I.Z,{board:e,boardSectionId:g.id,currentFilter:j,denseViewSelected:f&&"dense"===v,inSectionOrganizationMode:!1,inSelectAll:!1,isOwnBoard:h,refreshFilteredFeed:W,renderFooterStory:t=>!e.archived_by_me_at&&c&&(0,l.jsx)(a.xu,{marginBottom:12,children:(0,l.jsx)(z.Z,{children:(0,l.jsx)(Z.Z,{collection:g,storyId:t,url:C})})}),viewer:b,viewParameter:x})]})}):(0,l.jsx)(O.k,{value:$,children:(0,l.jsxs)(i.Fragment,{children:[c&&(0,l.jsx)(A,{board:e,currentFilter:j,isOwnBoard:h,setCurrentFilter:w,showExperienceTooltip:T}),(0,l.jsx)(S.Z,{actions:{onBoardOrganizeClick:U},board:e,currentFilter:j,currentView:t,enableReordering:c,isOwnBoard:h,isPinGridSorted:u,onContentViewChange:o,onShowEditSectionModal:r,onShowMergeSectionsConfirmationModal:(e,t)=>{s(N.s.sectionMergeConfirm),d(e,t)},refreshFilteredFeed:W,viewParameter:x}),c&&(0,l.jsx)(M,{})]})})}var W=o(636803);function $(e){e({event_type:101,element:10778,component:13216,view_type:5,view_parameter:3069})}function G({handleClose:e,isArchived:t,onArchiveClick:o,onCreatePincode:i,onEditClick:n,onMergeClick:s,onUnarchiveClick:r,setMenuType:a,showCreatePinCodeOption:l},d,c){const h=[{dataTestId:"editBoardButton",text:d._('Edit board', 'BoardHeader.BoardOptionsFlyout.EditOption', 'Clickable text to enter board editing mode'),onClick:()=>{n(),e()}},{text:d._('Share', 'BoardHeader.BoardOptionsFlyout.ShareOption', 'Clickable text to show share options'),onClick:()=>{$(c),a("boardShare")}},{text:d._('Merge', 'BoardHeader.BoardOptionsFlyout.MergeOption', 'Clickable text to open merge board modal'),onClick:()=>{s(),e()}}];t?h.push({text:d._('Unarchive', 'BoardHeader.BoardOptionsFlyout.UnarchiveOption', 'Clickable text to open unarchive modal'),onClick:()=>{r(),e()}}):h.push({text:d._('Archive', 'BoardHeader.BoardOptionsFlyout.ArchiveOption', 'Clickable text to open archive modal'),onClick:()=>{o(),e()}}),l&&h.push({text:d._('Create Pincode', 'BoardHeader.BoardOptionsFlyout.PincodeOption', 'Clickable text to trigger Pincode modal'),onClick:()=>{i(),e()}});return{items:h,label:d._('Board options', 'BoardHeader.BoardOptionsFlyout.OptionsCategory', 'Category of board options in board flyout')}}function q({handleClose:e,onEditClick:t,setMenuType:o},i,n){return{items:[{dataTestId:"edit-section-button",text:i._('Edit Section', 'BoardHeader.getSectionOptionsCategory.EditOption', 'Clickable text to enter board editing mode'),onClick:()=>{t(),e()}},{text:i._('Share', 'BoardHeader.getSectionOptionsCategory.ShareOption', 'Clickable text to show share options'),onClick:()=>{$(n),o("boardShare")}}],label:i._('Section options', 'BoardHeader.getSectionOptionsCategory.OptionsCategory', 'Category of section options in section flyout')}}var V=o(300267),Y=o(807068),X=o(587857),J=o(217468);function K({board:e,onArchiveClick:t,onCreatePincode:o,onEditBoardClick:n,onEditSectionClick:s,onMergeClick:r,onUnarchiveClick:d,showCreatePinCodeOption:c,surface:h}){const u=(0,v.ZP)(),_=(0,J.t)("web_share_sheet_redesign")({dangerouslySkipActivation:!0}).anyEnabled,g=(0,i.useRef)(null),{logContextEvent:m}=(0,p.v)(),[b,x]=(0,i.useState)(!1),[f,y]=(0,i.useState)("boardOptions"),P=(0,L.Z)(),C=()=>{x(!1),y("boardOptions")},j={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:X.d.BOARD,url:e.url},w=()=>{x((e=>!e)),y("boardOptions")},A=!!e.archived_by_me_at,S=[].concat(["section"===h?q({handleClose:C,onEditClick:s,setMenuType:y},u,m):G({handleClose:C,isArchived:A,onArchiveClick:t,onCreatePincode:o,onEditClick:n,onMergeClick:r,onUnarchiveClick:d,setMenuType:y,showCreatePinCodeOption:c},u,m)]);return(0,l.jsxs)(a.xu,{position:"relative",children:[(0,l.jsx)(a.xu,{"data-test-id":"more-board-options",ref:g,children:(0,l.jsx)(a.hU,{accessibilityLabel:u._('More Board options', 'BoardHeaderOVerflowFlyoutButton.IconButton.AccessibilityLabel', 'Accessibility label on icon button'),bgColor:"lightGray",icon:"ellipsis",iconColor:"darkGray",onClick:w,selected:b,size:"sm"})}),(0,l.jsx)(W.Z,{anchors:{3001:g.current},onCompleteByAnchor:{3001:w},placementId:18}),b&&("boardOptions"===f?(0,l.jsx)(a.Lt,{id:"board_options",anchor:g.current,onDismiss:C,children:S.map((({items:e,label:t})=>(0,l.jsx)(a.Lt.Section,{label:t,children:e.map((({dataTestId:e,isSelected:t,onClick:o,text:i})=>(0,l.jsx)(a.Lt.Item,{dataTestId:e,selected:t?{label:i,value:i}:null,onSelect:o,option:{label:i,value:i}},i)))},t)))}):(0,l.jsx)(a.J2,{anchor:g.current,onDismiss:C,size:_?"flexible":"xl",children:(0,l.jsx)(Y.Z,{onCreatePincodeClick:o,onHide:C,sendType:X.d.BOARD,sharedObject:j,isOwnProfile:(0,V.Z)({user:e.owner,viewer:P})})}))]})}var Q=o(116303),ee=o(985913);function te(e){const{faces:t,maxFaces:o,numFaces:i,onOverflowClick:n,shouldNavigate:s=!0}=e,r=[...t].reverse(),d=t.length>o?r.slice(0,o+1):r,c=i-o;return(0,l.jsx)(a.xu,{position:"relative",display:"flex",dangerouslySetInlineStyle:{__style:{flexDirection:"row-reverse"}},alignItems:"center",children:d.map(((e,t)=>{const{name:o,src:i,href:r,isDim:d}=e;if(0===t&&c>0)return(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},width:44,height:44,marginStart:-2,rounding:"circle",overflow:"hidden",children:(0,l.jsx)(a.Ee,{src:i||"",alt:o,naturalWidth:44,naturalHeight:44,fit:"contain",children:(0,l.jsx)(a.iP,{fullHeight:!0,fullWidth:!0,onTap:n,rounding:"circle",children:(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",alignItems:"center",rounding:"circle",width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},children:(0,l.jsx)(a.xv,{color:"inverse",size:"200",weight:"bold",children:(h=c,h>99?"99+":h)})})})})},t);{const e={__style:{opacity:d?.5:1}},n=(0,l.jsx)(a.xu,{marginStart:-2,dangerouslySetInlineStyle:e,children:(0,l.jsx)(Q.Z,{name:o,size:"sm",src:i,outline:!0})},t);return s?(0,l.jsx)(a.iP,{role:"link",href:r,rounding:"circle",children:n},t):n}var h}))})}function oe({invitedByUser:e,isAccepted:t,onDecline:o,onAccept:i,createdAt:n}){const s=(0,v.ZP)(),r=(0,L.Z)(),d=e||{},{first_name:c,full_name:h,username:u,image_medium_url:_}=d,p=c||h||s._('others', 'Default text when board colalborator name is not known.', 'Default text when board colalborator name is not known.');return(0,l.jsx)(a.W2,{children:t?(0,l.jsxs)(a.xu,{width:"100%",paddingX:5,paddingY:3,rounding:2,marginStart:-1,marginEnd:-1,display:"flex",direction:"row",alignItems:"center",borderStyle:"sm",children:[(0,l.jsx)(te,{maxFaces:2,numFaces:2,faces:[{href:r.isAuth?`/${r.username}`:"",name:r.isAuth?r.fullName:"",src:r.isAuth?r.imageMediumUrl:""},{href:`/${u}`,name:h,src:_}]}),(0,l.jsxs)(a.xu,{marginStart:2,children:[(0,l.jsx)(a.xv,{weight:"bold",children:s._('You\'re in!', 'Text showing that a user has accepted the board invite and is now a part of the board', 'Text showing that a user has accepted the board invite and is now a part of the board')}),(0,l.jsx)(a.xv,{children:(0,ee.Z)(s._('Start collaborating with {{ invitedByUserName }} on this board', ' - ', ' -- '),{invitedByUserName:p})})]})]}):(0,l.jsx)(a.xu,{width:540,color:"default",paddingX:6,paddingY:6,rounding:6,marginStart:-1,marginEnd:-1,borderStyle:"shadow",children:(0,l.jsxs)(a.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,l.jsx)(a.xu,{marginEnd:2,children:(0,l.jsx)(Q.Z,{name:h,src:_,size:"md"})}),(0,l.jsx)(a.xu,{flex:"grow",children:(0,l.jsx)(a.xv,{inline:!0,color:"default",children:(0,w.nk)(s._('{{ user }} invited you to collaborate on this board {{ createdAt }}', 'web.boardView.inviteCard.text', 'Label used to indicate a Pinner has invited you to join a board'),{user:(0,l.jsx)(a.xv,{color:"default",inline:!0,weight:"bold",children:(0,l.jsx)(a.rU,{inline:!0,href:`/${u}`,underline:"hover",children:h})},u),createdAt:(0,l.jsx)(a.xv,{color:"subtle",inline:!0,children:n})})})}),(0,l.jsxs)(a.xu,{display:"flex",alignItems:"center",paddingX:1,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:[(0,l.jsx)(a.xu,{marginEnd:2,display:"inlineBlock",children:(0,l.jsx)(a.zx,{onClick:o,text:s._('Decline', 'decline board collaborator invite or request', 'decline board collaborator invite or request'),color:"gray",size:"lg"})}),(0,l.jsx)(a.zx,{onClick:i,text:s._('Accept', 'Text to accept a board collaboration invite', 'Text to accept a board collaboration invite'),size:"lg",color:"red"})]})]})})})}var ie=o(6637),ne=o(499128),se=o(298361),re=o(784590),ae=o(293880),le=o(414327),de=o(343341);function ce({boardId:e,inviteCode:t,shouldAutoAcceptBoardInvite:o,userInviterId:s}){const r=(0,v.ZP)(),d=(0,de.F9)(),c=(0,se.Z)(),[h,u]=(0,i.useState)(!1),[_,p]=(0,i.useState)(null),g=(0,L.Z)(),m=(0,n.useDispatch)(),b={board_id:e,field_set_key:"boardBanner",invite_code:t,invited_user_id:g.isAuth&&g.id};(0,i.useEffect)((()=>{s&&o&&(ie.ZP.create("BoardInviteResource",b).callUpdate().then((()=>{m((0,ae.A8)(e)),m((0,le.jB)("BoardInviteResource",b))})),ie.ZP.create("UserResource",{field_set_key:"grid_item",user_id:s}).callGet().then((({resource_response:e})=>{const t=e&&e.data;t&&p(t)})))}),[o,s]);const{data:x}=(0,re.Z)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}}),{data:f}=(0,re.Z)({name:"BoardInviteResource",options:b}),y=!(!s||!o)||h,P=!["new","contact_request_not_approved"].includes(null==f?void 0:f.status),C=[...x||[]].pop(),j=t=>{const o=ie.ZP.create("BoardInviteResource",b);(t?o.callUpdate():o.callDelete()).then((()=>{t&&(m((0,ae.A8)(e)),u(!0),d.showToast((({hideToast:e})=>(0,l.jsx)(ne.ZP,{duration:5e3,onHide:e,text:r._('You\'re in! Save Pins, plan with collaborators, and more!', 'BoardCollabInviteBannerContainer.useEffect.acceptedInviteToast', 'Text in toast after accepting a board collaborator invite.')})))),m((0,le.jB)("BoardInviteResource",b))}))},w=(null==f?void 0:f.invited_by_user)||_;return!w||P&&!y?null:(0,l.jsx)(a.xu,{marginTop:3,paddingY:0,children:(0,l.jsx)(oe,{invitedByUser:w,isAccepted:y,onAccept:()=>j(!0),onDecline:()=>j(!1),createdAt:c(C&&C.created_at,!0)})})}var he=o(42503),ue=o(491606),_e=o(423671),pe=o(826067),ge=o(925927);function me({boardId:e}){const t=(0,ge.TH)(),o=t&&t.search?(0,pe.mB)(t.search):{},i=o.invite_code,n=o.accept_invite,s=o.inviter_user_id;return(0,l.jsx)(ce,{boardId:e,inviteCode:i,shouldAutoAcceptBoardInvite:n,userInviterId:s})}const be=function(e){const{board:t}=e,{id:o,sensitivity:n}=t,s=(0,_e.Uz)(n);return(0,l.jsxs)(i.Fragment,{children:[!s&&(0,l.jsx)(me,{boardId:o}),s&&(0,he.Z)(n)&&n&&(0,l.jsx)(a.xu,{paddingY:10,children:(0,l.jsx)(ue.Z,{notices:n.notices,viewType:5,sensitivity:n})})]})};function xe(e){const t=(0,v.ZP)(),{color:o,size:i}=e;return(0,l.jsx)(a.JO,{accessibilityLabel:t._('secret board', 'accessible label for secret board icon', 'accessible label for secret board icon'),color:o,icon:"lock",size:i})}function fe({color:e,paddingX:t}){return(0,l.jsx)(a.xu,{display:"inlineBlock",paddingX:t,children:(0,l.jsx)(a.xv,{color:e,size:"200",weight:"bold",inline:!0,children:"·"})})}function ve({archived:e,secret:t}){const o=(0,v.ZP)();return(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[t&&(0,l.jsx)(xe,{color:"subtle",size:16}),t&&(0,l.jsx)(a.xu,{"data-test-id":"secret-board",paddingX:1,children:(0,l.jsx)(a.xv,{color:"subtle",inline:!0,size:"300",children:o._('Secret board', 'LegoBoardPageHeader.BoardStatus.secret', 'Label for a secret board')})}),t&&e&&(0,l.jsx)(fe,{color:"subtle",paddingX:1}),e&&(0,l.jsx)(a.xu,{paddingX:1,children:(0,l.jsx)(a.xv,{color:"subtle",inline:!0,size:"300",children:o._('Archived board', 'LegoBoardPageHeader.BoardStatus.archived', 'Label for a secret board')})})]})}var ye=o(618899),Pe=o(72033),Ce=o(868148),je=o(73803);function we({board:e,collaborators:t,overflowNumber:o}){const n=(0,v.ZP)(),s=(0,i.useRef)(),[r,d]=(0,i.useState)(!1),c=t.map((e=>e.isDim?null:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:(0,l.jsx)(a.rU,{href:e.href||"",underline:"none",inline:!0,children:e.name})},e.name))).filter(Boolean);return o&&c.push((0,l.jsx)(a.xu,{display:"inlineBlock",ref:s,children:(0,l.jsx)(a.iP,{onTap:()=>d(!0),children:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:(0,w.nk)(n.ngettext('{{ overflowNumber }} other', '{{ overflowNumber }} others', o, 'LegoBoardPageHeader.CollaboratorNames.others', 'number of additional collaborators not listed'),{overflowNumber:o})})})},"overflowText")),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xv,{inline:!0,children:(0,je.Z)(c,n)}),r&&(0,l.jsx)(Ce.default,{anchor:s.current,board:e,onDismiss:()=>d(!1)})]})}var Ae=o(27255),Se=o(939106),ze=o(4294);function Ie(e,t){return t?e._('Join', 'BoardPage.BoardJoinButton.join', '[Button] Request to join a group board as a collaborator'):e._('Request to join', '[Button] Request to join a group board as a collaborator', '[Button] Request to join a group board as a collaborator')}function Be(e,t){return t?e._('Cancel', 'BoardPage.BoardJoinButton.cancel', '[Button] Cancel request to join a group board as a collaborator'):e._('Cancel request', '[Button] Cancel request to join a group board as a collaborator', '[Button] Cancel request to join a group board as a collaborator')}function ke(e){const t=(0,v.ZP)(),{onClick:o,requested:i,size:n,useAlternateText:s}=e;return(0,l.jsx)(a.zx,{fullWidth:!0,onClick:o,size:n||"md",text:(i?Be:Ie)(t,s)})}function Te(e){const t=(0,v.ZP)(),{boardImage:o,boardName:i,boardUrl:n,onHide:s}=e,r=(0,l.jsx)(a.xv,{children:(0,w.nk)(t._('You\'ve cancelled the request to collaborate on {{ boardName }}', 'Board.JoinButton.CancelToast', 'Toast text stating that a user has cancelled a request to join a board'),{boardName:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:i})})});return(0,l.jsx)(ne.ZP,{duration:3e3,href:n,imageUrl:o,onHide:s,text:r})}function Ee(e){const t=(0,v.ZP)(),{boardImage:o,boardName:i,boardUrl:n,onHide:s}=e,r=(0,l.jsx)(a.xv,{children:(0,w.nk)(t._('You\'ve requested to join {{ boardName }}', 'Board.JoinButton.RequestToast', 'Toast text stating that a user has requested to join a board'),{boardName:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:i})})});return(0,l.jsx)(ne.ZP,{href:n,imageUrl:o,onHide:s,text:r})}var Me=o(946984);function De(e,t){return ie.ZP.create("BoardCollaboratorRequestResource",{board_id:e,requesting_user_id:t})}function Ze(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}function Re(e){const{boardId:t,boardImage:o,boardName:i,boardUrl:s,isRequestedByMe:r,showPulsar:d,size:c,variant:h}=e,{logContextEvent:u}=(0,p.v)(),_=(0,n.useDispatch)(),g=(0,L.Z)(),m=(0,de.F9)(),b=g.isAuth&&g.id||"",x=(0,Me.Z)();function f(){_(function(e,t){return o=>{De(e,t).callDelete({showError:!1}).catch((()=>{o(Ze(e,!0))})),o(Ze(e,!1))}}(t,b)),m.showOneToast((({hideToast:e})=>(0,l.jsx)(Te,{boardImage:o,boardName:i,boardUrl:s,onHide:e})))}function v(){_(function(e,t){return o=>{De(e,t).callCreate().catch((()=>{o(Ze(e,!1))})),o(Ze(e,!0))}}(t,b)),m.showOneToast((({hideToast:e})=>(0,l.jsx)(Ee,{boardImage:o,boardName:i,boardUrl:s,onHide:e})))}const y=({event:e})=>{e.preventDefault(),e.stopPropagation(),x(r?f:v)(),function(e){const{action:t,id:o,logContextEvent:i,url:n}=e;i({event_type:101,component:1,element:"request"===t?7499:7547,object_id_str:o,view_type:4,aux_data:{current_page_url:n}})}({action:r?"request":"cancel",id:t,logContextEvent:u,url:s})};return b?(0,l.jsxs)(a.xu,{position:"relative",display:"flex",children:[(0,l.jsx)(ke,{onClick:y,requested:r,useAlternateText:"lego"===h,size:c}),d&&(0,l.jsx)(a.iP,{onTap:e=>{y(e)},children:(0,l.jsx)(a.xu,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:(0,l.jsx)(a.o3,{paused:r})})})]}):null}function Le(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Oe extends i.Component{constructor(...e){super(...e),Le(this,"state",{flyoutOpen:!1}),Le(this,"toggleFlyout",this.props.requireAuth((()=>{this.state.flyoutOpen||this.props.onOpen(),this.setState((e=>({flyoutOpen:!e.flyoutOpen})))})))}render(){const{board:e,bgColor:t="white",children:o,iconColor:n="gray",onCreatePincode:s}=this.props,{flyoutOpen:r}=this.state,d={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:X.d.BOARD,url:e.url},c=o&&o({active:r,onClick:this.toggleFlyout})||(0,l.jsx)(a.hU,{accessibilityLabel:this.props.i18n._('Send Board', 'Accessible label for button to send board', 'Accessible label for button to send board'),onClick:this.toggleFlyout,icon:"share",size:"lg",bgColor:t,iconColor:n});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xu,{ref:e=>{this.anchor=e},children:c}),this.state.flyoutOpen&&(0,l.jsx)(a.mh,{children:(0,l.jsx)(a.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.toggleFlyout,size:"xl",positionRelativeToAnchor:!1,children:(0,l.jsx)(Y.Z,{onCreatePincodeClick:s?()=>{this.toggleFlyout(),s()}:void 0,onHide:this.toggleFlyout,sendType:X.d.BOARD,sharedObject:d})})})]})}}function Fe(e){const t=(0,v.ZP)(),o=(0,Me.Z)();return(0,l.jsx)(Oe,{...e,i18n:t,requireAuth:o})}function Ne({board:e,handleCreatePincode:t}){const{logContextEvent:o}=(0,p.v)(),i=(0,v.ZP)(),n=(0,Me.Z)()((()=>$(o)));return(0,l.jsx)(Fe,{board:e,onCreatePincode:t,onOpen:n,children:({onClick:e})=>(0,l.jsx)(a.zx,{fullWidth:!0,color:"gray",onClick:e,size:"lg",text:i._('Share', 'BoardHeader.SendBoardButton', 'Text on button to share board')})})}var Ue=o(717615),He=o(874917);var We=o(231947),$e=o(284513),Ge=o(902263),qe=o(221263),Ve=o(319915),Ye=o(333312),Xe=o(947599);const Je=(0,i.lazy)((()=>Promise.resolve().then(o.bind(o,868148))));function Ke({board:e,displayedCollaborators:t,nonDisplayedCollaboratorCount:o,handleShowCollabAndPermissionsModal:n}){const[s,r]=(0,i.useState)(!1),d=(0,L.Z)(),c=(0,i.useRef)(),h=(0,i.useRef)(),u=(0,ge.k6)(),_=(0,Ue.Z)(),{anyEnabled:p}=(0,J.t)("web_m10n_business_access_orbac_ga")(),g=p?(0,We.KY)(d,e,_):(0,qe.Z)(d,e),m=g||e.collaborator_invites_enabled&&e.collaborated_by_me,b=(()=>{let o=()=>{var e;return u.push(null!==(e=t[0].href)&&void 0!==e?e:"/")};return t.length>1&&(o=()=>r(!s)),(g||e.collaborated_by_me)&&(o=n),o})(),x=[501003];g&&e.is_collaborative&&x.push(502335);const f=t.map((({name:e,src:t})=>e&&t?{name:e,src:t.endsWith("/default_75.png")?"":t}:{name:e,src:t}));return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[!e.collaborator_count||e.collaborator_count<=101?(0,l.jsx)($e.Z,{addButtonRef:h,collaboratorCount:e.collaborator_count||0,nonDisplayedCollaboratorCount:o,displayedCollaborators:f,onClick:b,ref:c,showAddButton:null!=m&&m}):(0,l.jsx)(Ge.Z,{addButtonRef:h,nonDisplayedCollaboratorCount:o,displayedCollaborators:f,onClick:b,pileRef:c,showAddButton:null!=m&&m}),(0,l.jsx)(W.Z,{anchors:{3002:h.current},placementId:18,positionRelativeToAnchor:!1}),(0,l.jsx)(Ye.default,{anchor:h.current,experienceIds:x,idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,customWrapper:({children:e})=>(0,l.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:new a.Ry(2),children:e})})]}),s&&(0,l.jsx)(Ve.Z,{name:"SafeSuspense_CollaboratorAvatarGroup_BoardCollabFlyout",children:(0,l.jsx)(Xe.Z,{children:(0,l.jsx)(Je,{anchor:c.current,board:e,onDismiss:()=>{r(!1),c.current&&c.current.focus()}})})})]})}function Qe(e){var t;const{board:o,collaborators:i,handleCreatePincode:n,handleShowCollabAndPermissionsModal:s,hideFollowers:r,isToolsBoard:d,onFollowersClick:c,overFlowActionsButton:h,showPulsar:u,userBlocked:_}=e,{access:p,archived_by_me_at:g,collaborator_requests_enabled:m,description:b,follower_count:x,id:f,image_cover_url:v,name:y,privacy:P,url:C,viewer_collaborator_join_requested:j}=o,{displayedCollaborators:w,nonDisplayedCollaboratorCount:A}=(0,Pe.Z)({boardCollaboratorCount:o.collaborator_count,collaborators:i}),S=(0,L.Z)(),z=(0,Ue.Z)(),I=(0,We.D3)(S,(null===(t=o.owner)||void 0===t?void 0:t.id)||"",z),B=p&&p.includes("write")||I,k=(0,ze.Z)({viewer:S,board:o})||I,T=!!g,E=P===Ae.Z.BoardPrivacy.PROTECTED,M=P===Ae.Z.BoardPrivacy.SECRET,D=!B&&!_,Z=D&&m,R=D&&!!n,O=!(!x||r||T||M||E),F=!k||b;return(0,l.jsx)(a.xu,{direction:"column",display:"flex",justifyContent:"center",marginBottom:d?4:7,paddingX:8,width:"100%",children:(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,l.jsxs)(a.xu,{"data-test-id":"LegoBoardHeader__main",direction:"column",display:"flex",maxWidth:488,children:[(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,l.jsx)(a.xu,{maxWidth:800,children:(0,l.jsx)(be,{board:o})})}),(0,l.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",marginStart:10,marginTop:4,children:(0,l.jsxs)(a.X6,{align:"center",children:[y,(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{display:"inline-flex"}},paddingX:2,children:h})]})}),(0,l.jsx)(ye.Z,{children:(0,l.jsx)(a.xu,{marginTop:2,children:(0,l.jsx)(Ke,{board:o,displayedCollaborators:w,nonDisplayedCollaboratorCount:A,handleShowCollabAndPermissionsModal:s})})}),F&&(0,l.jsx)(ye.Z,{children:(0,l.jsx)(a.xu,{marginTop:2,dangerouslySetInlineStyle:{__style:{textAlign:"center"}},children:(0,l.jsx)(Se.Z,{inline:!0,items:[k?null:(0,l.jsx)(we,{board:o,collaborators:w,overflowNumber:A},"collaborators"),b?(0,l.jsx)(a.xv,{inline:!0,children:b}):null]})})}),(0,l.jsx)(ye.Z,{children:(0,l.jsx)(a.xu,{marginTop:2,children:(T||M)&&(0,l.jsx)(ve,{archived:T,secret:M})})}),(0,l.jsx)(ye.Z,{children:O&&(0,l.jsx)(He.P,{bold:!0,count:null!=x?x:0,onClick:c,shortform:!0,size:"300"})}),(0,l.jsx)(ye.Z,{children:(Z||R)&&(0,l.jsxs)(a.xu,{direction:"row",display:"flex",justifyContent:"center",marginTop:5,width:"100%",children:[Z&&(0,l.jsx)(a.xu,{paddingX:1,children:(0,l.jsx)(Re,{boardId:f,boardImage:null!=v?v:"",boardName:y,boardUrl:C,isRequestedByMe:Boolean(j),showPulsar:u,size:"lg",variant:"lego"})}),R&&!!n&&(0,l.jsx)(a.xu,{paddingX:1,children:(0,l.jsx)(Ne,{board:o,handleCreatePincode:n})})]})})]})})})}function et({boardId:e,ownerUsername:t,ownerName:o,ownerImgSrc:i,children:n}){const{data:s,isLoaded:r}=(0,re.Z)({name:"BoardCollaboratorsResource",options:{board_id:e},noCache:!0}),a=[{name:o,src:i,href:`/${t}/`}];return r&&s&&s.length>0&&s.forEach((e=>{var t;const o=e.image_medium_url||e.image_small_url;a.push({name:null!==(t=e.full_name)&&void 0!==t?t:"",src:null!=o?o:"",href:`/${e.username}/`})})),n(a)}var tt=o(2819);function ot(e){const{boardImage:t,boardName:o,boardUrl:i,onHide:n}=e,s=(0,v.ZP)(),r=(0,l.jsx)(a.xv,{children:(0,w.nk)(s._('Now following {{ boardName }}', 'BoardFollowButton.FollowingToast.nowFollowing', 'Toast text displayed when a user follows a board'),{boardName:(0,l.jsx)(a.xv,{weight:"bold",children:o},"boardName")})});return(0,l.jsx)(ne.ZP,{onHide:n,text:r,href:i,imageUrl:t})}var it=o(628358);function nt(e){const t=(0,v.ZP)(),{bgColor:o,board:s,canCreatePincode:r,canEdit:d,handleCreatePincode:c,handleOpenSendBoardFlyout:h,onEditClick:u,showFollow:_,showShare:p,size:g}=e,{id:m,name:b,url:x,image_cover_url:f}=s,[y,P]=(0,i.useState)(s.followed_by_me),{showOneToast:C}=(0,de.F9)(),j=(0,n.useDispatch)(),w=(0,Me.Z)()((()=>{y?(j((0,it.f)(m)),P(!1)):(j((0,it.Z)(m)),P(!0),C((({hideToast:e})=>(0,l.jsx)(ot,{boardImage:null!=f?f:"",boardName:b,boardUrl:x,onHide:e}))))})),A={edit:t._('Edit', 'BoardPage.ActionBar.PartnerEdit', 'Clickable text to enter board editing mode'),create_pincode:t._('Create Pincode', 'BoardPage.ActionBar.PartnerPincode', 'Clickable text to trigger Pincode modal'),share:t._('Share', 'BoardPage.ActionBar.EllipsisButton', 'Button caption to share board'),unfollow:t._('Unfollow', 'BoardPage.ActionBar.EllipsisButton', 'Button caption to unfollow board'),follow:t._('Follow', 'BoardPage.ActionBar.EllipsisButton', 'Button caption to follow board')};return(0,l.jsx)(tt.Z,{bgColor:o,icon:"ellipsis",label:t._('Other actions', 'profileHeader.actionBar.overflow', 'Accessibility label for button to open other options flyout'),size:g,children:()=>(0,l.jsxs)(a.Lt.Section,{label:t._('Board options', 'profileHeader.actionBar.overflow.header', 'Accessibility label header for board options flyout'),children:[d&&u&&(0,l.jsx)(a.Lt.Item,{onSelect:()=>{u()},option:{label:A.edit,value:A.edit}}),d&&r&&c&&(0,l.jsx)(a.Lt.Item,{onSelect:()=>{c()},option:{label:A.create_pincode,value:A.create_pincode}}),p&&h&&(0,l.jsx)(Fe,{board:s,onCreatePincode:c,onOpen:h,children:({onClick:e})=>(0,l.jsx)(a.Lt.Item,{onSelect:e,option:{label:A.share,value:A.share}})}),_&&(0,l.jsx)(i.Fragment,{children:y?(0,l.jsx)(a.Lt.Item,{onSelect:w,option:{label:A.unfollow,value:A.unfollow}}):(0,l.jsx)(a.Lt.Item,{onSelect:w,option:{label:A.follow,value:A.follow}})})]})})}var st=o(830944),rt=o(215292);const at=(0,i.forwardRef)(((e,t)=>{const{boardName:o,boardUrl:i,children:n,overFlowActionsButton:s,sectionName:r}=e;return(0,l.jsxs)(a.xu,{display:"flex",justifyContent:"center",marginBottom:8,paddingX:8,ref:t,width:"100%",children:[(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",maxWidth:488,children:[(0,l.jsx)(ye.Z,{children:(0,l.jsx)(a.xu,{marginTop:4,children:(0,l.jsx)(rt.q,{children:({active:e,focused:t,hovered:n,onBlur:s,onFocus:r,onMouseEnter:d,onMouseLeave:c})=>(0,l.jsx)(a.iP,{role:"link",href:null!=i?i:"",onFocus:r,onBlur:s,onMouseEnter:d,onMouseLeave:c,children:(0,l.jsx)(a.X6,{align:"center",color:e||t||n?"default":"subtle",children:o})})})})}),(0,l.jsx)(ye.Z,{children:(0,l.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:-2,children:[(0,l.jsx)(a.X6,{align:"center",children:r}),!!s&&(0,l.jsx)(a.xu,{paddingX:1,children:s})]})})]}),n&&(0,l.jsx)(a.xu,{marginTop:8,children:n})]})}));at.displayName="SectionHeader";const lt=at;var dt=o(845772),ct=o(623122);function ht({board:e,handleBoardEditClick:t,handleFollowersClick:o,handleSectionEditClick:i,handleShowBoardArchiveConfirmation:n,handleShowBoardUnarchiveConfirmation:s,handleShowCollabAndPermissionsModal:r,handleShowCreatePincodeModal:d,handleShowMergeModal:c,section:h,showPulsar:u}){var _,p,g,m,b,x;const f=(0,L.Z)(),v=(0,Ue.Z)(),y=(0,dt.Z)(),P=y&&(0,st.Z)(e)?`?orbac_subject_id=${y}`:"",{name:C,sensitivity:j,access:w,url:A=""}=e,S=(0,We.D3)(f,(null===(_=e.owner)||void 0===_?void 0:_.id)||"",v),z=w&&w.includes("write")||S?ct.I:et,I=(0,_e.Uz)(j),B=(0,ze.Z)({viewer:f,board:e})||S;let k=null;k=B?(0,l.jsx)(K,{board:e,onArchiveClick:n,onCreatePincode:d,onEditBoardClick:t,onEditSectionClick:i,onMergeClick:c,onUnarchiveClick:s,showCreatePinCodeOption:f.isAuth&&f.isPartner,surface:h?"section":"board"}):(0,l.jsx)(nt,{bgColor:"lightGray",board:e,showFollow:!0,size:"sm"});const T=I&&(0,he.Z)(j);return h?(0,l.jsx)(lt,{boardName:C,boardUrl:`${A}${P}`,overFlowActionsButton:k,sectionName:h.title,children:T&&(0,l.jsx)(ye.Z,{children:(0,l.jsx)(a.xu,{maxWidth:800,paddingY:10,children:j&&(0,l.jsx)(ue.Z,{notices:j.notices,viewType:5,sensitivity:j})})})}):(0,l.jsx)(a.xu,{"data-test-id":"board-header",children:(0,l.jsx)(z,{boardId:e.id,ownerName:(null===(p=e.owner)||void 0===p?void 0:p.full_name)||"",ownerUsername:(null===(g=e.owner)||void 0===g?void 0:g.username)||"",ownerImgSrc:(null===(m=e.owner)||void 0===m?void 0:m.image_key)||(null===(b=e.owner)||void 0===b?void 0:b.image_medium_url)||(null===(x=e.owner)||void 0===x?void 0:x.image_small_url)||"",children:t=>{var i;return(0,l.jsx)(Qe,{board:e,collaborators:t,handleCreatePincode:d,handleShowCollabAndPermissionsModal:r,hideFollowers:S,isToolsBoard:!0,onFollowersClick:o,overFlowActionsButton:k,showPulsar:u,userBlocked:!(null===(i=e.owner)||void 0===i||!i.blocked_by_me)})}})})}var ut=o(565486),_t=o(412456),pt=o(683190);function gt({boardId:e,collaboratorId:t,collaboratorUsername:o}){const i=(0,n.useDispatch)(),s=(0,ge.k6)(),r=(0,v.ZP)();return(0,l.jsx)(a.kC,{justifyContent:"center",width:"100%",children:(0,l.jsx)(a.xu,{marginTop:8,maxWidth:960,paddingX:8,children:(0,l.jsx)(a.QH,{message:r._('You\u2019ve been requested to take over ownership of this board', 'boardOwnershipTransferUpsell.message', 'Message informing user they have received an ownership transfer request'),primaryAction:{accessibilityLabel:r._('Accept', 'boardOwnershipTransferUpsell.acceptAccessibilityLabel', 'Accessibility label for accept button on upsell'),label:r._('Accept', 'boardOwnershipTransferUpsell.acceptLabel', 'Label for accept button on upsell'),onClick:()=>{ie.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callUpdate(),i((0,pt.K8)(o)),s.push(`/${o}/`)}},secondaryAction:{accessibilityLabel:r._('Decline', 'boardOwnershipTransferUpsell.declineAccessibilityLabel', 'Accessibility label for decline button on upsell'),label:r._('Decline', 'boardOwnershipTransferUpsell.declineLabel', 'Label for decline button on upsell'),onClick:()=>{i((0,_t.xx)(e,t))}},title:r._('Board ownership request pending', 'boardOwnershipTransferUpsell.title', 'Title for board ownership transfer upsell')})})})}var mt=o(780280);const bt=(0,i.forwardRef)((({boardTool:{icon:e,link:t,text:o}},n)=>{const[s,r]=(0,i.useState)(!1),{isRTL:d}=(0,mt.B)();return(0,l.jsx)(a.iP,{role:"link",accessibilityLabel:o,href:t,onFocus:()=>r(!0),onBlur:()=>r(!1),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),ref:n,rounding:6,children:(0,l.jsxs)(a.xu,{display:"flex",direction:"column",justifyContent:"center",dangerouslySetInlineStyle:{__style:{paddingBottom:"1px"}},children:[(0,l.jsx)(a.xu,{alignItems:"center",alignSelf:"center",color:s?"lightWash":"lightGray",display:"flex",height:88,justifyContent:"center",rounding:6,width:88,children:(0,l.jsx)(a.JO,{accessibilityLabel:o,color:"default",icon:"text-align-left"===e&&d?"text-align-right":e,size:30})}),(0,l.jsx)(a.xu,{paddingY:1,width:88,children:(0,l.jsx)(a.xv,{align:"center",overflow:"normal",size:"100",weight:"bold",children:o})})]})})}));bt.displayName="BoardTool";const xt=bt;function ft({boardId:e,sectionId:t}){const o=(0,i.useRef)(),n=(0,i.useRef)(),s=(0,i.useRef)(),r=(0,i.useRef)(),d=!!t,c=d?{sectionId:t}:{boardId:e},{data:h,isLoaded:u}=(0,re.Z)({name:d?"SectionToolsFeedResource":"BoardToolsFeedResource",options:c});if(u&&(!h||!h.length))return null;const _=[o,n,s,r],p=null==h?void 0:h.map((({id:e})=>{const t=e.split("-");return t&&t.length>1?Number(t[1]):-1}));return u&&null!=h&&h.length?(0,l.jsx)(a.kC,{alignItems:"center",justifyContent:"center",width:"100%",children:(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[h.map(((e,t)=>{const o=p?p[t]:-1;return(0,l.jsx)(a.xu,{padding:1,children:(0,l.jsx)(xt,{boardTool:e,ref:_[o]})},e.id)})),(0,l.jsx)(W.Z,{anchors:{3003:o.current,3004:n.current,3005:s.current,3007:r.current},placementId:18,positionRelativeToAnchor:!1})]})}):null}var vt=o(50403),yt=o(101136),Pt=o(851942);const Ct=e=>()=>{e({event_type:101,element:10776,component:13216,view_type:5,view_parameter:3069})};function jt({handleAddBoardNote:e,handleAddSection:t,handleCreatePin:o,handleCreateStoryPin:n,surface:s}){const{logContextEvent:r}=(0,p.v)(),d=(0,v.ZP)(),c=(0,i.useRef)();return(0,l.jsx)(a.xu,{bottom:!0,marginBottom:4,position:"fixed",rounding:"circle",width:56,dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",left:"50%",transform:"translate(-50%)"}},children:(0,l.jsx)(Pt.Z,{idealDirection:"up",onAddBoardNote:e,onAddSection:t,onCreatePin:o,onCreateStoryPin:n,onOpen:Ct(r),surface:s,isWithinFixedContainer:!0,children:({active:e,openFlyout:t})=>(0,l.jsxs)(a.xu,{color:"default",display:"inlineBlock",rounding:"circle",children:[(0,l.jsx)(a.hU,{accessibilityLabel:"board"===s?d._('Create a Pin or add a Section', 'BoardPage.ActionBar.AddPinOrSection', 'button triggering a flyout to create a pin or add a section'):d._('Create Pin', 'BoardPage.ActionBar.AddPin', 'button triggering a flyout to create a pin'),bgColor:"white",icon:"add",iconColor:"darkGray",onClick:t,ref:c,selected:e,size:"xl"}),(0,l.jsx)(W.Z,{anchors:{3006:c.current},idealDirection:"up",placementId:18})]})})})}var wt=o(126098);function At(e){const t=(0,v.ZP)(),{boardUrl:o="",onHide:i,slug:n}=e;return(0,l.jsx)(ne.ZP,{duration:2e3,href:`${o}${n}`,onHide:i,text:t._('Section added!', 'Toast for successfully creating a new board section', 'Toast for successfully creating a new board section')})}var St=o(91214),zt=o(81636);const It=St.HW+1;function Bt({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:o}){const i=(0,v.ZP)();return(0,zt.Q)({component:13860,view_type:5,aux_data:o}),(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.8)"}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new a.Ry(It),children:(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:260}},children:(0,l.jsxs)(a.kC,{alignItems:"center",direction:"column",gap:8,maxWidth:500,children:[(0,l.jsx)(a.X6,{align:"center",color:"light",children:i._('This board may contain sensitive content', 'boardPageContainer.sensitivityScreen.heading', 'Warning text on board that may have sensitive content')}),(0,l.jsxs)(a.kC,{gap:6,children:[(0,l.jsx)(a.zx,{color:"red",onClick:e,size:"lg",text:i._('Go back', 'boardPageContainer.sensitivityScreen.backButton', 'Text on button that lets user go back to previous page')}),(0,l.jsx)(a.zx,{color:"white",onClick:t,size:"lg",text:i._('View anyway', 'boardPageContainer.sensitivityScreen.viewButton', 'Text on button that lets user past sensitivity screen')})]}),(0,l.jsx)(a.xu,{paddingY:4,children:(0,l.jsx)(a.xv,{align:"center",color:"light",overflow:"normal",size:"200",children:(0,w.nk)(i._('If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the "..." button at the bottom of any Pin', 'boardPageContainer.sensitivityScreen.text', 'Text telling user how to report a Pin'),{communityGuidelines:(0,l.jsx)(a.xv,{color:"light",inline:!0,size:"200",underline:!0,children:(0,l.jsx)(a.rU,{href:"https://policy.pinterest.com/en/community-guidelines",inline:!0,target:"blank",underline:"hover",children:i._('Community Guidelines', 'boardPageContainer.sensitivityScreen.communityGuidelines', 'Text that links to the community guidelines page')})})})})})]})})})}var kt=o(430323);var Tt=o(124237),Et=o(980750);var Mt=o(677215);var Dt=o(494349),Zt=o(558068),Rt=o(419112),Lt=o(252837);const Ot=()=>{};const Ft=(0,j.ZP)(18,(e=>{var t;return{board_id:e.board.id,pin_count:null!==(t=e.board.sectionless_pin_count)&&void 0!==t?t:0,chrome_push_subscription:(0,wt.Z)()}}))((function({board:e,experience:t,initialModalType:o,refreshBoardData:s=Ot,refreshSectionData:r=Ot,setPlacementExtraContext:d,section:c,showPulsar:h}){var u,_,g;const b=(0,ge.$B)(),{params:{slug:x}}=b,{logContextEvent:f}=(0,p.v)(),P=(0,n.useDispatch)(),C=(0,Me.Z)({shouldStopEventPropagation:!1}),{setFooterPlusButtonVisible:j}=(0,Dt.I)(),w=(0,L.Z)(),A=(0,Ue.Z)(),S=(0,Lt.W$)(w,e),z=(null===(u=e.owner)||void 0===u?void 0:u.id)||"",I=(0,We.q6)(w,z,A),B=(0,ze.Z)({board:e,viewer:w})||I,T=w.isAuth&&w.id===e.pending_ownership_transfer,E=(0,J.t)("web_board_sensitivity_screen"),M=!B&&E().anyEnabled,D=(0,We.lJ)(w,A),Z=D&&(0,st.Z)(e)?`?orbac_subject_id=${D}`:"";(0,i.useEffect)((()=>{let t="other";S?t="own":(0,Lt.Df)(w,e)&&(t="collaborator"),d({board_ownership:t})}),[t]),(0,i.useEffect)((()=>(B&&j(!1),()=>{j(!0)})),[j,B]);const{showOneToast:R}=(0,de.F9)(),O=(0,ge.k6)(),{previous:F}=(0,Zt.H)(),U=0===F.length;!function(){const e=(0,y.x)(),t=(0,L.Z)(),o=(0,re.Z)({name:"UserMetadataResource",options:{user:t}});(0,i.useEffect)((()=>{if(o&&o.data&&(null==e||!e.boardPinDensity)){const{profile_pin_rep_view_type:t}=o.data,i=null!=t?t:"regular";null==e||e.setBoardPinDensity(i)}}))}();const{handleShowMergeSectionsConfirmationModal:W,mergeConfirmationModalProps:$,onConfirm:G}=(0,Mt.Z)({board:e}),q=function(){const e=(0,v.ZP)(),{logContextEvent:t}=(0,p.v)(),o=(0,n.useDispatch)(),{showBlockingActionToast:i}=(0,Et.Z)();return({board:n,targetBoard:s})=>{t({event_type:7172,object_id_str:n.id,aux_data:{merge_flow:"menu"}}),o((0,pt.xH)(n.id,s.id)).then((()=>{i({actionType:"merge",board:s})})).catch((t=>{Tt.Z.showError(t.message||e._('Failed to merge boards', 'Error message when failed to merge boards', 'Error message when failed to merge boards'))}))}}(),V={board_id:e.id,reason:(null===(_=e.sensitivity_screen)||void 0===_?void 0:_.reason)||""},[Y,X]=(0,i.useState)(!(null===(g=e.sensitivity_screen)||void 0===g||!g.show_warning)&&M),[K,Q]=(0,i.useState)(null),[ee,te]=(0,i.useState)(o||null),[oe,ne]=(0,i.useState)(null),[se,ae]=(0,i.useState)(e&&(0,Rt.VV)(w,e)||"custom"),le=()=>te(N.s.boardArchiveConfirmation),ce=()=>{const e=w.isAuth?`/${(0,We.Ms)(w,A)}`:"/";O.replace(e)},he=C((e=>{te(N.s.editSection),Q(e)})),ue=C((t=>{te(null),(t=>{R((({hideToast:o})=>(0,l.jsx)(At,{boardUrl:e.url,onHide:o,slug:t.slug})))})(t)})),_e=C((()=>{!function(e){e({event_type:101,element:10780,component:13217,view_type:5,view_parameter:3069})}(f),O.push({pathname:"/pin-builder/",state:{board:e,boardSection:c}})})),pe=C((()=>{f({event_type:101,element:10780,component:13217,view_type:5,view_parameter:3069,aux_data:{entry_type:"board_plus_button"}}),O.push({pathname:"/idea-pin-builder/",state:{entry_type:"board_plus_button"}})})),me=C((()=>{!function(e){e({event_type:101,element:10781,component:13217,view_type:5,view_parameter:3069})}(f),te(N.s.pincode)})),be=C((()=>{!function(e){e({event_type:101,element:10779,component:13217,view_type:5,view_parameter:3069})}(f),te(N.s.simpleCreateSection)})),xe=C((()=>{te(N.s.mergeBoard)})),fe="custom"!==se;return(0,l.jsx)(kt.Z,{view:5,viewParameter:(0,k.Z)({board:e,viewer:w}),objectId:e.id,children:(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:Y?{filter:"blur(30px)"}:{}},children:[(0,l.jsx)(ht,{board:e,handleBoardEditClick:()=>{f({event_type:101,element:10845,component:13216,view_type:5,view_parameter:3069}),te(N.s.boardEdit)},handleFollowersClick:()=>{te(N.s.followers)},handleSectionEditClick:()=>he(),handleShowBoardArchiveConfirmation:le,handleShowBoardUnarchiveConfirmation:()=>te(N.s.boardUnarchiveConfirmation),handleShowCollabAndPermissionsModal:()=>te(N.s.collaboratorsAndPermissions),handleShowCreatePincodeModal:me,handleShowMergeModal:xe,section:c,showPulsar:h}),B&&(0,l.jsx)(a.xu,{marginBottom:6,children:(0,l.jsx)(ft,{boardId:e.id,sectionId:null==c?void 0:c.id})}),T&&(0,l.jsx)(gt,{boardId:e.id,collaboratorId:w.isAuth?w.id:"",collaboratorUsername:w.isAuth?w.username:""}),ee!==N.s.jumpstartBoard&&(0,l.jsx)(H,{board:e,currentView:se,handleContentViewChange:e=>ae(e),handleSetCurrentModal:te,handleShowEditSectionModal:he,handleShowMergeSectionsConfirmationModal:W,isOwnBoard:S,isOwnerOrCollaborator:B,isPinGridSorted:fe,refreshBoardData:s,refreshSectionData:r,section:c}),(0,l.jsx)(m,{boardId:e.id,handleShowArchiveConfirmation:le,handleShowGroupPinsModal:(e,t)=>{te(N.s.groupPins),ne({clusterId:e,suggestedSectionName:t})}}),B&&(0,l.jsx)(jt,{handleAddBoardNote:I||c?null:()=>{(async()=>{var t;const o=null===(t=e.owner)||void 0===t?void 0:t.username;if(o){const t=(await ie.ZP.create("BoardNoteResource",{slug:x,username:o}).callCreate()).resource_response.data;O.push(e.url?`${e.url}_tools/notes/${t.id}`:"")}})()},handleAddSection:be,handleCreatePin:_e,handleCreateStoryPin:pe,surface:c?"section":"board"}),ee&&(0,l.jsx)(ut.Z,{actions:{completeCreateSectionAction:ue,onBoardArchiveChange:()=>{s(),P((0,pt.K8)(w.isAuth?w.username:""))},onBoardDelete:ce,onBoardLeave:e=>{P((0,pt.K8)(w.isAuth?w.username:"")),ce()},onBoardMerge:t=>{q({board:e,targetBoard:t}),ce()},onBoardSectionDelete:()=>{if(Q(null),te(null),c){var t;const o=null!==(t=e.url)&&void 0!==t?t:"";O.replace(`${o}${Z}`)}},onBoardSectionSave:({title:t,slug:o})=>{if(Q(null),te(null),c){var i;const t=`${null!==(i=e.url)&&void 0!==i?i:""}${o}/${Z}`;O.replace(t)}},onConfirmMergeSection:G},board:e,boardSection:c||K,currentModal:ee,groupPinsData:oe,mergeConfirmationModalProps:$,onClearModal:()=>te(null)}),(0,l.jsx)(vt.Z,{placementId:18}),(0,l.jsx)(yt.Z,{placementId:18})]}),Y&&(0,l.jsx)(Bt,{handleGoBack:()=>{f({event_type:101,component:13860,element:73,view_type:5,aux_data:{...V}}),U&&O.replace("/"),O.goBack()},hideSensitivityScreen:()=>{P((0,pt.Fi)(e.id)),f({event_type:101,component:13860,element:12448,view_type:5,aux_data:{...V}}),X(!1)},sensitivityScreenAuxData:V})]})})}))},879616:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(221263);function n({board:e,viewer:t}){return(0,i.Z)(t,e)?3069:3070}},565497:(e,t,o)=>{o.d(t,{q:()=>s});var i=o(535095);function n(e){return"most_reactions"===e?"most_reactions":"default"}function s(e,t,o,s,r){var a,l;const{owner:d}=e,c=(null==d?void 0:d.id)===t.id;let h="react_grid_pin";return t.isPartner&&c&&(h="partner_react_grid_pin"),{board_id:e.id,board_url:null!==(a=e.url)&&void 0!==a?a:"",currentFilter:s,field_set_key:h,filter_section_pins:!s||s===i.cg,sort:n(o),layout:null!==(l=e.layout)&&void 0!==l?l:"",page_size:25,redux_normalize_feed:!0,...r?{orbac_subject_id:r}:Object.freeze({})}}},946327:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(883119),n=o(785893);function s({children:e,setMaxWidth:t=!0}){return(0,n.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:t?(0,n.jsx)(i.xu,{width:"100%",paddingX:2,maxWidth:774,children:e}):(0,n.jsx)(i.xu,{width:"100%",children:e})})}},990270:(e,t,o)=>{o.d(t,{ZP:()=>H,fx:()=>N});var i=o(667294),n=o(274319),s=o(618899),r=o(898781),a=o(883119),l=o(785893);function d({isSection:e}){const t=(0,r.ZP)(),o=e?t._('There aren\u2019t any Pins in this section yet', 'EmptyBoard.EmptyText.section', 'Statement that there are no pins in the section'):t._('There aren\u2019t any Pins on this board yet', 'EmptyBoard.EmptyText.board', 'Statement that there are no pins on the board');return(0,l.jsx)(s.Z,{children:(0,l.jsx)(a.xu,{paddingY:8,children:(0,l.jsx)(a.xv,{color:"default",size:"300",children:o})})})}function c({hasSections:e,isSection:t}){return(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:!t&&e?null:(0,l.jsx)(d,{isSection:t})})}var h=o(417498),u=o(691024),_=o(620707);const p=e=>null===e,g=e=>e?164:5,m=e=>"story"===e.type&&["recommended_searches","search_related_queries","BUBBLE_ONE_COL"].includes(e.story_type),b=(e,t)=>e+(e>=t?1:0),x=(0,_.xZ)(0,_._Y)((e=>e));function f(e){const{boardSectionId:t,gridItem:o,index:i,paddingBottom:n,renderPinItem:s,viewParameter:r}=e,{itemKey:d}=o;let c=null;switch(d.type){case"story":c=(0,l.jsx)(u.Z,{slot:i,storyId:d.id,viewType:g(t),viewParameter:r});break;case"pin":c=(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:n}},children:s(o,i)});break;default:c=null}return(0,l.jsx)(a.xu,{children:c},`${d.type}:${d.id}`)}var v=o(993404),y=o(572551),P=o(345221),C=o(583421);const j=-1;const w=(0,P.Z)(C.y.Pin)((function(e){const{allowReordering:t,children:o,connectDropTarget:i,index:n,isDragWithinBounds:s}=e;return t&&i?i((0,l.jsx)("div",{style:{opacity:n===j||s?1:.5},children:o})):o}));var A=o(81482),S=o(329734),z=o(301921);function I(e){const{allowReordering:t,boardSectionId:o,gridItem:i,handlePinDragBegin:n,handlePinDragEnd:s,handlePinDragHover:r,index:a,lfvExperiences:d,onBulkEditPinClick:c,source:h,target:u,viewParameter:_}=e,{inBulkEditMode:p,isCollaborator:m,isGroupBoard:b,isOwnBoard:x,isSelected:f,itemKey:{id:v}}=i,y=h!==j,P=u===a,w={pinId:v,imageOnlyOption:!x&&(0,S.Z)(d)?"image-only":"default",attributionOption:b?"show":"hide",pinImageCrop:"none",surface:p?"BulkEditMode":"BaseBoardPinGrid",trackingParameters:{slotIndex:a,viewParameter:_,viewType:g(o)}};if(!x&&!m)return(0,l.jsx)(z.default,{...w});let I="no-selection";p&&(I=f?"selected":"deselected");let B=(0,l.jsx)(z.default,{...w,disableHover:y||p,selectionState:I});return p&&(B=(0,l.jsx)(A.Z,{onClick:()=>c(v),children:B})),t&&(B=(0,l.jsx)(C.Z,{index:a,isDragging:P,onDragBegin:n,onDragHover:r,onDragEnd:s,type:C.y.Pin,children:B})),B}var B=o(6637),k=o(490061),T=o(784450),E=o(232843),M=o(293880),D=o(407043),Z=o(444445),R=o(708206),L=o(281615);function O(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class F extends i.Component{constructor(...e){super(...e),O(this,"state",{reorderSource:j,reorderTarget:j}),O(this,"handlePinAdded",(e=>{const{board:t,boardSectionId:o,dispatch:i}=this.props;e===t.id&&(i((0,M.xQ)(t.id)),o&&i((0,h.Z)(o)),this.props.resource.refresh())})),O(this,"handlePinDragBegin",(e=>this.setState({reorderSource:e}))),O(this,"handlePinDragHover",(e=>{const{reorderTarget:t}=this.state;e!==t&&this.setState({reorderTarget:e})})),O(this,"handlePinDragEnd",(e=>{const{board:t,boardSectionId:o,dispatch:i,feed:n,viewParameter:s}=this.props,{reorderSource:r,reorderTarget:a}=this.state;if(n&&e&&a!==j&&r!==j&&a!==r){const e=this.hiddenItemIndex,[l,d]=-1===e?[r,a]:[b(r,e),b(a,e)],c=(0,L.zX)(n,l,d),h=n[l].id;i((0,v.Z)({feedType:o?L.DV.SECTION_PINS:L.DV.BOARD_PINS,feedId:o||t.id,itemType:"pin",targetItemId:n[d].id,sourceItemId:n[l].id}));const u={board_id:t.id,pin_id:h},_=c.filter((e=>"pin"===e.type)).map((e=>e.id)),p=_.indexOf(h),m=p-1;m>=0&&m<_.length&&(u.pin_id_before=_[m]);const x=p+1;x>=0&&x<_.length&&(u.pin_id_after=_[x]);const f={object_id_str:h,view_type:g(o),view_parameter:s};B.ZP.create("BoardPinsReorderResource",u).callUpdate({showError:!1}).then((()=>this.props.logContextEvent({event_type:7122,...f})))}this.setState({reorderSource:j,reorderTarget:j})})),O(this,"handleFetchMore",(()=>{const{resource:{fetchMore:e,isAtEnd:t,isFetching:o}}=this.props;t||o||e()})),O(this,"renderPinItem",((e,t)=>{const{lfvExperiences:o,onBulkEditPinClick:i,viewer:n,viewParameter:s,boardSectionId:r}=this.props,{reorderSource:a,reorderTarget:d}=this.state;return(0,l.jsx)(I,{allowReordering:this.allowReordering,boardSectionId:r,gridItem:e,handlePinDragBegin:this.handlePinDragBegin,handlePinDragEnd:this.handlePinDragEnd,handlePinDragHover:this.handlePinDragHover,index:t,lfvExperiences:o,onBulkEditPinClick:i,source:a,target:d,viewer:n,viewParameter:s})})),O(this,"renderGridItem",(({data:e,itemIdx:t})=>{const{boardSectionId:o,viewParameter:i}=this.props;return(0,l.jsx)(f,{boardSectionId:o,gridItem:e,index:t,paddingBottom:this.props.denseViewSelected?6:0,renderPinItem:this.renderPinItem,viewParameter:i})}))}componentDidMount(){const{feed:e,resource:{isFetching:t,refresh:o}}=this.props;p(e)&&!t&&o()}componentDidUpdate(e){const{feed:t,resource:{isFetching:o,refresh:i}}=this.props;p(t)&&!p(e.feed)&&!o&&i()}get allowReordering(){const{board:{collaborated_by_me:e=!1},isOwnBoard:t,isPinGridSorted:o}=this.props;return!o&&(t||e)}get hiddenItemIndex(){const{denseViewSelected:e,feed:t}=this.props;return e?(t||[]).findIndex(m):-1}render(){const{bulkEditSelectedPins:e,board:t,boardSectionId:o,feed:s,footerStoryId:r,denseViewSelected:d,inBoardOrganizationMode:h,inSectionOrganizationMode:u,isDragWithinBounds:_,inSelectAll:p,renderFooterStory:g,resource:{isAtEnd:m,isFetching:b,isLoaded:f},isOwnBoard:v,refreshFilteredFeed:P}=this.props,{access:C,collaborated_by_me:A=!1,collaborator_count:S=0,section_count:z}=t,{reorderSource:I,reorderTarget:B}=this.state;if(!s||!s.find((e=>"pin"===e.type)))return b?(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('Board Pins grid', ' - ', ' -- '),show:!0}):(f&&s&&0===s.length&&P&&P(),(0,l.jsxs)(i.Fragment,{children:[f&&s&&0===s.length&&(0,l.jsx)(c,{hasSections:!!z,isSection:!!o}),g&&r&&g(r)]}));const k=this.allowReordering,T=k&&I!==B&&I!==j&&B!==j;let M=s||[];const D=this.hiddenItemIndex;if(-1!==D&&(M=[...M.slice(0,D),...M.slice(D+1)]),T&&(M=(0,L.zX)(M,I,B)),!M.length)return(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('Board Pins grid', ' - ', ' -- '),show:!0});const R={inBulkEditMode:h||u,inDenseView:d||!1,isGroupBoard:S>0,userCanEdit:(C||[]).includes("write"),isOwnBoard:v,isCollaborator:A},O=M.map(((t,o)=>{const{inBulkEditMode:i}=R,n="pin"===t.type&&!(null==e||!e.includes(t.id));return x({...R,isSelected:i&&(p?!n:n),itemKey:t})}));return(0,l.jsx)(E.H,{value:{onPinCreate:({boardId:e})=>this.handlePinAdded(e)},children:(0,l.jsxs)(a.xu,{"data-test-id":"base-board-pin-grid",minHeight:d?800:"",children:[(0,l.jsx)(w,{allowReordering:k,index:B,isDragWithinBounds:_,children:(0,l.jsx)(y.default,{columnWidth:d?Z.Lo:Z.yF,comp:this.renderGridItem,gutterWidth:d?2*Z.$H/3:Z.$H,isAtEnd:m,isFetching:b,isLoaded:f,items:O,layout:"basicCentered",loadItems:this.handleFetchMore,paddingStyle:d?"dense":"simplified"},`${String(d)}-${String(h)}-${String(u)}`)}),k&&I!==j&&(0,l.jsx)(n.Z,{}),b&&(0,l.jsx)(a.xu,{position:"relative",paddingY:3,children:(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('Loading Board Feed', ' - ', ' -- '),show:!0})}),m&&r&&g&&g(r)]})})}}const N=e=>e?e.reduce((({feed:e,footerStoryId:t},o)=>{const i="story"===o.type&&"board_ideas_preview_detailed"===o.story_type;return{feed:e.concat(i?[]:[o]),footerStoryId:i?o.id:t}}),{feed:[],footerStoryId:void 0}):{feed:e,footerStoryId:void 0},U=(0,R.compose)((0,T.ZP)(1000182),k.Z)((function(e){const{logContextEvent:t}=(0,D.v)(),o=(0,r.ZP)();return(0,l.jsx)(F,{...e,i18n:o,logContextEvent:t})}));U.displayName="BaseBoardPinGrid";const H=U},784913:(e,t,o)=>{o.d(t,{Z:()=>p});var i=o(966338);function n(e,t,o,i=""){return{currentFilter:o,field_set_key:"react_grid_pin",is_own_profile_pins:t,page_size:25,redux_normalize_feed:!0,section_id:e,orbac_subject_id:i}}var s=o(310204),r=o(717615),a=o(784590),l=o(19121),d=o(281615),c=o(231947),h=o(990270),u=o(785893);const _=(0,i.connect)(((e,t)=>(0,h.fx)(e.feeds[d.DV.SECTION_PINS][t.boardSectionId])))((function(e){const t=(0,l.Z)(),o=(0,r.Z)(),i=(0,c.lJ)(t,o),d=(0,a.Z)({name:"BoardSectionPinsResource",options:n(e.boardSectionId,e.isOwnBoard,e.currentFilter,i)}),_=(0,a.Z)({name:"BoardsResource",options:(0,s.Z)(e.viewer.username,!0)});return(0,u.jsx)(h.ZP,{...e,boardsResource:_,resource:d})}));_.displayName="BoardSectionPinGrid";const p=_},104443:(e,t,o)=>{function i(e,t){const{url:o}=e,{slug:i}=t;return`${null!=o?o:""}${i}/`}o.d(t,{Z:()=>i})},11415:(e,t,o)=>{function i(e=""){return`${e}_tools/more-ideas/`}o.d(t,{Z:()=>i})},552167:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(667294),n=o(301921),s=o(883119),r=o(785893);function a({index:e,isSelected:t,pin:o,handlePinSelectionChanged:a}){const l=o.id,d=(0,i.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),a(l,!t)}),[l,t]);return(0,r.jsx)(s.iP,{onTap:d,rounding:4,children:(0,r.jsx)(n.default,{attributionOption:"hide",blockClickEvents:!0,pin:o,pinId:o.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:t?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}},607905:(e,t,o)=>{o.d(t,{Z:()=>m});var i=o(667294),n=o(966338),s=o(4392),r=o(121151),a=o(843747),l=o(552167),d=o(898781),c=o(784590),h=o(683190),u=o(407043),_=o(424432),p=o(883119),g=o(785893);function m({boardId:e,clusterId:t,handleAddClick:o,isBoardOrganizeFeed:m,onDismiss:b,suggestedSectionTitle:x}){var f;const{logContextEvent:v}=(0,u.v)(),y=(0,d.ZP)(),P=(0,i.useRef)(null),[C,j]=(0,i.useState)([]),[w,A]=(0,i.useState)(x),{data:S,fetchMore:z,isFetching:I,isLoaded:B}=(0,c.Z)({name:"SectionSuggestionsPinsResource",options:{boardId:e,clusterId:t}}),k=m?3541:3069,T=(0,n.useDispatch)(),{setShowCreateSectionTooltip:E}=null!==(f=(0,_.L)())&&void 0!==f?f:{},M=(0,i.useCallback)((()=>{if(S){const t=S.map((e=>e.id)),i=t.length,n=t.filter((e=>!C.includes(e)));o&&o(w),T((0,s.Z)({boardId:e,name:w},y)).then((t=>{T((0,a.Z)({inverseSelection:!1,selectedPinIds:n,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:t.id}},y))})).then((()=>{T((0,h.Tq)(e,"pin_count")),v({event_type:8606,object_id_str:e,view_type:5,view_parameter:k,aux_data:{number_pins_suggested:i,number_pins_selected:n.length,section_title:w,suggested_section_name:x}}),b(),m||E(!0)}))}}),[C,w,S]),D=(e,t)=>{const o=[...C],i=o.indexOf(e);t&&-1!==i?o.splice(i,1):t||-1!==i||o.push(e),j(o)};return(0,g.jsx)(r.ZP,{accessibilityModalLabel:y._('Add suggested pins to your newly created section modal', 'sectionSuggestionPinsModal.modal.accessibilityLabelForModal', 'Accessibility label for modal'),allowScroll:!0,footer:(0,g.jsxs)(p.xu,{display:"flex",justifyContent:"end",paddingX:2,children:[(0,g.jsx)(p.xu,{display:"inlineBlock",marginEnd:2,children:(0,g.jsx)(p.zx,{onClick:()=>{b(),m||E(!0),v({event_type:8607,object_id_str:e,view_type:5,view_parameter:k,aux_data:{suggested_section_name:x}})},text:y._('Not now', 'sectionSuggestionPinsModal.footer.cancelButton', 'Cancel creating a board section')})}),(0,g.jsx)(p.xu,{display:"inlineBlock",children:(0,g.jsx)(p.zx,{color:"red",onClick:M,text:y._('Add section', 'sectionSuggestionPinsModal.footer.addSectionButton', 'Add pins and section')})})]}),heading:y._('Pick your Pins and you\'re all set!', 'sectionSuggestionPinsModal.modal.heading', 'Heading for modal to add suggested pins to your newly created section'),onDismiss:b,size:704,children:(0,g.jsxs)(p.xu,{maxHeight:600,maxWidth:704,ref:P,overflow:"auto",children:[(0,g.jsxs)(p.xu,{padding:4,paddingX:2,children:[(0,g.jsx)(p.xv,{size:"200",children:y._('Section name', 'sectionSuggestionPinsModal.modal.sectionNameTitle', 'Title for section name')}),(0,g.jsx)(p.xu,{paddingY:2,children:(0,g.jsx)(p.nv,{id:"SectionSuggestionPinsTitle",onChange:({value:e})=>{A(e)},placeholder:y._('Add a name for this group', 'sectionSuggestionPinsModal.modal.sectionNameTitle.placeholder', 'Placeholder for section name'),size:"lg",value:w})})]}),B&&S&&(0,g.jsx)(p.Rk,{columnWidth:152,comp:({data:e,itemIdx:t})=>(0,g.jsx)(l.Z,{index:t,isSelected:!C.includes(e.id),pin:e,handlePinSelectionChanged:D}),gutterWidth:16,items:S,loadItems:z,scrollContainer:()=>P.current}),(0,g.jsx)(p.$j,{accessibilityLabel:y._('Loading pins', 'sectionSuggestionPinsModal.modal.spinner', 'Loading indicator'),show:I})]})})}},81482:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(898781),n=o(785893);function s({children:e}){return(0,n.jsx)("div",{className:"withoutBoxShadow",children:e})}var r=o(883119);function a({children:e,onClick:t}){const o=(0,i.ZP)();return(0,n.jsxs)(r.xu,{position:"relative",children:[(0,n.jsx)(r.xu,{bottom:!0,left:!0,right:!0,top:!0,position:"absolute",children:(0,n.jsx)(s,{children:(0,n.jsx)(r.iP,{accessibilityLabel:o._('Drag and drop item', 'BulkEditPinWrapper.tapArea.accessibilityLabel', 'Label for item that can be dragged and dropped.'),fullHeight:!0,fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),t()},rounding:2})})}),(0,n.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}},874917:(e,t,o)=>{o.d(t,{P:()=>l,i:()=>d});var i=o(694379),n=o(898781),s=o(883119),r=o(785893);const a=({bold:e=!1,count:t,shortform:o=!1,size:n="200",text:a})=>(0,r.jsx)(s.xu,{children:(0,r.jsxs)(s.xv,{align:"center",size:n,color:"default",weight:e?"bold":"normal",children:[(0,r.jsx)(i.Z,{value:t,shortform:o})," ",a]})}),l=({bold:e,count:t,onClick:o,shortform:i,size:l})=>{const d=(0,n.ZP)();return(0,r.jsx)(s.xu,{children:(0,r.jsx)(s.iP,{onTap:o,children:(0,r.jsx)(a,{bold:e,count:t,shortform:i,size:l,text:d.ngettext('follower', 'followers', t, 'label for n follower(s)', 'label for n follower(s)')})})})},d=({count:e,size:t})=>{const o=(0,n.ZP)(),a=o.ngettext('Pin', 'Pins', e, 'label for n board section(s)', 'label for n board section(s)');return(0,r.jsx)(s.xu,{children:(0,r.jsxs)(s.xv,{inline:!0,size:t,color:"default",children:[!!e&&(0,r.jsx)(i.Z,{value:e})||"0"," ",a]})})}},72033:(e,t,o)=>{o.d(t,{Z:()=>i});const i=({boardCollaboratorCount:e,collaborators:t})=>{const o=e?e+1:t.length,i=o>3,n=t.slice(0,i?2:3);return{displayedCollaborators:n,nonDisplayedCollaboratorCount:i?o-n.length:0}}},618899:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(883119),n=o(785893);function s({children:e}){return(0,n.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",children:e})}},542190:(e,t,o)=>{o.d(t,{Z:()=>_});var i=o(966338),n=o(960673),s=o(396026),r=o.n(s),a=o(887831),l=o(898781),d=o(407043),c=o(883119),h=o(785893);function u({pin:e}){var t,o,i,s,r;return(0,h.jsx)(c.zd,{rounding:4,width:138,children:(0,h.jsx)(n.Z,{height:207,pin:e&&{imageUrl:null!==(t=null===(o=e.images)||void 0===o||null===(i=o["474x"])||void 0===i?void 0:i.url)&&void 0!==t?t:"",dominantColor:null!==(s=e.dominant_color)&&void 0!==s?s:"",description:null!==(r=e.description)&&void 0!==r?r:""},width:138})})}const _=(0,i.connect)(((e,t)=>{const o=e.stories[t.storyId];return o&&"board_ideas_preview_detailed"===o.story_type?{story:o}:{story:void 0}}),(()=>({})))((function({collection:e,story:t,url:o}){const{logContextEvent:i}=(0,d.v)(),n=(0,l.ZP)(),{isHovering:s,hoverHandlers:_}=(0,a.Z)();if(!t)return null;const p=t.objects.reduce(((e,t)=>e.concat("pin"===t.type?[t]:[])),[]);return(0,h.jsx)("div",{className:"moreIdeasOnBoard",children:(0,h.jsx)(c.iP,{role:"link",href:`${o}?ideas_referrer=${t.referring_source}`,onTap:()=>i({event_type:101,element:10600,view_type:"board_section"===e.type?164:5,object_id_str:e.id,view_parameter:3069}),fullWidth:!1,onMouseEnter:_.onMouseOver,onMouseLeave:_.onMouseLeave,rounding:4,children:(0,h.jsxs)(c.xu,{alignItems:"start",color:s?"lightGray":"white",direction:"column",display:"flex",justifyContent:"start",marginEnd:-3,paddingX:3,paddingY:2,rounding:4,width:"100%",children:[(0,h.jsx)(c.xu,{padding:2,children:(0,h.jsx)(c.X6,{size:"400",lineClamp:1,children:"board_section"===e.type?n._('Find some ideas for this section:', 'Call-to-action text that upsells more ideas tab for an empty section', 'Call-to-action text that upsells more ideas tab for an empty section'):n._('Find some ideas for this board:', 'Call-to-action text that upsells more ideas tab for an empty board', 'Call-to-action text that upsells more ideas tab for an empty board')})}),(0,h.jsx)(c.xu,{display:"flex",justifyContent:"between",padding:2,width:"100%",children:r()(0,5).map((e=>{const t=p[e];return(0,h.jsx)(c.xu,{children:(0,h.jsx)(u,{pin:t})},`${t?t.id:e}`)}))})]})})})}))},443678:(e,t,o)=>{function i({boardDensity:e,component:t,viewType:o},i){i({event_type:101,component:t,element:function({boardDensity:e,viewType:t}){switch(t){case 164:return"regular"===e?10618:10619;case 5:return"regular"===e?10607:10608;default:return 10607}}({boardDensity:e,viewType:o}),...o?{view_type:o,view_parameter:4===o?3106:3069}:Object.freeze({})})}o.d(t,{Z:()=>i})},104498:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(6637);function n({density:e,surface:t}){const o="board"===t?{profile_pin_rep_view_type:e}:{board_pin_rep_view_type:e};i.ZP.create("UserMetadataResource",o).callUpdate()}},960673:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(66699),n=o(898781),s=o(883119),r=o(785893);function a({pinCount:e,height:t,size:o}){const a=(0,n.ZP)(),l=(0,i.Z)(a._('+{{ pinCount }}', '+N count overlay on pin selections', '+N count overlay on pin selections'),{pinCount:e});return(0,r.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",justifyContent:"center",height:t,children:"sm"===o?(0,r.jsx)(s.xv,{color:"light",size:"200",weight:"bold",children:l}):(0,r.jsx)(s.X6,{color:"light",size:"500",children:l})})}function l({additionalPinCount:e,additionalPinCountSize:t="lg",pin:o,width:i,height:n,rounded:l}){return(0,r.jsx)(s.zd,{height:n,width:i,rounding:l?4:0,wash:!0,children:o&&(0,r.jsx)(s.Ee,{alt:o.description,color:o.dominantColor,fit:"cover",naturalHeight:n,naturalWidth:i,src:o.imageUrl,children:!!e&&(0,r.jsx)(a,{pinCount:e,height:n,size:t})})})}},13788:(e,t,o)=>{o.d(t,{Ev:()=>s,IK:()=>n,Oj:()=>r,bW:()=>a});var i=o(883119);const n=1,s=1,r=2,a=new i.Ry(5e3)},704418:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(667294),n=o(883119),s=o(785893);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class a extends i.Component{constructor(...e){super(...e),r(this,"state",{isHovering:!1}),r(this,"onHover",(()=>{this.setState({isHovering:!0})})),r(this,"offHover",(()=>{this.setState({isHovering:!1})}))}render(){const{name:e,selected:t,image:o,inFlyoutExp:i}=this.props;var r,a,l;return i?(0,s.jsxs)(n.xu,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[(0,s.jsx)(n.xu,{children:(0,s.jsx)(n.zd,{height:40,width:40,rounding:2,children:this.state.isHovering&&o?(0,s.jsx)(n.Ee,{alt:"",color:"",fit:"cover",naturalHeight:null!==(r=o.height)&&void 0!==r?r:1,naturalWidth:null!==(a=o.width)&&void 0!==a?a:1,src:null!==(l=o.url)&&void 0!==l?l:""}):(0,s.jsx)(n.xu,{color:"secondary",height:40,width:40})})}),(0,s.jsx)(n.xu,{padding:2,children:(0,s.jsx)(n.X6,{size:"400",children:e})})]}):(0,s.jsxs)(n.xu,{alignItems:"center",color:t?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,s.jsx)(n.xu,{children:(0,s.jsx)(n.JO,{color:t?"default":"subtle",icon:"add",accessibilityLabel:""})}),(0,s.jsx)(n.xu,{marginStart:3,children:(0,s.jsx)(n.xv,{color:t?"default":"subtle",weight:"bold",children:e})})]})}}var l=o(898781),d=o(784590),c=o(129291),h=o(407043);const u=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:o,image:r,minHeight:u,onBoardSelected:_})=>{const{logContextEvent:p}=(0,h.v)(),g=(0,l.ZP)(),[m,b]=(0,i.useState)(-1),x=(0,c.iN)(),{data:f=[],error:v,isLoaded:y}=(0,d.Z)({name:"BoardTitleSuggestionsResource",options:{pin_id:o}}),P=(C=f,(0,i.useMemo)((()=>C&&C.length?C.map((e=>e.title)):[]),[C]));var C;(0,i.useEffect)((()=>{y&&t&&x&&(v?x.error():x.stop())}),[y]);const j=()=>{b(-1)},w=(t,o)=>{const i=m===o;return(0,s.jsx)("li",{children:(0,s.jsx)(n.iP,{onMouseEnter:()=>(e=>{b(e)})(o),onMouseLeave:j,onTap:()=>(e=>{_(P[e],!1),p({event_type:101,component:13025,element:23})})(o),children:(0,s.jsx)(a,{selected:i,name:t,inFlyoutExp:e,image:r})})},o)};return y?P&&P.length?e?(0,s.jsx)(n.xu,{children:(0,s.jsx)("ul",{children:P.map(w)})}):t?(0,s.jsxs)(n.xu,{children:[(0,s.jsx)(n.xu,{marginTop:5,marginStart:6,marginBottom:3,children:(0,s.jsx)(n.xv,{children:g._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,s.jsx)("ul",{children:P.map(w)})]}):(0,s.jsxs)(n.xu,{children:[(0,s.jsx)(n.xu,{marginTop:2,paddingX:5,children:(0,s.jsx)(n.xv,{children:g._('Suggested board names', ' - ', ' -- ')})}),(0,s.jsx)("ul",{children:P.map(w)})]}):null:(0,s.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:u||"",children:(0,s.jsx)(n.$j,{accessibilityLabel:g._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},275903:(e,t,o)=>{o.d(t,{Z:()=>m});var i=o(667294),n=o(966338),s=o(4392),r=o(755742),a=o(756777),l=o(717615),d=o(19121),c=o(231947),h=o(898781),u=o(883119),_=o(785893);function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class g extends i.Component{constructor(e){super(e),p(this,"onCreateSection",(()=>{const{board:e,dispatch:t,completeCreateSectionAction:o,pinImport:i,viewer:n,orbacActingAs:r}=this.props,a=(0,c.lJ)(n,r);return this.setState({isSaving:!0}),t((0,s.Z)({boardId:e.id,name:this.state.inputName.trim(),pinImport:i},this.props.i18n,a)).then((e=>{this.setState({isSaving:!1}),o(e)})).catch((e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})}))})),p(this,"handleKeyDown",(({event:e,value:t})=>{const{createError:o,inputName:i}=this.state;[r.Z.ENTER,r.Z.NUMPAD_ENTER].includes(e.which)&&!o&&i.trim()&&this.onCreateSection()})),p(this,"handleChangeName",(({value:e})=>{this.setState({createError:null,inputName:e})})),p(this,"handleInputRef",(e=>{this.setState({inputRef:e})})),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:o,inputRef:i}=this.state;!i||t.inputRef&&!o||i.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:o,inputName:i,isSaving:n}=this.state,s=!!i.trim()&&!o;return(0,_.jsxs)(u.xu,{display:"flex",direction:"column",color:"default",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&(0,_.jsx)(u.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,_.jsx)(u.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,_.jsxs)(u.xu,{padding:4,children:[(0,_.jsx)(u.xu,{marginBottom:2,children:(0,_.jsx)(u.__,{htmlFor:"sectionEditName",children:(0,_.jsx)(u.xv,{size:"200",color:o?"error":"subtle",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,_.jsx)(u.xu,{children:(0,_.jsx)(u.xu,{ref:this.handleInputRef,children:(0,_.jsx)(u.nv,{errorMessage:o||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:i})})})]}),(0,_.jsx)(u.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow"}),(0,_.jsx)(u.xu,{padding:4,children:(0,_.jsx)(u.kC,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsx)(a.Z,{disabled:!s||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}const m=(0,n.connect)()((function(e){const t=(0,h.ZP)(),o=(0,d.Z)(),i=(0,l.Z)();return(0,_.jsx)(g,{...e,i18n:t,viewer:o,orbacActingAs:i})}))},950035:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(89254),n=o(883119),s=o(785893);function r({url:e,description:t,color:o}){return o=o||"#8fa7bf",(0,s.jsx)(n.xu,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:o}},children:(0,s.jsxs)(n.xu,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&(0,s.jsx)(n.xu,{marginBottom:2,children:(0,s.jsx)(n.xv,{color:"inverse",size:"100",children:(0,i.Z)(e).hostname||e})}),(0,s.jsx)(n.xu,{maxHeight:144,children:(0,s.jsx)(n.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},431256:(e,t,o)=>{o.d(t,{Z:()=>p});var i=o(667294),n=o(755742),s=o(694379),r=o(6637),a=o(342877),l=o(349700),d=o(898781),c=o(883119),h=o(785893);function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class _ extends i.Component{constructor(...e){super(...e),u(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",(()=>{})),u(this,"mounted",!1),u(this,"addHashtag",(e=>{this.props.addHashtag(e),this.setState({recommendations:[]})})),u(this,"handleKeyDown",(e=>{e.keyCode===n.Z.UP?this.handlePrevHashtag(e):e.keyCode===n.Z.DOWN?this.handleNextHashtag(e):e.keyCode===n.Z.ESCAPE?this.handleClose(e):e.keyCode===n.Z.ENTER&&this.handleSubmit(e)})),u(this,"handlePrevHashtag",(e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState((e=>({selectedIndex:e.selectedIndex-1})))})),u(this,"handleNextHashtag",(e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState((e=>({selectedIndex:e.selectedIndex+1})))})),u(this,"handleClose",(e=>{e.preventDefault(),this.setState({recommendations:[]})})),u(this,"handleSubmit",(e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)})),u(this,"callResource",(e=>{const{makeCancelablePromise:t}=this.props;t(r.ZP.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then((e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})})).catch((({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})}))}))}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:o}=this.state,{anchor:i,idealDirection:n}=this.props,r=e.filter((e=>e.query)),a=n||"down",d="flyout_"+r.length;return t&&r.length>0?(0,h.jsx)(c.J2,{anchor:i,idealDirection:a,onDismiss:this.onDismiss,size:"sm",children:(0,h.jsx)(c.xu,{width:"100%",zIndex:new c.Ry(3),children:r.length>0?r.map(((e,t)=>(0,h.jsx)(c.iP,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,h.jsxs)(c.xu,{display:"flex",justifyContent:"between",alignItems:"center",color:t===o?"lightGray":"transparent",padding:1,children:[(0,h.jsx)(c.xu,{flex:"grow",children:(0,h.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:e.query})}),(0,h.jsx)(c.xu,{flex:"none",children:(0,h.jsx)(c.xv,{inline:!0,size:"100",children:(0,l.nk)(this.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(e.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,h.jsx)(s.Z,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query))):null})},d):null}}function p(e){const t=(0,d.ZP)(),o=(0,a.Z)();return(0,h.jsx)(_,{...e,makeCancelablePromise:o,i18n:t})}},253585:(e,t,o)=>{o.d(t,{Z:()=>g});var i=o(667294),n=o(898781),s=o(784590),r=o(349700),a=o(883119),l=o(785893);function d({pin:e}){const t=(0,n.ZP)(),{data:o}=(0,s.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.id}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0});return o&&o.pinned_to_board&&"quick_creates"!==o.pinned_to_board.layout?(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(a.xu,{color:"errorBase","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,l.jsx)(a.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,r.nk)(t._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(o.pinned_to_board||{}).name}).join(" ")})}),(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,l.jsx)(a.JO,{accessibilityLabel:"",color:"error",icon:"heart",size:26})})]}):null}var c=o(431256),h=o(950035),u=o(407043);function _(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class p extends i.Component{constructor(...e){super(...e),_(this,"state",{flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),_(this,"updateDescription",(e=>{this.props.updateDescription&&this.props.updateDescription(e)})),_(this,"handleDescriptionBlur",(e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:o}=this.state;this.updateDescription(t),this.setState({description:t,editing:o})})),_(this,"handleDescriptionEdit",(()=>{this.setState({editing:!0})})),_(this,"handleHashtagAddition",(e=>{const{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t.id,aux_data:{hashtags:e}});const o=this.state.flyoutCursorIndex,i=Number(o+this.state.hashtagQuery.length),n=this.state.description.slice(0,o)+e+" "+this.state.description.slice(i);this.updateDescription(n),this.setState({description:n,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}))}render(){const{color:e,isFirstPin:t,pin:o,pinImageRef:i}=this.props,{description:n,editing:s,flyoutOpened:r,hashtagQuery:u,isHashtagFlyoutOpen:_}=this.state,{images:p,link:g}=o,m=p&&p["236x"],b=m&&m.url||o.image_base64;return(0,l.jsxs)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:r&&s?{transform:"translateY(-75px)"}:{}},children:[(0,l.jsxs)(a.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[o&&o.id&&(0,l.jsx)(d,{pin:o}),(0,l.jsx)(a.xu,{paddingY:t?9:0,width:240,children:(0,l.jsx)(a.xu,{ref:i,maxHeight:r&&s?220:335,rounding:4,overflow:"hidden",children:b?(0,l.jsx)(a.Ee,{alt:n,src:b,naturalHeight:(null==m?void 0:m.height)||1,naturalWidth:(null==m?void 0:m.width)||1}):!!g&&(0,l.jsx)(h.Z,{color:e||"",description:n,url:g})})})]}),this.anchor&&_?(0,l.jsx)(c.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:u}):null]})}}function g(e){const{logContextEvent:t}=(0,u.v)();return(0,l.jsx)(p,{...e,logContextEvent:t})}},804081:(e,t,o)=>{o.d(t,{Au:()=>oe,SN:()=>ie,ZP:()=>se});var i=o(667294),n=o(50924),s=o(966338),r=o(27255),a=o(756777),l=o(898781),d=o(972246),c=o(780280),h=o(936776),u=o(116303),_=o(985913),p=o(883119),g=o(785893);function m(e){const t=(0,l.ZP)(),{body:o,img:i,onClick:n,selected:s,title:r,username:a,valid:d}=e,c=a||o;return(0,g.jsx)(p.xu,{marginBottom:4,children:(0,g.jsx)(p.iP,{onTap:n,children:(0,g.jsxs)(p.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[i,(0,g.jsxs)(p.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,g.jsx)(p.xu,{marginBottom:1,children:(0,g.jsx)(p.xv,{lineClamp:1,weight:"bold",children:r})}),(0,g.jsx)(p.xv,{size:"100",lineClamp:1,children:c})]}),(0,g.jsx)(p.xu,{marginStart:2,children:(h=s,u=d,a?h?(0,g.jsx)(p.JO,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"check-circle",size:32}):(0,g.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,g.jsx)(p.zx,{color:"gray",disabled:!!h||Boolean(!u),size:"sm",text:h?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')}))})]})})});var h,u}var b=o(6637),x=o(730447),f=o(784590);function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function y(e,t,o){const{id:i}=e;return t===o.findIndex((e=>e.id===i))}function P(e,t){b.ZP.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function C(e,t){b.ZP.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}class j extends i.Component{constructor(...e){super(...e),v(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),v(this,"isIdSelected",{}),v(this,"handleTextFieldChange",(({value:e})=>{this.setState({value:e})})),v(this,"handleCollaboratorClick",(e=>{const{id:t,type:o}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:i}=this.state,n=i.concat([e]),s="email"===o?P:C;this.props.onSelectedCollaboratorsChange({id:t,resource:s}),this.setState({selectedCollaborators:n})})),v(this,"handleTypeaheadSuggestionsChange",(e=>{this.setState({typeaheadSuggestions:e})}))}componentDidMount(){this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map((e=>{const{id:t,type:o}=e;this.isIdSelected[t]=!this.isIdSelected[t];const i="email"===o?P:C;return this.props.onSelectedCollaboratorsChange({id:t,resource:i}),null}))}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,o=t||[],i=(""===e?this.state.selectedCollaborators.concat(o).filter(y):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,h.Z)(e)}).concat(o).filter(y)).map((e=>function(e,t,o,i){if("user_share_suggestion"===e.type||"user"===e.type){const i=(0,g.jsx)(u.Z,{name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,g.jsx)(m,{img:i,onClick:()=>o(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:n,valid:s}=e,r=(0,g.jsx)(p.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,g.jsx)(p.JO,{accessibilityLabel:i._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),a=(0,_.Z)(i._('Email {{ email }}', ' - ', ' -- '),{email:n});let l,d;return t?(l=i._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),d=()=>{}):(l=s?i._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):i._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),d=()=>s?o(e):void 0),(0,g.jsx)(m,{body:l,img:r,onClick:d,selected:t,title:a,valid:s})}}(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n))).map(((e,t)=>(0,g.jsx)("li",{children:e},t)));return(0,g.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[(0,g.jsx)(p.xu,{paddingX:3,paddingY:2,children:(0,g.jsx)(p.xv,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,g.jsx)(p.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,g.jsx)(p.xu,{flex:"grow",children:(0,g.jsx)(x.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,g.jsx)(p.Um,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:e})})})}),(0,g.jsx)(p.xu,{overflow:"scrollY",paddingX:3,children:(0,g.jsx)("ul",{children:i})})]})}}function w(e){const t=(0,l.ZP)(),o=(0,f.Z)({name:"ShareSuggestionsResource",noCache:!0});return(0,g.jsx)(j,{...e,i18n:t,shareSuggestionsResource:o})}const A=(0,d.Z)((function({createBoardError:e,inputName:t,nameValidatorErrors:o,onBoardCreate:n,onCancel:s,onChangeBoardName:d,onChangeBoardPrivacy:h,onInvite:u,privacy:_,preselectedCollaborators:m,saving:b,showTitle:x,isAdAccountOwner:f}){const v=(0,l.ZP)(),{isRTL:y}=(0,c.B)(),P=0===o.length,C=_===r.Z.BoardPrivacy.SECRET;return(0,g.jsx)(p.xu,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,g.jsx)("form",{onSubmit:e=>{e.preventDefault(),n()},style:{height:"100%"},children:(0,g.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[x&&(0,g.jsx)(p.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,g.jsx)(p.X6,{size:"400",children:v._('Create board', ' - ', ' -- ')})}),(0,g.jsxs)(p.xu,{padding:3,children:[(0,g.jsx)(p.xu,{marginBottom:2,children:(0,g.jsx)(p.__,{htmlFor:"boardEditName",children:(0,g.jsx)(p.xv,{size:"100",children:v._('Name', ' - ', ' -- ')})})}),(0,g.jsx)(p.xu,{children:(0,g.jsx)(p.nv,{errorMessage:o.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>d(e),placeholder:v._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:t})})]}),f&&(0,g.jsxs)(i.Fragment,{children:[(0,g.jsxs)(p.xu,{padding:3,children:[(0,g.jsx)(p.xu,{marginBottom:2,children:(0,g.jsx)(p.__,{htmlFor:"secret",children:(0,g.jsx)(p.xv,{size:"100",children:v._('Secret', 'secret board', 'secret board')})})}),(0,g.jsx)(p.xu,{children:(0,g.jsx)(p.rs,{id:"secret",onChange:h,switched:C})})]}),(0,g.jsx)(p.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",overflow:"hidden",children:(0,g.jsx)(p.xu,{width:"100%",children:(0,g.jsx)(w,{onSelectedCollaboratorsChange:u,preselectedCollaborators:m})})})]}),!f&&(0,g.jsx)(i.Fragment,{children:(0,g.jsxs)(p.xu,{padding:3,children:[(0,g.jsx)(p.xu,{marginBottom:2,children:(0,g.jsx)(p.__,{htmlFor:"protected",children:(0,g.jsx)(p.xv,{size:"100",children:v._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,g.jsx)(p.xu,{children:(0,g.jsx)(p.rs,{disabled:!0,id:"protected",onChange:()=>{},switched:!0})})]})}),(0,g.jsxs)(p.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},bottom:!0,color:"white",display:"flex",justifyContent:"between",left:y,paddingX:4,paddingY:2,position:"absolute",right:!y,width:720,children:[(0,g.jsx)(p.kC,{children:(0,g.jsx)(p.zx,{onClick:s,text:v._('Cancel', 'cancel board create', 'cancel board create')})}),(0,g.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"end",children:[!!e&&(0,g.jsx)(p.xu,{paddingX:2,children:(0,g.jsx)(p.xv,{align:"center",color:"error",size:"200",weight:"bold",children:e})}),(0,g.jsx)(a.Z,{disabled:!t.trim()||!P||!!e||b,submitting:b,text:v._('Create', 'create a new board', 'create a new board')})]})]})]})})})}));var S=o(275903),z=o(931319),I=o(957119);class B extends i.Component{constructor(...e){var t,o,i;super(...e),i=e=>{const{board:t,i18n:o,sectionsResource:{data:i}}=this.props,n=o._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),s=o._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return e.length>=2?[{items:(0,I.j)([t],e),customProps:{inSectionSelection:!0}},{items:(0,I.j)(null!=i?i:[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:n},{items:null!=i?i:[],title:s}]},(o="getSections")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:o,isSelectMode:i,onSectionCreate:n,onSectionSelected:s,pinId:r}=this.props;return(0,g.jsx)(z.Z,{isSelectMode:i,boardSavedTo:o,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:n,onSelected:s,pinId:r})}}function k(e){const t=(0,l.ZP)(),o=(0,f.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,g.jsx)(B,{...e,i18n:t,sectionsResource:o})}var T=o(414327),E=o(407043),M=o(19121);function D(e,t,o){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...o?{advertiser_id:o,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:undefined,shortlist_suggestions:2}}class Z extends i.Component{constructor(...e){var t,o,i;super(...e),i=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:o,boards_shortlist:i}=t,n=(e=>{const t=[],o=[];return e.forEach((e=>{var i;null!==(i=e.name)&&void 0!==i&&i.match(/^\d/)?o.push(e):t.push(e)})),[...t,...o]})(o);return n.length<=3?[{items:n}]:e.length>=2?[{items:(0,I.j)(n,e)}]:[i.length?{items:i,title:this.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:n,title:this.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]},(o="getSections")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}render(){const{boardResource:{data:e,error:t,isLoaded:o},boardSavedTo:i,isSelectMode:n,onBoardCreate:s,onBoardSelected:r,pinId:a}=this.props,l=o&&!!e&&e.all_boards.length<=3;return(0,g.jsx)(z.Z,{isSelectMode:n,boardSavedTo:i,hasLoadError:!!t,hasLowBoardCount:l,isLoaded:o,getSections:this.getSections,onCreate:s,onSelected:r,pinId:a})}}function R(e){const t=(0,l.ZP)(),o=(0,M.Z)(),i=(0,s.useSelector)((({advertiser:e})=>{if(o.isAuth&&e&&e.owner_user_id!==o.id)return e.id})),n=(0,s.useSelector)((({advertiser:e})=>{if(o.isAuth&&e&&e.owner_user_id!==o.id)return e.owner_user_id})),r=(0,f.Z)({name:"BoardPickerBoardsResource",options:D(e.pinId,n,i)});return(0,g.jsx)(Z,{...e,boardResource:r,i18n:t})}function L(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class O extends i.Component{constructor(...e){super(...e),L(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),L(this,"close",(()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:o}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):o()})),L(this,"sendInvites",(e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach((o=>{t[o].resource(e.id,[o])}))})),L(this,"handleInvite",(e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const o={...t};delete o[e.id],this.setState({inviteQueue:o})}else{const o=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:o})}})),L(this,"handleBoardCreate",(e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)})),L(this,"handleBoardSave",((e,t)=>{const{selectedSectionBoard:o}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:n,invalidateResource:s}=this.props;if(s(),n(),o&&"board_section"===e.type){return i(o,e,t)}const r=e,{section_count:a=0}=r;!o&&"number"==typeof a&&a>0?this.setState({selectedSectionBoard:r},this.manageModalTitle):(this.sendInvites(e),i(r,void 0,t))})),L(this,"handleCreate",(e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const o=e?13105:13025,i=e?10306:249;this.props.logContextEvent({event_type:101,component:o,element:i})})),L(this,"manageModalTitle",(()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:o}=this.state;e&&e(o&&t?this.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):o&&!t?this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t&&!o?this.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))}))}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:o,onToggleFlyout:i,pinId:n,preselectedCollaborators:s,setModalTitle:r,suggestedBoardTitle:a}=this.props,{newName:l,selectedSectionBoard:d,showCreate:c}=this.state,h=!!d,u=!r;return(0,g.jsxs)(p.xu,{display:"flex",position:"relative",width:"100%",children:[!c&&(0,g.jsx)(p.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:d?(0,g.jsx)(k,{board:d,boardSavedTo:e,isSelectMode:o,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):(0,g.jsx)(R,{boardSavedTo:e,isSelectMode:o,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinId:n})}),c&&!d&&(0,g.jsx)(A,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:i,pinId:n,prefilledName:l||a,preselectedCollaborators:s,showTitle:u}),c&&d&&(0,g.jsx)(S.Z,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:l,isRepin:t,onClearModal:this.close,showTitle:u})]})}}const F=(0,s.connect)(null,(function(e,t){return{invalidateResource:()=>{e((0,T.jB)("BoardPickerBoardsResource",D(t.pinId)))},invalidatePinBetterSaveResource:()=>{e((0,T.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))((function(e){const{logContextEvent:t}=(0,E.v)(),o=(0,l.ZP)();return(0,g.jsx)(O,{...e,i18n:o,logContextEvent:t})}));var N=o(121151),U=o(253585),H=o(124237),W=o(366974),$=o(107193);const G="publish_actions",q={checkFbTimelinePermission:function(e){(0,$.default)((function(t){t.api("/me/permissions",(t=>{const o=t.data;let i=!1;if(o){i=!!o.find((e=>e.permission===G&&"granted"===e.status))}i?e.success&&e.success():e.error&&e.error()}))}),W.Z)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const o=e.getAuthResponse();return!o||t===o.userID},maybeRequestFbTimelinePermission:function(e,t,o){(0,$.default)((i=>{if(!q.fbConnectedAccountMatchesLoggedInAccount(i,o))return H.Z.showError(t._('Oops! Your account is linked to a different Facebook account than the one you\'re logged into now.', ' - ', ' -- ')),e.error&&e.error(),void(e.complete&&e.complete());q.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){q.fbLogin(e)}})}),W.Z)},fbLogin:function(e){(0,$.default)((t=>{t.login((t=>{t.authResponse?q.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()}),{scope:G})}),W.Z)}},V=q;var Y=o(260409),X=o(79830);function J({onSocialConnect:e}){const t=(0,l.ZP)(),o=(0,M.Z)(),{data:n,isLoaded:s}=(0,f.Z)({name:"UserResource",options:{user_id:o&&o.isAuth?o.id:"",field_set_key:"social_connect"}}),[r,a]=(0,i.useState)(!!(s&&n&&n.facebook_publish_stream_enabled)),[d,c]=(0,i.useState)(!!(s&&n&&n.twitter_publish_enabled));if((0,i.useEffect)((()=>{s&&n&&(a(!!n.facebook_publish_stream_enabled),c(!!n.twitter_publish_enabled))}),[n,s]),!n)return null;const{connected_to_facebook:h,twitter_url:u}=n,_=t=>{a(t),Y.Z.set("facebook_publish_stream_enabled",t),e(X.vq,t)};return!(!h&&!u)&&(0,g.jsxs)(p.xu,{display:"flex",padding:2,children:[h&&(0,g.jsxs)(p.xu,{display:"flex",alignItems:"center",marginStart:2,children:[(0,g.jsx)(p.XZ,{checked:r,id:"share_facebook",onChange:()=>{r?_(!1):V.maybeRequestFbTimelinePermission({success:()=>_(!0),error:()=>_(!1)},t)},size:"sm"}),(0,g.jsx)(p.__,{htmlFor:"share_facebook",children:(0,g.jsx)(p.xu,{marginStart:2,children:(0,g.jsx)(p.xv,{children:t._('Post to Facebook', ' - ', ' -- ')})})})]}),u&&(0,g.jsxs)(p.xu,{display:"flex",alignItems:"center",marginStart:5,children:[(0,g.jsx)(p.XZ,{checked:d,id:"share_twitter",onChange:()=>{const t=!d;c(t),e(X.Ib,t)},size:"sm"}),(0,g.jsx)(p.__,{htmlFor:"share_twitter",children:(0,g.jsx)(p.xu,{marginStart:2,children:(0,g.jsx)(p.xv,{children:t._('Post to Twitter', ' - ', ' -- ')})})})]})]})}var K=o(4392);const Q=({board:e,completeCreateSectionAction:t,height:o,onClose:n,pinImport:r,url:a,width:d})=>{const h=(0,l.ZP)(),{isRTL:u}=(0,c.B)(),_=(0,s.useDispatch)(),[m,b]=(0,i.useState)(""),[x,f]=(0,i.useState)(!1),[v,y]=(0,i.useState)(null);return(0,g.jsx)(N.ZP,{accessibilityModalLabel:h._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),heading:(0,g.jsx)(p.xu,{paddingY:8,children:(0,g.jsxs)(p.kC,{justifyContent:"center",children:[(0,g.jsx)(p.xu,{maxWidth:400,children:(0,g.jsx)(p.X6,{align:"center",size:"500",children:h._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,g.jsx)(p.xu,{left:u,padding:8,position:"absolute",right:!u,top:!0,children:(0,g.jsx)(p.hU,{icon:"cancel",accessibilityLabel:h._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),size:"md",iconColor:"darkGray",onClick:n})})]})}),footer:(0,g.jsx)(p.kC,{children:(0,g.jsx)(p.xu,{marginStart:"auto",children:(0,g.jsx)(p.zx,{fullWidth:!0,text:h._('Add', 'sectionCreateModal.add.button', 'add a new section'),color:"red",onClick:()=>{e&&(f(!0),_((0,K.Z)({boardId:e.id,name:m.trim(),pinImport:r},h)).then((o=>{t(e,o,!1)})).catch((e=>{y(e.message_detail||e.message)})).finally((()=>{f(!1)})))},disabled:x||!m.trim()||!!v,size:"lg"})})}),onDismiss:n,size:"sm",children:(0,g.jsx)(p.xu,{padding:8,children:(0,g.jsxs)(p.kC,{children:[(0,g.jsx)(p.zd,{rounding:4,height:o,width:d,children:(0,g.jsx)(p.Ee,{alt:"",fit:"cover",src:a||"",naturalHeight:null!=o?o:1,naturalWidth:null!=d?d:1})}),(0,g.jsx)(p.xu,{marginStart:8,dangerouslySetInlineStyle:{__style:{width:d?`calc(100% - ${d}px)`:"100%"}},children:(0,g.jsx)(p.nv,{errorMessage:v,id:"sectionEditName",onChange:e=>{b(e.value),y(null)},placeholder:h._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),label:h._('Name', 'section.create.label', 'label text for section input'),size:"lg",type:"text",value:m})})]})})})};var ee=o(491606);function te(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const oe=4e3,ie={LOADING:"loading",SUCCESS:"success"};class ne extends i.PureComponent{constructor(...e){super(...e),te(this,"state",{isFlyoutOpen:!1}),te(this,"pinImageRef",(0,i.createRef)()),te(this,"handleSavePinToBoard",((e,t,o)=>{const{handleSaveToBoard:i}=this.props;i(e,t,o)})),te(this,"handleToggleFlyout",(()=>this.setState((({isFlyoutOpen:e})=>({isFlyoutOpen:!e}))))),te(this,"close",(()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()})),te(this,"dismissModal",(e=>{const{dismissModal:t}=this.props;t&&t()}))}render(){const{boardSavedTo:e,boardWithSection:t,color:o,displaySuccessAnimation:s,handleNewBoardAnimationCompletion:r,handleSocialConnectSet:a,isInModal:l,newPin:d,pin:c,preselectedCollaborators:h,onBoardCreated:u,sensitiveContentNotice:_,setModalTitle:m,showCreate:b,shouldRenderContent:x,suggestedBoardTitle:f,updateDescription:v}=this.props;if(!c||!c&&!c.resourceLoaded||!x)return null;if(b&&t){var y;const{url:e,width:o,height:i}=(null===(y=c.images)||void 0===y?void 0:y["236x"])||{};return(0,g.jsx)(Q,{board:t,url:e,height:i,width:o,onClose:this.close,completeCreateSectionAction:this.handleSavePinToBoard})}let P=null;d&&d.board&&(P=d.board.name);const C=_&&_.title||this.props.modalTitle,j=_?(0,g.jsx)(ee.Z,{inModal:!0,notices:[_]}):(0,g.jsx)(p.kC,{alignItems:"stretch",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:(0,g.jsxs)(i.Fragment,{children:[(0,g.jsxs)(p.xu,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,g.jsxs)(p.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:[(0,g.jsx)(p.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,g.jsx)(U.Z,{color:o,pin:c,pinImageRef:this.pinImageRef,updateDescription:v})}),(0,g.jsx)(J,{onSocialConnect:a})]}),(0,g.jsx)(p.kC,{alignItems:"stretch",width:"60%",children:(0,g.jsx)(F,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:u,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:c.id,preselectedCollaborators:h,setModalTitle:l?m:void 0,showCreate:b,suggestedBoardTitle:f})})]}),s&&(0,g.jsx)(n.Z,{onDismiss:()=>{r(),this.dismissModal()},pin:c,pinImageRef:this.pinImageRef,selectedBoardName:P})]})});return l?(0,g.jsx)(N.ZP,{accessibilityModalLabel:C||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal'),heading:C,onDismiss:this.close,size:"md",children:j}):j}}te(ne,"defaultProps",{pwtAuxData:{}});const se=function(e){const t=(0,l.ZP)(),o=(0,M.Z)();return(0,g.jsx)(ne,{...e,i18n:t,viewer:o})}},972246:(e,t,o)=>{o.d(t,{Z:()=>g});var i=o(667294),n=o(966338),s=o(27255),r=o(310204),a=o(19121),l=o(414327),d=o(223123),c=o(898781),h=o(349700),u=o(134906),_=o(785893);function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e){class t extends i.Component{constructor(...e){super(...e),p(this,"state",{createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[(0,u.aH)({message:this.props.i18n._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,u.Gy)({max:s.Z.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,h.nk)(this.props.i18n._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:s.Z.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?s.Z.BoardPrivacy.PUBLIC:s.Z.BoardPrivacy.PROTECTED,saving:!1}),p(this,"invalidateResource",(e=>{const{dispatch:t,viewer:o}=this.props;t((0,l.jB)("BoardsResource",(0,r.Z)(o.isAuth?o.username:"",e===s.Z.BoardPrivacy.SECRET)))})),p(this,"handleChangeName",((e,t)=>{this.setState((({nameValidators:t})=>({inputName:e,nameValidatorErrors:(0,u.FU)(t,e),createBoardError:null})),(()=>{t&&this.handleCreate()}))})),p(this,"handleChangePrivacy",(()=>{this.setState((({privacy:e})=>({privacy:e===s.Z.BoardPrivacy.SECRET?s.Z.BoardPrivacy.PUBLIC:s.Z.BoardPrivacy.SECRET})))})),p(this,"handleCreate",(()=>{const{inputName:e,privacy:t}=this.state,{createBoard:o,isAdAccountOwner:i,onCreate:n,advertiser_id:s}=this.props;this.setState({saving:!0,createBoardError:null}),o({boardCreateOptions:{name:e,privacy:t,...!i&&s?{advertiser_id:s}:Object.freeze({})}}).then((e=>{this.setState({saving:!1}),n(e)})).catch((e=>{let t=this.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else if(e.message){const{message:o,message_detail:i}=e;t=i?`${o} ${i}`:o}this.setState({saving:!1,createBoardError:t})})),this.invalidateResource(t)}))}render(){return(0,_.jsx)(e,{onBoardCreate:this.handleCreate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,...this.props,...this.state})}}return p(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),function(e){const o=(0,c.ZP)(),i=(0,n.useSelector)((({advertiser:e})=>e)),s=(0,n.useDispatch)(),r=(0,a.Z)(),l=!i||r.isAuth&&i.owner_user_id===r.id,h=i&&i.id,u=(0,d.Z)();return(0,_.jsx)(t,{...e,createBoard:u,i18n:o,viewer:r,isAdAccountOwner:l,advertiser_id:null!=h?h:void 0,dispatch:s})}}},807068:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(667294),n=o(319915),s=o(947599),r=o(898781),a=o(883119),l=o(785893);const d=(0,i.lazy)((()=>o.e(61116).then(o.bind(o,648577))));function c(e){const t=(0,r.ZP)();return(0,l.jsx)(n.Z,{name:"SafeSuspense_SendObjectLoader_SendObjectWrapper",children:(0,l.jsx)(s.Z,{fallback:(0,l.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:2,children:(0,l.jsx)(a.$j,{accessibilityLabel:t._('Loading sharing', 'Accessibility label for loading sharing UI', 'Accessibility label for loading sharing UI'),show:!0})}),children:(0,l.jsx)(d,{...e})})})}},791250:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(898781),n=o(883119),s=o(785893);function r({onUpdate:e,showLabel:t=!0,value:o}){const r=(0,i.ZP)(),a=[{label:r._('Easy', 'storyboard.detailsList.field.difficulty', 'Easy difficulty rating for story pin'),value:String(1)},{label:r._('Medium', 'storyboard.detailsList.field.difficulty', 'Medium difficulty rating for story pin'),value:String(2)},{label:r._('Difficult', 'storyboard.detailsList.field.difficulty', 'Hard difficulty rating for story pin'),value:String(3)}];return(0,s.jsx)(n.kC,{alignItems:"stretch",justifyContent:"start",width:"100%",children:(0,s.jsx)(n.xu,{width:"100%",children:(0,s.jsx)(n.EI,{size:"lg",id:"servings",name:"servings",label:t?r._('Difficulty', 'storyboard.detailsList.field.difficulty', 'Header title for difficulty rating entry for story pin'):void 0,placeholder:r._('Pick a difficulty rating', 'storyboard.detailsList.field', 'Placeholder caption for difficulty rating input in story pin'),value:o,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},803405:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(667294),n=o(755742),s=o(898781),r=o(883119),a=o(785893);const l=e=>{const t=e.split("\n");t.push("");const o=[];let i,n=[];return t.forEach((e=>{const t=e.indexOf("•");t>-1?(i||(i=""),n.push(e.substring(t+1).trim())):((i||n.length>0)&&o.push({heading:i,items:n}),i=e,n=[])})),o},d=e=>{let t="";return e.forEach(((o,i)=>{const{heading:n,items:s}=o;n&&(t+=n),s&&s.length>0&&(t+="\n• "+s.join("\n• ")),i<e.length-1&&(t+="\n\n")})),t};const c=function({header:e,helperText:t,listBlocks:o,onUpdate:c,placeholderListBlocks:h}){const u=(0,s.ZP)(),_=d(h||[{heading:u._('What you\'ll need', 'storyboard.detailsList.placeholder', 'Placeholder text header for details list of story Pin'),items:[u._('Write a bullet list of tools, materials and anything else!', 'storyboard.detailsList.placeholder', 'Placeholder text instructions for details list of story Pin'),u._('Type it up or copy and paste.', 'storyboard.detailsList.placeholder', 'Placeholder text instructions for details list of story Pin')]}]),[p,g]=(0,i.useState)(o?d(o):"");return(0,a.jsx)(r.xu,{children:(0,a.jsx)(r.Kx,{id:"storyboard-details-list",helperText:t,label:e,onChange:({value:e})=>{g(e),c(l(e))},onBlur:()=>{""===p.trim()&&g("")},onKeyDown:({event:e,value:t})=>{const{keyCode:o,target:i,shiftKey:s}=e;if(i instanceof HTMLTextAreaElement){const{selectionStart:r,selectionEnd:a}=i;if(r===a){let a=0,d=0,h="";if(o===n.Z.ENTER?"\n• "!==t.substring(r-3,r)||"\n"!==t.substring(r,r+1)&&r!==t.length?s||"\n"===t.substring(r-1,r)||(a=0,h="\n• "):(a=-3,h="\n"):o!==n.Z.BACKSPACE&&o!==n.Z.DELETE||("\n• "===t.substring(r-3,r)?a=-3:"\n•"===t.substring(r-2,r)?a=-2:"\n"===t.substring(r-1,r)&&"•"===t.substring(r,r+1)&&(a=-1,d=1)),0!==a||0!==d||""!==h){const o=t.substring(0,r+a)+h+t.substring(r+d);g(o);const n=r+a+h.length;setTimeout((()=>{i.selectionStart=n,i.selectionEnd=n}),10),c(l(o)),e.preventDefault()}}}},placeholder:_,rows:7,value:p})})}},201238:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(898781),n=o(349700),s=o(883119),r=o(785893);function a({onUpdate:e,showLabel:t=!0,value:o}){const a=(0,i.ZP)(),l=[];for(let i=1;i<=50;i+=1)l.push({value:String(i),label:(0,n.nk)(a.ngettext('{{ servings }} serving', '{{ servings }} servings', i, 'storyboard.detailsList.field.servings', 'Option for number of servings a story pin recipe will provide'),{servings:i}).join("")});return(0,r.jsx)(s.kC,{alignItems:"stretch",justifyContent:"start",width:"100%",children:(0,r.jsx)(s.xu,{width:"100%",position:"relative",children:(0,r.jsx)(s.EI,{size:"lg",id:"servings",name:"servings",label:t?a._('Servings', 'storyboard.detailsList.field.servings', 'Header title for serving count entry for story pin recipe'):void 0,placeholder:a._('Pick a serving size', 'storyboard.detailsList.recipe', 'Placeholder caption for servings count input in story pin recipe'),value:o,options:l,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},70715:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(667294),n=o(898781),s=o(349700),r=o(883119),a=o(785893);function l({header:e,onUpdate:t,value:o}){const l=(0,n.ZP)(),[d,c]=(0,i.useState)(o?String(Math.floor(Number.parseInt(o,10)/60)):"0"),[h,u]=(0,i.useState)(o?String(Number.parseInt(o,10)%60):"0"),_=(e,o)=>{t(String(Number.parseInt(o,10)+60*Number.parseInt(e,10)))},p=[];for(let i=0;i<=9;i+=1)p.push({value:String(i),label:(0,s.nk)(l.ngettext('{{ hours }} hour', '{{ hours }} hours', i, 'storyboard.detailsList.recipe', 'Option for number of hours a story pin recipe will take'),{hours:i}).join("")});const g=[];for(let i=0;i<60;i+=1)g.push({value:String(i),label:(0,s.nk)(l.ngettext('{{ minutes }} minute', '{{ minutes }} minutes', i, 'storyboard.detailsList.recipe', 'Option for number of minutes a story pin recipe will take'),{minutes:i}).join("")});return(0,a.jsxs)(r.kC,{alignItems:"end",justifyContent:"start",width:"100%",children:[(0,a.jsx)(r.xu,{width:"50%",marginEnd:2,children:(0,a.jsx)(r.EI,{size:"lg",id:"hours",name:"hours",label:e,placeholder:l._('Hours', 'storyboard.detailsList.recipe', 'Placeholder caption for hours input in story pin recipe cooktime'),value:d,options:p,onChange:({value:e})=>{Number.isNaN(e)||(c(e),_(e,h))}})}),(0,a.jsx)(r.xu,{width:"50%",marginStart:2,children:(0,a.jsx)(r.EI,{size:"lg",id:"minutes",name:"minutes",placeholder:l._('Minutes', 'storyboard.detailsList.recipe', 'Placeholder caption for minutes input in story pin recipe cooktime'),value:h,options:g,onChange:({value:e})=>{Number.isNaN(e)||(u(e),_(d,e))}})})]})}},952058:(e,t,o)=>{o.d(t,{CH:()=>n,Fe:()=>r,_i:()=>s});const i=[0,2,1];function n(e){const{list_blocks:t,key_value_blocks:o}=e,i=t&&t.length>0?t.map((e=>{const{heading:t,blocks:o}=e;return{heading:t,blocks:(null!=o?o:[]).map((e=>({text:e.text?e.text:"",type:9}))),type:7}})):[];return{key_value_blocks:o&&o.length>0?o.map((e=>({category_type:e.category_type,type:8,value:e.value}))):[],list_blocks:i}}function s(e){const{list_blocks:t,key_value_blocks:o}=e,i=t&&t.length>0?t.map((e=>{const{heading:t,blocks:o}=e;return{heading:t,items:(null!=o?o:[]).map((e=>e.text?e.text:""))}})):[];return{keyValueBlocks:o&&o.length>0?o.reduce(((e,t)=>{const{category_type:o,value:i}=t;return e[null!=o?o:""]=i,e}),{}):{},listBlocks:i}}function r(e){const{keyValueBlocks:t,listBlocks:o}=e;if(!t&&!o)return null;return{list_blocks:o?o.map((e=>{const{heading:t,items:o}=e;let i=[];return o&&(i=o.map((e=>({text:e,type:9})))),{blocks:i,heading:t,type:7}})):[],key_value_blocks:(t?Object.keys(t).map((e=>{const o=t[e],n=Number.parseInt(e,10),s=i.indexOf(n)>-1&&o===Number.parseInt(o,10).toString();return o&&s?{value:o,category_type:n,type:8}:null})):[]).filter(Boolean)}}},91580:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(667294),n=o(966338),s=o(914166),r=o(708206),a=o(407043),l=o(946984),d=o(785893);const c=(0,r.compose)((0,n.connect)((({pins:e},{pinId:t,carouselSlotCurrentIndex:o})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:n}=i||{};return void 0!==o?{carouselSlotCurrentIndex:n||o||0}:{}})),(function(e){return function(t){const{logContextEvent:o}=(0,a.v)(),[n,r]=(0,i.useState)(!1),c=(0,l.Z)({shouldStopEventPropagation:!1}),{pinId:h,onDelete:u,onSubmit:_,carouselSlotCurrentIndex:p}=t;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(e,{...t,handlePinEditButtonClick:c((e=>{e&&e.stopPropagation();const{component:i,onToggleModal:n}=t;n&&n(!0),o({event_type:101,element:3,...i?{component:i}:Object.freeze({})}),r(!0)}))}),n&&(0,d.jsx)(s.ZP,{carouselSlotCurrentIndex:p,onDelete:u,onHide:()=>{r(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:_,pinId:h})]})}}))},412456:(e,t,o)=>{o.d(t,{Cf:()=>l,Jn:()=>a,OA:()=>n,pS:()=>s,q1:()=>r,xx:()=>d});var i=o(6637);function n(e,t,o){return i.ZP.create("BoardEmailInviteResource",{board_id:e,emails:t,...o?{orbac_subject_id:o}:Object.freeze({})}).callCreate()}function s(e,t,o){return i.ZP.create("BoardInviteResource",{board_id:e,invited_user_ids:t,...o?{orbac_subject_id:o}:Object.freeze({})}).callCreate()}function r(e,t){return o=>i.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().catch((()=>{}))}function a(e,t,o){return async t=>{const{invited_user:n,status:s,board:{id:r}}=e;n&&await i.ZP.create("accepted"===s?"BoardCollaboratorResource":"BoardInviteResource",{ban:o,board_id:r,field_set_key:"boardEdit",invited_user_id:n.id}).callDelete({showError:!1})}}function l(e,t){return async o=>{await i.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callCreate(),o(function(e,t){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}}}(e,t))}}function d(e,t){return async o=>{await i.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callDelete(),o(function(e){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}}}(e))}}},293880:(e,t,o)=>{o.d(t,{A8:()=>r,Cr:()=>a,ZP:()=>l,oG:()=>n,xQ:()=>s});var i=o(379725);const n=(e,t)=>o=>o((0,i.U2)("BoardResource",{options:{board_id:e,field_set_key:t}})),s=e=>n(e,"pin_count"),r=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),a=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},993404:(e,t,o)=>{function i(e){return{type:"FEED_ITEM_REORDERED",payload:e}}o.d(t,{Z:()=>i})},820384:(e,t,o)=>{function i(e){return{type:"FEED_ITEMS_ADDED",payload:e}}o.d(t,{Z:()=>i})},273022:(e,t,o)=>{function i(e,t){return{type:"SET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e,renderError:t}}}function n(e){return{type:"UNSET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e}}}o.d(t,{L:()=>n,m:()=>i})},243550:(e,t,o)=>{function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function n(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function s(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function r(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}o.d(t,{ND:()=>r,Vp:()=>s,a1:()=>i,jg:()=>n})},865615:(e,t,o)=>{o.d(t,{_:()=>n});var i=o(6637);function n(e,t,o,n){return async s=>{const r=i.ZP.create("ApiResource",{url:`/v3/pins/${e}/notes/`,data:{pin_note_content:o,...n?{orbac_subject_id:n}:Object.freeze({})}});let a;a=o?t?await r.callUpdate():await r.callCreate():await r.callDelete();const{resource_response:l}=a;s(function(e,t){return{type:"PIN_NOTE_UPDATE",payload:{pinId:e,pinNote:t}}}(e,null==l?void 0:l.data))}}},837481:(e,t,o)=>{o.d(t,{H:()=>l,Z:()=>d});var i=o(674578),n=o(6637),s=o(683190),r=o(281615),a=o(414327);function l(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}function d(e,t,o){return d=>n.ZP.create("BoardSectionEditResource",{section_id:t,...o?{orbac_subject_id:o}:Object.freeze({})}).callDelete({showError:!1}).then((()=>Promise.all([d(l(e,t)),d((0,i.Z)({feedId:e,feedType:r.DV.BOARD_SECTIONS,itemIds:[t],itemType:"board_section"})),d((0,s.Tq)(e,"pin_count")),d((0,a.jB)("BoardSectionsRepinResource",{board_id:e}))])))}},676297:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(417498),n=o(280773),s=o(6637),r=o(281615),a=o(414327),l=o(837481);function d(e,t,o){return d=>s.ZP.create("BoardSectionsMergeResource",{source_section_id:t,target_section_id:o}).callUpdate({showError:!1}).then((s=>Promise.all([d((0,l.H)(e,t)),d((0,a.jB)("BoardSectionsRepinResource",{board_id:e})),d((0,i.Z)(o)),d((0,n.Z)(r.DV.SECTION_PINS,o))]).then((()=>s))))}},755506:(e,t,o)=>{o.d(t,{AH:()=>s,CK:()=>n,Fi:()=>i,wS:()=>r});const i=({i18n:e,isLego:t,pin:o,useGridTitleOrRichSummary:i})=>{var n;const s=o.link_domain,r=o.native_creator,a=o.rich_metadata,l=o.rich_summary,d=o.attribution;let c,h,u,_,p,g,m,b,x=t?e._('From ', 'Closeup pin annotation', 'Closeup pin annotation'):e._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation'),f=e._('Visit', 'pin outbound link text', 'pin outbound link text'),v="",y="",P=!1;if(r?b=r:s?(b=s.official_user,y=o.domain,P=!0):(b=o.origin_pinner||o.pinner,o.origin_pinner&&(P=!0)),P&&null!==(n=b)&&void 0!==n&&n.username?(g=`/${b.username}/`,m=b.full_name):m=y,!s||a&&a.recipe&&a.recipe.from_aggregated_data)x=e._('Saved by ', 'Closeup pin annotation', 'Closeup pin annotation');else{const i=!!(a&&a.recipe&&a.recipe.name&&a.recipe.categorized_ingredients);let n;a&&a.products&&a.products[0]&&(n=!!(a&&a.products[0].name&&a.products[0].offer_summary));const s=!(!a||!a.article),r=!(!a||!a.tutorial);var C,j,w;if(n)x=e._('Product sold by ', 'pin annotation', 'pin annotation'),_=null==a||null===(C=a.products)||void 0===C?void 0:C[0].offer_summary,p=null==a||null===(j=a.products)||void 0===j?void 0:j[0].shipping_info,v=null==a||null===(w=a.products)||void 0===w?void 0:w[0].name;else if(r)t&&(x=e._('From ', 'pin annotation', 'pin annotation')),x=e._('Saved from ', 'pin annotation', 'pin annotation');else if(i){var A,S,z,I;x=e._('Recipe from ', 'pin annotation', 'pin annotation'),f=e._('Make it ', 'pin outbound link text', 'pin outbound link text'),v=null==a||null===(A=a.recipe)||void 0===A?void 0:A.name,h=null==a?void 0:a.closeup_description,u=null!==(S=null==a?void 0:a.recipe)&&void 0!==S?S:null,null!==(z=u)&&void 0!==z&&null!==(I=z.aggregate_rating)&&void 0!==I&&I.rating_value&&"number"==typeof u.aggregate_rating.review_count&&(null!=a&&a.site_name||o.domain)?u.aggregate_rating.review_source=(null==a?void 0:a.site_name)||o.domain:u&&(u.aggregate_rating=null)}else if(s){var B;c=(null==a||null===(B=a.article)||void 0===B?void 0:B.date_published)&&new Date(a.article.date_published),v=null==a?void 0:a.title,x=e._('Article from ', 'pin annotation', 'pin annotation'),f=e._('Read it ', 'pin outbound link text', 'pin outbound link text')}}if(!_&&l){let t;var k,T,E;if(l&&l.products&&l.products[0])if(t=!!(l&&l.products[0].name&&l.products[0].offer_summary),t)x=e._('Product sold by ', 'pin annotation', 'pin annotation'),_=null===(k=l.products)||void 0===k?void 0:k[0].offer_summary,p=null===(T=l.products)||void 0===T?void 0:T[0].shipping_info,v=null===(E=l.products)||void 0===E?void 0:E[0].name}const M=(o.unified_user_note||"").trim();v=o.grid_title||o.title;let D=v;if(!D&&i){const e=o.grid_title;D="string"==typeof e?e:(o.rich_summary||{}).display_name}h=o.closeup_unified_description&&o.closeup_unified_description.trim();return{actionButtonText:f,avatar:b&&"string"!=typeof b&&(b.image_medium_url||b.image_small_url)||"",pinArticleDate:c,pinAttribution:d,pinCreditLink:g,pinCreditPrefix:x,pinCredit:m,pinDescription:h,pinDownloadTitle:D,pinProduct:_,pinShippingInfo:p,pinTitle:v,pinCategory:o.category,pinRecipe:u,sourceUser:b,trimmedUserNote:M}},n=e=>{const t=e.rich_metadata;return t?t.products?144:t.article?141:t.recipe?145:139:140},s=e=>!!e.link&&!e.link.startsWith("https://i.pinimg.com"),r=e=>{if(!e)return Object.freeze({});let t;return e.native_creator?(t=e.native_creator,t):e.link_domain?(t=e.link_domain.official_user,t):(t=e.origin_pinner||e.pinner,t)}},77601:(e,t,o)=>{o.d(t,{Z:()=>n});const i="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function n({window:e,duration:t,run:o}){const n=i();let s=0,r=null;const a=()=>{const l=i()-n,d=l-s;if(t===1/0)o(0,l,d);else{const e=l/t;if(e>=1)return void o(1,l,d);o(e,l,d)}s=l,r=e.requestAnimationFrame(a)};return{start:()=>{r=e.requestAnimationFrame(a)},cancel:()=>{r&&(e.cancelAnimationFrame(r),r=null)}}}},830944:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(27255);function n(e){return e.privacy===i.Z.BoardPrivacy.SECRET}},56641:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(567831),n=o(867820);function s(e,t){if(t&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){const t=window.open(e,"_blank");return t&&(t.opener=null),t}{const t=(0,i.Z)(e);return setTimeout((()=>{(0,n.My)("setting_new_window_location")}),0),window.location.href=t,window}}},126098:(e,t,o)=>{function i(){if("undefined"!=typeof navigator&&"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&"Notification"in window&&"PushManager"in window)try{return window.Notification.permission}catch(e){return}}o.d(t,{Z:()=>i})},81636:(e,t,o)=>{o.d(t,{Q:()=>a,Z:()=>l});var i=o(667294),n=o(112690),s=o(780280),r=o(385740);function a(e,t){const{setViewContextData:o}=(0,r.sV)(),{requestIdentifier:a}=(0,s.B)(),l=(0,n.Z)();(0,i.useEffect)((()=>{var t;e&&(o({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data,component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),l({...e,event_type:13,request_identifier:a}))}),[t])}function l(e){const{children:t,log:o}=e;return a(o),t||null}},782534:(e,t,o)=>{o.d(t,{Z:()=>r,k:()=>n.k});var i=o(780280),n=o(451820),s=o(785893);const r=({dateFormatType:e,useUTC:t=!0,value:o})=>(0,s.jsx)(i.LC,{children:i=>(0,n.Z)(i.locale,o,e,t)})},969759:(e,t,o)=>{o.d(t,{Z:()=>i});const i=(e,t)=>{const o=new Date(e);return o.setDate(e.getDate()+t),o}},202139:(e,t,o)=>{o.d(t,{DH:()=>i,F4:()=>r,FS:()=>n,N1:()=>c,N9:()=>l,UK:()=>s,VL:()=>a,v6:()=>d});const i=1e3,n=60*i,s=60*n,r=24*s,a=7*r,l=30*r,d=31*r,c=365*r},451820:(e,t,o)=>{o.d(t,{Z:()=>n,k:()=>i});const i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour"};function n(e,t,o,n=!0){const s=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(o);n&&(s.timeZone="UTC");return new Intl.DateTimeFormat(e,s).format(t)}},780679:(e,t,o)=>{o.d(t,{g:()=>r,t:()=>s});var i=o(667294);const n=(0,i.createContext)(null),s=n.Provider,r=()=>(0,i.useContext)(n)},274319:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(667294),n=o(223815),s=o(934523),r=o(77601),a=o(883119),l=o(785893);function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class c extends i.Component{constructor(...e){super(...e),d(this,"state",{animation:null,visible:!1}),d(this,"setRef",(e=>{this.element||(this.element=e,null==e||e.addEventListener("dragover",this.handleDragOver),null==e||e.addEventListener("dragleave",this.handleDragLeave))})),d(this,"handleDragOver",(()=>{const{placement:e}=this.props;if(!this.state.animation){const t="top"===e?-1:1,o=(0,r.Z)({window,duration:1/0,run:(e,o,i)=>{const n=o<500?.8:1.2000000000000002;window.scrollTo(0,window.scrollY+n*t*i)}});o.start(),this.setState({animation:o})}})),d(this,"handleDragLeave",(()=>{const{animation:e}=this.state;e&&(e.cancel(),this.setState({animation:null}))})),d(this,"element",null),d(this,"visibleTimeout",null)}componentDidMount(){this.visibleTimeout=window.setTimeout((()=>this.setState({visible:!0})),500)}componentWillUnmount(){const e=this.element,{animation:t}=this.state;e&&(e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragleave",this.handleDragLeave)),t&&t.cancel(),this.visibleTimeout&&window.clearTimeout(this.visibleTimeout)}render(){const{height:e,placement:t}=this.props,{visible:o}=this.state;return(0,l.jsx)(a.xu,{bottom:"bottom"===t,dangerouslySetInlineStyle:{__style:{zIndex:16777271,visibility:o?"visible":"hidden"}},height:e,left:!0,position:"fixed",right:!0,top:"top"===t,children:(0,l.jsx)("div",{ref:this.setRef,style:{width:"100%",height:"100%"}})})}}function h({noStickyHeader:e}){const t=e?0:s.hu;return(0,l.jsx)(n.Z,{children:(0,l.jsx)(a.mh,{children:(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(c,{placement:"top",height:120+t}),(0,l.jsx)(c,{placement:"bottom",height:120})]})})})}},583421:(e,t,o)=>{o.d(t,{Z:()=>c,y:()=>a});var i=o(667294),n=o(60598),s=o(708206),r=o(785893);const a={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};const l={hover:({index:e,onDragHover:t},o,i)=>{t(e,function(e,t){const o=t.targetEl;if(!(o&&o instanceof HTMLElement))return null;const{x:i,y:n}=e.getClientOffset(),{left:s,right:r,top:a,bottom:l,width:d,height:c}=o.getBoundingClientRect();return{positionRelativeToCenter:{x:i-(s+r)/2,y:n-(a+l)/2},boundingBox:{width:d,height:c}}}(o,i))}};class d extends i.Component{render(){const{children:e,connectDragSource:t,connectDropTarget:o,isDragging:i,isDraggingInternal:n}=this.props;return t(o((0,r.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:i||n?0:1},children:e})))}}const c=(0,s.compose)((0,n.GR)((e=>e.type),l,(e=>({connectDropTarget:e.dropTarget()}))),(0,n.Ej)((e=>e.type),{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},((e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()}))))(d)},278380:(e,t,o)=>{o.d(t,{Lz:()=>i,TI:()=>n,X3:()=>s});function i(e,t){return e.itemIndex===t.itemIndex&&e.regionWithinItem===t.regionWithinItem}function n({hoverRelativePosition:{positionRelativeToCenter:{x:e},boundingBox:{width:t}},centerEnabled:o}){const i=o?.5*t:0;return Math.abs(e)<i/2?"center":e<0?"left":"right"}function s({hoverLocation:{itemIndex:e,regionWithinItem:t},sourceIndex:o}){if("center"===t||e===o)return e;const i="left"===t;return e<o===i?e:i?e-1:e+1}},345221:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(60598),n=(o(583421),o(266898)),s=o(708206);const r=e=>t=>(0,s.compose)(n.Z,(0,i.GR)(e,{},((e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()}))))(t)},701500:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(667294),n=o(249647),s=o(570470),r=o(883119),a=o(785893);class l extends i.Component{renderPulsar(){const{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:o,zIndex:i}=this.props;return(0,a.jsx)(s.Z,{anchor:e,onTouch:t,onMouseEnter:o,zIndex:i})}renderFlyout(){const{anchor:e,tooltip:t,handleDismiss:o,handleComplete:i}=this.props;if(!t)return null;const{cancelButtonText:n,confirmButtonText:s,mainText:l,idealDirection:d="down"}=t,c=n&&o&&s&&i;return(0,a.jsx)(r.J2,{anchor:e,color:"blue",idealDirection:d,onDismiss:o,shouldFocus:!1,showCaret:!0,size:"flexible",children:(0,a.jsxs)(r.xu,{maxWidth:284,padding:3,width:"max-content",children:[(0,a.jsx)(r.xv,{color:"inverse",overflow:"breakWord",weight:"bold",children:l}),c?(0,a.jsxs)(r.xu,{marginTop:2,display:"flex",alignItems:"center",children:[(0,a.jsx)(r.xu,{column:6,marginEnd:1,children:(0,a.jsx)(r.zx,{fullWidth:!0,color:"transparentWhiteText",onClick:e=>o(e),size:"md",text:String(n)})}),(0,a.jsx)(r.xu,{column:6,children:(0,a.jsx)(r.zx,{fullWidth:!0,color:"white",size:"md",text:String(s),onClick:i})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}var d=o(70061),c=o(764990),h=o(123159);function u({anchor:e,anchorElementRef:t,children:o,containerBoxConfig:s,experience:u,isHidden:_,onCompleteClick:p,zIndex:g}){var m;const{completeExperience:b,dismissExperience:x,experiences:f,viewExperience:v}=(0,h.M)(),y=(({anchor:e,anchorExperiences:t,passedExperience:o})=>o||(t?t[e]:null))({anchor:e,anchorExperiences:Object.values(f).reduce(((e,t)=>(8===t.type&&(e[(0,c.A0)(t)]=t),e)),{}),passedExperience:u}),P=(null==y||null===(m=y.display_data)||void 0===m?void 0:m.delay)||0,[C,j]=(0,i.useState)(!!P);if((0,i.useEffect)((()=>{if(P>0&&C){const e=setTimeout((()=>{j(!1)}));return()=>clearTimeout(e)}return()=>{}}),[P,C]),(0,i.useEffect)((()=>{!C&&y&&v(y.placement_id,y.experience_id)}),[C,y]),!y||C||_)return i.Children.only(o);const w=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,n.Z)(d.Z,!0)(t)})(y),A=()=>{var e;null!==(e=y.display_data)&&void 0!==e&&e.complete_on_hover&&b(y.placement_id,y.experience_id)};return(0,a.jsxs)(r.xu,{position:"relative",height:null==s?void 0:s.height,display:null==s?void 0:s.display,children:[(0,a.jsx)(r.iP,{onMouseEnter:A,onTap:()=>{p&&p(),w.skipComplete||b(y.placement_id,y.experience_id)},children:i.Children.only(o)}),(0,a.jsx)(l,{anchor:t||null,handlePulsarCompleteOnHover:A,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),x(y.placement_id,y.experience_id)},pulserOnly:!!w.pulserOnly,tooltip:w.tooltip,zIndex:g})]})}},123159:(e,t,o)=>{o.d(t,{F:()=>u,M:()=>h});var i=o(667294),n=o(966338),s=o(708206),r=o(957191),a=o(425288),l=o(332611),d=o(785893);const{Provider:c,useHook:h}=(0,a.Z)("ExperienceContext");function u({children:e}){const[t,o]=(0,i.useReducer)(((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,[t.payload]:!0};if("UNMOUNT_PLACEMENT"===t.type){const o={...e};return delete o[t.payload],o}return e}),{}),a=(0,n.useDispatch)(),h=(0,n.useSelector)((e=>e.experiences)),u=(0,i.useMemo)((()=>{const e=(0,s.bindActionCreators)({completeExperience:l.CK,dismissExperience:l.Qu,fetchAllExperiences:l.fO,fetchAllExperiencesMulti:r.NW,fetchExperienceForPlacements:l.pz,mountPlacement:l.N,triggerExperimentsForPlacement:l.kd,viewExperience:l.UT},a);return{...e,mountPlacement:(t,...i)=>{e.mountPlacement(t,...i),o({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{o({type:"UNMOUNT_PLACEMENT",payload:e})}}}),[a,o]),_=(0,i.useMemo)((()=>({experiences:h,mountedPlacements:t,...u})),[h,t,u]);return(0,d.jsx)(c,{value:_,children:e})}},636803:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(121093),n=o(839534),s=o(785893);const r=({anchors:e,idealDirection:t,onCompleteByAnchor:o,placementId:r,positionRelativeToAnchor:a,touchToDismiss:l,useMasonryFlyout:d})=>(0,s.jsx)(i.Z,{placementId:r,predicate:t=>{const{display_data:o}=t;if(2===(null==o?void 0:o.component_type)){const{anchors_by_platform:t}=o;if(null!=t&&t.web){const{anchor:o,placement:i}=t.web;return i===r&&o in e}}return!1},children:({complete:i,dismiss:r,experience:c})=>(0,s.jsx)(n.Z,{anchors:e,complete:i,dismiss:r,displayData:c.display_data,idealDirection:t,onCompleteByAnchor:o,platform:"web",positionRelativeToAnchor:a,touchToDismiss:l,useMasonryFlyout:d})})},839534:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=o(570470),s=o(883119),r=o(785893);const a=new s.Ry(669),l={1:"up",2:"right",3:"down",4:"left"},d=({anchors:e={},complete:t,dismiss:o,displayData:d,idealDirection:c,onCompleteByAnchor:h={},platform:u,positionRelativeToAnchor:_=!0,touchToDismiss:p=!0,useMasonryFlyout:g=!1})=>{var m;const{anchors_by_platform:b={},button_text:x,button_uri:f,display_type:v,flyout_direction:y,scroll_to_dismiss:P,scroll_to_dismiss_delay_in_seconds:C=0,text:j}=d||{},w=null===(m=b[u])||void 0===m?void 0:m.anchor,A=e[w],S=(0,i.useCallback)((()=>{P&&(window.removeEventListener("scroll",S),window.removeEventListener("touchmove",S)),p&&A&&A.removeEventListener("click",S),setTimeout((()=>o()),1e3*C)}),[A]);if((0,i.useEffect)((()=>{A&&(P&&(window.addEventListener("scroll",S),window.addEventListener("touchmove",S)),p&&A.addEventListener("click",S))}),[A]),!A)return null;const{FLYOUT:z,PULSAR:I}={FLYOUT:1,PULSAR:2},B=({children:e})=>{if(g)return(0,r.jsx)(s.mh,{zIndex:a,children:e});if(v===I){const t={};if(_)t.top=A.offsetTop,t.left=A.offsetLeft,t.width=A.offsetWidth,t.height=A.offsetHeight;else{const e=A.getBoundingClientRect();t.top=e.top+window.pageYOffset,t.left=e.left+window.pageXOffset,t.width=e.width,t.height=e.height}return(0,r.jsx)(s.xu,{position:"absolute",top:!0,left:!0,zIndex:a,dangerouslySetInlineStyle:{__style:t},children:e})}return(0,r.jsx)(s.xu,{zIndex:a,children:e})},k=l[y],T=f&&(f.startsWith("https://")||f.startsWith("http://")),E=(h||{})[w],M=()=>{P&&(window.removeEventListener("scroll",S),window.removeEventListener("touchmove",S)),p&&A.removeEventListener("click",S),t()};return(0,r.jsxs)(i.Fragment,{children:[v===I&&(0,r.jsx)(B,{children:(0,r.jsx)(n.Z,{anchor:A,onTouch:()=>{M(),E?E():A instanceof HTMLElement&&A.click()},zIndex:670})}),v===z&&(0,r.jsx)(B,{children:(0,r.jsx)(s.J2,{anchor:A,color:"blue",idealDirection:k||c||"down",onDismiss:S,positionRelativeToAnchor:!g&&_,shouldFocus:!1,showCaret:!0,size:"md",children:(0,r.jsxs)(s.xu,{padding:4,width:"220px",children:[(0,r.jsx)(s.xv,{align:"center",color:"inverse",weight:"bold",children:j}),x?(0,r.jsx)(s.xu,{display:"flex",justifyContent:"center",marginTop:4,children:(0,r.jsx)(s.xu,{column:8,children:f?(0,r.jsx)(s.zx,{fullWidth:!0,color:"white",href:f,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),M()},role:"link",size:"md",target:T?"blank":null,text:x}):(0,r.jsx)(s.zx,{fullWidth:!0,color:"white",onClick:M,size:"md",text:x})})}):null]})})})]})}},784450:(e,t,o)=>{o.d(t,{ZP:()=>p});var i=o(667294),n=o(966338),s=o(618446),r=o.n(s),a=o(764990),l=o(123159),d=o(332611),c=o(780280),h=o(785893);function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const _={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},p=(e,t={},o)=>s=>{const p=function(e){return t=>({experience:t.experiences[e],experiencesMulti:t.experiencesMulti?t.experiencesMulti[e]:void 0})}(e);o={..._,...o};const g=function(e,t,o=!0,s=!0,_=!1,p){class g extends i.Component{constructor(e){super(e),u(this,"state",{extraContext:void 0}),u(this,"setExtraContextState",(e=>{r()(this.state.extraContext,e)||this.setState({extraContext:e})}))}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(o,i){const{dispatch:n,experience:s,requestContext:a}=this.props;let l=i.extraContext,c=this.state.extraContext||t||{};"function"==typeof t&&(l=t(o,i.extraContext||{}),c=t(this.props,this.state.extraContext||{})),c&&Object.keys(c).length>0&&!r()(l,c)&&n((0,d.pz)([e],a.isBot,c)),!s||o.experience&&s.id===o.experience.id||n((0,d.kd)(e,c))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){const o="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},i=_&&null!=o&&o.advertiser_id?{advertiserId:o.advertiser_id}:void 0;this.props.mountPlacement(e,o,i)}render(){const{experience:e,experiencesMulti:t}=this.props,o={[_?"advertiserExperience":"experience"]:(0,a.E3)(e)?e:null};return(0,h.jsx)(p,{...this.props,setPlacementExtraContext:this.setExtraContextState,...o,experiencesMulti:t})}}function m(e){const t=(0,c.B)(),o=(0,n.useDispatch)(),{mountPlacement:i,unmountPlacement:s}=(0,l.M)();return(0,h.jsx)(g,{...e,dispatch:o,mountPlacement:i,requestContext:t,unmountPlacement:s})}return m.displayName=`withPlacement(${p.displayName||p.name||"Component"})`,m}(e,t,o.shouldUsePlacedExperience,o.dispatchMountActionDuringSSR,o.isAdvertiserPlacement,s);return(0,n.connect)(p)(g)}},572551:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var i=o(667294),n=o(319915),s=o(757184),r=o(317254),a=o(463076);function l(e=300,t=16,o=2){let i=`\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: ${t*e}\n}\n\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute !important;\n  visibility: hidden !important;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n\n@media (min-width: ${t*e}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${t}),\n  .gridCentered .static:nth-child(-n+${t}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: ${e}px !important;\n  }\n}\n`;for(let n=o;n<t+1;n+=1){i+=`\n@media (min-width: ${n===o?0:(n-1)*e}px) and (max-width: ${n*e-1}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${n}),\n  .gridCentered .static:nth-child(-n+${n}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: calc(100% / ${n}) !important;\n  }\n}\n`}return i}var d=o(391254),c=o(883119),h=o(444445),u=o(785893);function _(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class p extends i.Component{constructor(...e){super(...e),_(this,"renderItem",(e=>{const{comp:t}=this.props,{gutterWidth:o,paddingBottom:i}=this.getGutters();return(0,u.jsx)("div",{style:{paddingBottom:i,paddingLeft:o/2,paddingRight:o/2},children:(0,u.jsx)(t,{...e})})}))}getGutters(){const{gutterWidth:e,paddingStyle:t}=this.props,o="simplified"===t,i=o?h.oX:e,n=o?16:6;return{gutterWidth:null!=i?i:h.ZZ,paddingBottom:n}}render(){const{columnWidth:e,flexible:t,items:o,layout:i,loadItems:n,masonryRef:s,measurementStore:r,scrollContainerRef:_,serverRender:p,virtualize:g,isGridCentered:m,minCols:b}=this.props,{gutterWidth:x}=this.getGutters(),f=p?"serverRenderedFlexible":"flexible";let v;m&&(v="gridCentered");const y=()=>(null==_?void 0:_.current)||window;return(0,u.jsxs)("div",{className:v,children:[p&&(0,u.jsx)(d.Z,{unsafeCSS:t?l((e||h.yF)+x,o.length||h.g5,b||h.yc):(0,a.Z)((e||h.yF)+x,o.length||h.g5,b||h.yc)}),(0,u.jsx)(c.Rk,{columnWidth:e+x,comp:this.renderItem,gutterWidth:0,layout:t?f:null!=i?i:"basic",items:o,loadItems:n,measurementStore:r,minCols:b,ref:e=>{s&&(s.current=e)},scrollContainer:y,virtualize:g})]})}}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}_(p,"defaultProps",{gutterWidth:h.ZZ,isGridCentered:!0,minCols:h.yc,paddingStyle:"simplified",virtualize:!0});class m extends i.Component{constructor(...e){super(...e),g(this,"renderItem",(e=>{const{comp:t}=this.props;return(0,u.jsx)(n.Z,{name:"MasonryPerfTimingItem",children:(0,u.jsx)(t,{...e})})})),g(this,"loadItems",(()=>{const{isFetching:e,loadItems:t}=this.props;!e&&t&&t()}))}render(){const{cacheKey:e,columnWidth:t,flexible:o,gutterWidth:i,isGridCentered:n,items:r,layout:a,masonryRef:l,minCols:d,paddingStyle:c,scrollContainerRef:h,serverRender:_,virtualize:g}=this.props;return(0,u.jsx)(p,{columnWidth:t,comp:this.renderItem,flexible:o,gutterWidth:i,isGridCentered:n,items:r,layout:a,loadItems:this.loadItems,masonryRef:l,measurementStore:(0,s.Z)(e),minCols:d,paddingStyle:c,scrollContainerRef:h,serverRender:_,virtualize:g})}}function b({cacheKey:e,columnWidth:t,comp:o,flexible:i,gutterWidth:n,isAtEnd:s,isFetching:a,isGridCentered:l=!0,isLoaded:d,items:c,pinData:h,layout:_,loadItems:p,masonryRef:g,minCols:b,paddingStyle:x,scrollContainerRef:f,serverRender:v=!0,virtualize:y=!0,includeBackgroundImages:P,includeVideos:C}){return(0,u.jsx)(r.Z,{isAtEndOfFeed:s,pinData:h,itemCount:c.length,includeBackgroundImages:P,includeVideos:C,children:(0,u.jsx)(m,{cacheKey:e,columnWidth:t,comp:o,flexible:i,gutterWidth:n,isFetching:a,isGridCentered:l,items:c,layout:_,loadItems:p,masonryRef:g,minCols:b,paddingStyle:x,scrollContainerRef:f,serverRender:v,virtualize:y})})}},757184:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(883119);const n={};function s(e){if(null!=e)return n[e]&&n[e].screenWidth===window.innerWidth||(n[e]={screenWidth:window.innerWidth,cache:i.Rk.createMeasurementStore()}),n[e].cache}},463076:(e,t,o)=>{function i(e=236,t=16,o=2){let i="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n";for(let n=o;n<t+1;n+=1){i+=`\n@media (min-width: ${n===o?0:n*e}px) and (max-width: ${(n+1)*e-1}px) {\n  .gridCentered {\n    width: ${n*e}px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${n}),\n  .gridCentered .static:nth-child(-n+${n}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n`}return i}o.d(t,{Z:()=>i})},298361:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(898781),n=o(349700),s=o(202139);function r(){const e=(0,i.ZP)();return function(t,o){const i=new Date(t),r=new Date-i,a=Math.floor(r/s.FS),l=Math.floor(r/s.UK),d=Math.floor(r/s.F4),c=Math.floor(r/s.VL),h=Math.floor(r/s.N1),u=e.ngettext('{{ minutes }} minute ago', '{{ minutes }} minutes ago', a, ' - ', ' -- '),_=e.ngettext('{{ hours }} hour ago', '{{ hours }} hours ago', l, ' - ', ' -- '),p=e.ngettext('{{ days }} day ago', '{{ days }} days ago', d, ' - ', ' -- '),g=e.ngettext('{{ weeks }} week ago', '{{ weeks }} weeks ago', c, ' - ', ' -- '),m=e.ngettext('{{ years }} year ago', '{{ years }} years ago', h, ' - ', ' -- '),b=e.ngettext('{{ minutes }}m', '{{ minutes }}m', a, 'minutes ago abbreviated', 'minutes ago abbreviated'),x=e.ngettext('{{ hours }}h', '{{ hours }}h', l, 'hours ago abbreviated', 'hours ago abbreviated'),f=e.ngettext('{{ days }}d', '{{ days }}d', d, 'days ago abbreviated', 'days ago abbreviated'),v=e.ngettext('{{ weeks }}w', '{{ weeks }}w', c, 'weeks ago abbreviated', 'weeks ago abbreviated'),y=e.ngettext('{{ years }}y', '{{ years }}y', h, 'years ago abbreviated', 'years ago abbreviated');return h>0?(0,n.nk)(o?y:m,{years:h}).join(""):c>0?(0,n.nk)(o?v:g,{weeks:c}).join(""):d>0?(0,n.nk)(o?f:p,{days:d}).join(""):l>0?(0,n.nk)(o?x:_,{hours:l}).join(""):a>0?(0,n.nk)(o?b:u,{minutes:a}).join(""):e._('Just now', ' - ', ' -- ')}}},965261:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(6637);const n=e=>i.ZP.create("InviteAttributionResource",{invite_code:e}).callCreate();var s=o(826067);const r=(e=(e=>{}))=>{const t=(0,s.mB)(window.location.search),o=t.invite_code;o?n(o):e(t)}},329734:(e,t,o)=>{function i(e){return e&&e[1000069]&&500417===e[1000069].experience_id}o.d(t,{Z:()=>i})},720247:(e,t,o)=>{function i(e){let t=!1;return{promise:new Promise(((o,i)=>{e.then((e=>t?i({isCanceled:!0}):o(e)),(e=>i(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}}o.d(t,{Z:()=>i})},249647:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(968630),n=o.n(i);function s(e,t=!1){return o=>{if(!n()(o))return t&&Array.isArray(o)?o.map(s(e,t)):o;const i={};return Object.keys(o).forEach((r=>{const a=e(o[r],r);n()(o[r])||t&&Array.isArray(o[r])?i[a]=s(e,t)(o[r]):i[a]=o[r]})),i}}function r(e,t=!1){const o=(t,o)=>e(o);return e=>s(o,t)(e)}},317254:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(969853),n=o(667294),s=o(276602),r=o(543059);function a({children:e,isAtEndOfFeed:t,pinData:o,itemCount:a,includeBackgroundImages:l=!1,includeVideos:d=!1}){return(0,i.Z)({pinData:o,isAtEndOfFeed:t,includeBackgroundImages:l,includeVideos:d}),function(e){const t=(0,s.EV)(),o=(0,n.useRef)(null);(0,n.useEffect)((()=>{e!==o.current&&(o.current=e,t&&(0,r.ZP)(r.at))}),[!!t,e])}(a),e}},528961:(e,t,o)=>{o.d(t,{cC:()=>s,jy:()=>n,qr:()=>a,sk:()=>r});const i=e=>"number"==typeof e?Math.round(e):e,n=e=>({type:"I16",value:i(e)}),s=e=>({type:"I32",value:i(e)}),r=e=>({type:"STRING",value:e}),a=e=>({type:"BOOL",value:e})},129291:(e,t,o)=>{o.d(t,{MH:()=>l,ad:()=>a,iN:()=>d});var i=o(7789),n=o(584992);const{Provider:s,useHook:r}=(0,n.Z)({name:"board_picker",v2LoggerMetricName:16,sampleRate:i.DQ?1:.1}),a=(e,t)=>{let o="unknown";null!=t&&t.includes("pin/")?o="PinCloseup":"/"===t?o="HomeFeed":"PinBookMarklet"===t&&(o="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",o,"STRING")},l=s,d=r},584992:(e,t,o)=>{o.d(t,{Z:()=>P});var i=o(667294),n=o(425288),s=o(404646),r=o(729524),a=o(860273),l=o(169213),d=o(358864),c=o(558775),h=o(505771),u=o(985271),_=o(383434),p=o(453821),g=o(638089),m=o(607150),b=o(790348);const x=(0,_.X)("PwtStopwatch"),f=(e,t)=>{if(u.Z){if("start"===t.type&&!e.isTiming){const{name:o,startTime:i,navigationType:n}=t;return(0,b.A9)(`TIMING.${o}`),{isTiming:!0,name:o,isSampled:t.isSampled,startTime:"number"==typeof i?i:u.Z.now(),metricId:{type:"stopwatch",name:o,navigationType:n},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(!t.bypassIsTimingCheck){const o=t.name||e.name;return x("ignoring action - stopwatch is not actively timing",t),(0,b.A9)(`WARN.${o}.noTiming.${t.type}`),e}x("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t)}if("annotate"===t.type){const o=u.Z.now();return x(`adding annotation {${t.label}: ${o}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:o}])}}if("binaryAnnotate"===t.type)return x(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:o,type:i}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const n=e.binaryAnnotations[t.name].value||0;return x(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(n)}\n          operand: ${String(o)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:o?t.operation(n,o):n,type:i}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:o,type:i}}}}if("addSubspan"===t.type){x(`adding subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&x(`WARNING: adding duplicate subspan name {${t.name}}`);const o=t.id||(0,d.Z)();-1!==e.spans.findIndex((e=>e.id===o))&&x(`WARNING: adding duplicate subspan id {${t.name}: ${o}}`);let i=0;return t.startTime?i=t.startTime:e.startTime?i=e.startTime:x(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:o,startTime:i,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){var o;x(`starting subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&x(`WARNING: starting duplicate subspan name {${t.name}}`);const i=t.id||(0,d.Z)();-1!==e.spans.findIndex((e=>e.id===i))&&x(`WARNING: starting duplicate subspan id {${t.name}: ${i}}`);const n=t.parentName?null===(o=e.spans.find((e=>e.name===t.parentName)))||void 0===o?void 0:o.id:null;return{...e,spans:[...e.spans,{name:t.name,id:i,parentId:t.parentId||n,startTime:u.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(x(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce(((e,o)=>(o.name===t.name&&e.push(o),e)),[]).length>1&&(0,b.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type})}const o=t.id?e.spans.findIndex((e=>e.id===t.id)):e.spans.findIndex((e=>e.name===t.name));return o>-1?(e.spans[o].endTime=u.Z.now(),t.annotations&&(e.spans[o].annotationMap={...e.spans[o].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[o].binaryAnnotationMap={...e.spans[o].binaryAnnotationMap,...t.binaryAnnotations})):(0,b.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.reduce(((e,o)=>(o.name===t.currentName&&e.push(o),e)),[]).length>1&&(0,b.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});const o=e.spans.findIndex((e=>e.name===t.currentName));return o>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(x(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[o].name=t.newName):(0,b.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){const{startTime:o,metricId:i,pwtStaticContext:n,annotations:s,binaryAnnotations:l,isSampled:_,spans:b,traceId:f}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),_){const _=t.stopTime||u.Z.now(),v=[...b.map((t=>{t.endTime===1/0&&(t.endTime=_);const o=e.spanNameUpdates.findIndex((e=>t.name===e.currentName));return o>-1&&(x(`renaming subspan {${t.name}} to {${e.spanNameUpdates[o].newName}}`),t.name=e.spanNameUpdates[o].newName,e.spanNameUpdates=e.spanNameUpdates.filter((e=>e.newName!==t.name))),t}))];if(t.manualAndResourceSpans||0===b.length){const e=(0,d.Z)();v.push({name:"network_resources",id:e,startTime:o,endTime:_,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map((t=>(0,h.Z)((0,p.p)(t,[]),e))).filter(Boolean))}const y="initial_app_load"===i.navigationType&&(0,a.Z)(),P={type:"COMPLETE",traceId:f,startTime:o,endTime:_,spans:v,annotationMap:{...(0,r.Z)(s),...(0,m.jh)("browser_",y?(0,m.D3)(y):{})},binaryAnnotationMap:(0,g.ng)({metricId:i,pwtStaticContext:n,binaryAnnotations:l,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,c.Z)({metricId:i,pwtStaticContext:n,result:P})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]}}if("error"===t.type){const{error:o,stopwatchPerformanceObserver:i}=t;return o&&(0,b.H)(o),i&&i.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:o,pwtStaticContext:i}=e,n=t.reason||"";return(0,c.Z)({metricId:o,pwtStaticContext:i,result:{type:"ABORT",reason:n}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]}}}return e},v=({name:e,sampleRate:t,navigationType:o,manualAndResourceSpans:n=!1})=>{const r=(0,s.N5)(),a=(0,i.useRef)([]),c=(0,i.useRef)(null),[h,u]=(0,i.useReducer)(f,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]});return r?{isTiming:h.isTiming,start:i=>{if(window.PerformanceObserver){const e=1e3;a.current=[],c.current=(0,l.Z)({entryTypes:["resource"]},(t=>{a.current=a.current.concat(t.getEntries()),a.current.length>e&&(a.current=a.current.slice(-e))}))}const n={type:"start",startTime:i,name:e,navigationType:o,pwtStaticContext:r,isSampled:!t||Math.random()<t};return u(n)},stop:e=>u({type:"stop",stopTime:e,stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,manualAndResourceSpans:n}),error:e=>{u({type:"error",stopwatchPerformanceObserver:c.current,error:e})},abort:e=>u({type:"abort",stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,reason:e}),annotate:(e,t,o=!1)=>u({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:o}),binaryAnnotate:(e,t,o,i,n=!1)=>u({type:"binaryAnnotate",name:e,value:t,annotationType:o,parentId:i,bypassIsTimingCheck:n}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:o,parentId:i,bypassIsTimingCheck:n=!1})=>u({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:o,parentId:i,bypassIsTimingCheck:n}),addSubspan:({name:e,startTime:t,endTime:o,annotations:i={},binaryAnnotations:n={},parentId:s=null,id:r=null,bypassIsTimingCheck:a=!1})=>u({type:"addSubspan",name:e,startTime:t,endTime:o,annotations:i,binaryAnnotations:n,parentId:s,id:r,bypassIsTimingCheck:a}),subspanStart:({name:e,annotations:t={},binaryAnnotations:o={},parentId:i=null,parentName:n=null,id:s=null,bypassIsTimingCheck:r=!1})=>u({type:"subspanStart",name:e,annotations:t,binaryAnnotations:o,parentId:i,parentName:n,id:s,bypassIsTimingCheck:r}),subspanStop:({name:e,annotations:t,binaryAnnotations:o,id:i,parentId:n,bypassIsTimingCheck:s=!1})=>u({type:"subspanStop",name:e,annotations:t,binaryAnnotations:o,id:i,parentId:n,bypassIsTimingCheck:s}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:o,updateWhenStopwatchCompletes:i=!0})=>u({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:o,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>h.spans.filter((o=>o[e]===t)),getTraceId:()=>h.traceId}:null};var y=o(785893);const P=({name:e,v2LoggerMetricName:t,sampleRate:o,abortOnUnloadOrClientNavigation:r=!0,navigationType:a,manualAndResourceSpans:l=!1})=>{const{Provider:d,useMaybeHook:c}=(0,n.Z)(`Stopwatch_${e}`);return{Provider:function({children:t}){const n=v({name:e,sampleRate:o,navigationType:a,manualAndResourceSpans:l}),c=(0,s.fM)(),h=c?c.time:0,u=(0,i.useRef)(!1),_=null==n?void 0:n.isTiming,p=(0,i.useCallback)((t=>{u.current?(u.current=!1,null==n||n.abort(t)):(0,b.A9)(`WARN.${e}.noTiming.abort`)}),[n]),g=(0,i.useCallback)(((e,t)=>{null==n||n.annotate(e,t)}),[n]),m=(0,i.useCallback)(((e,t,o,i)=>{null==n||n.binaryAnnotate(e,t,o,i)}),[n]),x=(0,i.useCallback)((({name:e,binaryAnnotationValueAndType:t,operation:o,parentId:i,bypassIsTimingCheck:s})=>{null==n||n.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:o,parentId:i,bypassIsTimingCheck:s})}),[n]),f=(0,i.useCallback)((({name:e,startTime:t,endTime:o,annotations:i,binaryAnnotations:s,parentId:r,id:a,bypassIsTimingCheck:l})=>{null==n||n.addSubspan({name:e,startTime:t,endTime:o,annotations:i,binaryAnnotations:s,parentId:r,id:a,bypassIsTimingCheck:l})}),[n]),P=(0,i.useCallback)((({name:e,annotations:t,binaryAnnotations:o,parentId:i,parentName:s,id:r,bypassIsTimingCheck:a})=>{null==n||n.subspanStart({name:e,annotations:t,binaryAnnotations:o,parentId:i,parentName:s,id:r,bypassIsTimingCheck:a})}),[n]),C=(0,i.useCallback)((({name:e,annotations:t,binaryAnnotations:o,id:i,parentId:s,bypassIsTimingCheck:r})=>{null==n||n.subspanStop({name:e,annotations:t,binaryAnnotations:o,id:i,parentId:s,bypassIsTimingCheck:r})}),[n]),j=(0,i.useCallback)((({currentName:e,newName:t,bypassIsTimingCheck:o,updateWhenStopwatchCompletes:i})=>{null==n||n.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:o,updateWhenStopwatchCompletes:i})}),[n]),w=(0,i.useCallback)(((e,t)=>n?n.getSpans(e,t):[]),[n]),A=(0,i.useCallback)((()=>n?n.getTraceId():0),[n]),S=(0,i.useCallback)((t=>{u.current?(u.current=!1,null==n||n.error(t)):(0,b.A9)(`WARN.${e}.noTiming.error`)}),[n]),z=(0,i.useCallback)((e=>{u.current&&(null==n||n.abort("duplicated_init_stopwatch_action")),u.current=!0,null==n||n.start(e)}),[n]),I=(0,i.useCallback)((t=>{u.current?(u.current=!1,null==n||n.stop(t)):(0,b.A9)(`WARN.${e}.noTiming.stop`)}),[n]);(0,i.useEffect)((()=>()=>{r&&p("unloadOrClientNavigation")}),[h]);const B=(0,i.useMemo)((()=>({isTiming:_,abort:p,addAnnotation:g,addBinaryAnnotation:m,binaryAnnotationOperation:x,addSubspan:f,subspanStart:P,subspanStop:C,getSpans:w,getTraceId:A,updateSubspanName:j,stop:I,error:S,start:z})),[_,p,g,m,x,f,P,C,w,A,j,I,S,z]);return(0,y.jsx)(d,{value:B,children:t})},useHook:c}}},729524:(e,t,o)=>{o.d(t,{Z:()=>i});const i=e=>{let t={};e.forEach((({label:e,timestamp:o})=>{t={...t,[e]:(t[e]||[]).concat([o])}}));let o=Object.freeze({});return Object.keys(t).forEach((e=>{(t[e]||[]).forEach(((t,i)=>{const n=i?`${e}_${i+1}`:e;o={...o,[n]:t}}))})),o}},780280:(e,t,o)=>{o.d(t,{B:()=>l,LC:()=>r,P2:()=>s,fH:()=>a});var i=o(667294);const n=(0,i.createContext)(),s=n.Provider,r=({children:e})=>{const t=(0,i.useContext)(n);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)},a=({children:e})=>{const t=(0,i.useContext)(n);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)};function l(){const e=(0,i.useContext)(n);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e}},730447:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(667294),n=o(254469);function s({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:o,resourceName:s,resourceOptions:r,value:a}){const l=(0,n.Z)({allowSearchOnMount:e,resourceName:s,resourceOptions:r,value:a});return(0,i.useEffect)((()=>{null!=l&&l.length&&o(l)}),[l]),t||null}},254469:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294);const n=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},s=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};s.prototype.set=function(e,t){let o=this._uidToData[e];o||(o=new n(e,t),this._uidToData[e]=o,this._numItems+=1),this._moveToFront(o),this._numItems>this._maxNumItems&&this._evict()},s.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},s.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},s.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},s.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};const r=s;var a=o(6637);function l({resourceName:e,resourceOptions:t}){const o={...t,count:"count"in t?t.count:5},i=a.ZP.create(e,o),n=new r,s=()=>{i.abort()};return async function(e,t){const o=n.get(`${t}-${e}`);if(o){const t=o.items;if(t&&t.length){s();return{hint:o.hint,items:t,term:e}}}return e.length>=0?(async(e,t)=>{var o;if(i.isCalling()){var r,a;const o=null===(r=i.options)||void 0===r?void 0:r.term,n=null===(a=i.options)||void 0===a?void 0:a.pin_scope;if(e===o&&t===n)return;s()}const{bookmarks:l,...d}=i.options||{};i.options={...d,term:e,pin_scope:t};const c=null===(o=(await i.callGet({showError:!1})).resource_response)||void 0===o?void 0:o.data,h=null==c?void 0:c.items,u=(null==c?void 0:c.hint)||{},_={hint:u,items:h};return n.set(`${t}-${e}`,_),{term:e,items:h,hint:u}})(e,t):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:o={},value:n}){const s=(0,i.useRef)(!1),r=(0,i.useRef)({}),[a,d]=(0,i.useState)([]),c=function({resourceName:e,resourceOptions:t}){const o=(0,i.useRef)();return o.current||(o.current=l({resourceName:e,resourceOptions:t})),o.current}({resourceName:t,resourceOptions:o}),h=o.pin_scope||"pins",u=`${h}-${n}`;return(0,i.useEffect)((()=>{(async()=>{if(null!=n&&(e||s.current))if(u in r.current)d(r.current[u]);else try{const e=await c(n,h);if(e){const{items:t}=e;r.current[u]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}s.current||(s.current=!0)})()}),[n,h,u]),a}},458882:(e,t,o)=>{o.d(t,{l:()=>s,r:()=>r});var i=o(667294);const n=(0,i.createContext)(null),s=()=>(0,i.useContext)(n),r=n.Provider},667679:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(458882),n=o(780679);const s=()=>{const e=(0,n.g)(),t=(0,i.l)();return o=>{const{mobileOptions:i,desktopOptions:n,reason:s,attributionLabel:r}=o;var a;e?e.showDesktopSignupModal({modalType:null!==(a=null==n?void 0:n.modalType)&&void 0!==a?a:"signup",reason:s,attributionLabel:r,...null==n?void 0:n.modalOptions}):t&&t.showMobileSignupModal({reason:s,attributionLabel:r,headingType:null==i?void 0:i.headingType})}}},224496:(e,t,o)=>{o.d(t,{Cc:()=>d,RR:()=>i,YB:()=>n,YL:()=>r,h8:()=>l,pE:()=>a,yR:()=>s});const i="0.8.0",n=9/16,s=8,r=10;function a(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}const l={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},d={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},700314:(e,t,o)=>{function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,{B:()=>s,n:()=>n});const n=(e,t)=>{const o=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(null==e||!e.match(o)||null==t||!t.match(o))return null;const i=null==e?void 0:e.split("."),n=null==t?void 0:t.split("."),s=Math.max((null!=i?i:"").length,(null!=n?n:"").length);for(let l=0;l<s;l+=1){var r,a;const e=l<(null!==(r=null==i?void 0:i.length)&&void 0!==r?r:0)?parseInt(null==i?void 0:i[l],10):0,t=l<(null!==(a=null==n?void 0:n.length)&&void 0!==a?a:0)?parseInt(null==n?void 0:n[l],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class s{constructor(e,t,o){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=o,this.remaining=o,"undefined"!=typeof window&&(this.intervalId=window.setInterval((()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)}),500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},140582:(e,t,o)=>{function i(e,t){if(!t)return e;const o=new RegExp(/http(s?):/);if(!o.test(e)){const i=o.exec(t);if(i&&i.length){e=i[0]+e}}return e}o.d(t,{Z:()=>i})},342877:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(667294),n=o(720247);function s(){const e=(0,i.useRef)([]),t=(0,i.useRef)({});return(0,i.useEffect)((()=>()=>{[...Object.keys(t.current).map((e=>t.current[e])),...e.current].forEach((e=>e()))}),[]),function(o,i){if(i){const e=t.current[i];e&&(e(),delete t.current[i])}const{cancel:s,promise:r}=(0,n.Z)(o);return i?t.current[i]=s:e.current.push(s),r}}},134906:(e,t,o)=>{o.d(t,{Bh:()=>c,CU:()=>r,FU:()=>w,G$:()=>x,GT:()=>a,Gy:()=>g,J_:()=>P,Jx:()=>_,MZ:()=>m,VC:()=>u,VG:()=>l,ZA:()=>d,Zt:()=>p,a3:()=>A,aH:()=>s,nw:()=>f,oR:()=>v,qA:()=>h,qp:()=>C,sG:()=>b,vd:()=>j,xk:()=>y});var i=o(89254);const n=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},o=String(e).split("");return o.forEach(((e,i)=>{const n=t[e];n&&(o[i]=n)})),o.join("")};function s(e){return function(t,o){const i=[];t&&/\S/.test(t)||i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}const r=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function a(e){return function(t,o){const i=[];(t=t&&t.trim())&&!t.match(r)&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function l(e){return function(t,o){const i=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function d(e){return function(t,o){const i=[];t&&(Number.isNaN(parseInt(t))&&i.push(e.invalidAgeString),e.ageTooShortString&&t<10&&i.push(e.ageTooShortString),t<=0||t>=300?i.push(e.invalidAgeString):e.checkUnderAgeWithString&&t<13&&i.push(e.checkUnderAgeWithString));const n={errors:i,warnings:[]};return o&&o(n),n}}function c(e){return function(t,o){const i=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),n=[],s=!1!==e.checkLength&&i.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!s||n.push(e.message);const r={errors:n,warnings:[]};return o&&o(r),r}}function h(e){return function(t,o){const i=/^\d+$/,s=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=n(t))&&!t.match(i)&&s.push(e.message));const r={errors:s,warnings:[]};return o&&o(r),r}}function u(e){return function(t,o){const i=/^[\d\ -]+$/,s=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=n(t))&&!t.match(i)&&s.push(e.message));const r={errors:s,warnings:[]};return o&&o(r),r}}function _(e){return function(t,o){const i=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function p(e){return function(t,o){const n=[];if(t)try{const o=(0,i.Z)(t);o&&o.protocol&&("http"!==o.protocol||"localhost"===o.hostname)||n.push(e.message)}catch(r){n.push(e.message)}const s={errors:n,warnings:[]};return o&&o(s),s}}function g(e){return function(t,o){const i=[];(e.should_trim||!1)&&(t=t&&t.trim());const n=t.length;e.min&&n<e.min?i.push(e.minErrorString):e.max&&n>e.max&&i.push(e.maxErrorString);const s={errors:i,warnings:[]};return o&&o(s),s}}function m(e){return function(t,o){const i=!e.checkExclusion,n=e.substrings,s=[];(i&&!n.some((e=>t.includes(e)))||!i&&n.some((e=>t.includes(e))))&&s.push(e.message);const r={errors:s,warnings:[]};return o&&o(r),r}}function b(e){return function(t,o){const i=[];t!==(e&&e.targetValue)&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function x(e){return function(t,o){t&&(t=parseFloat(t));const i=[];t<=e.value&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function f(e){return function(t,o){t&&(t=parseFloat(t));const i=[];t<e.value&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function v(e){return function(t,o){const i=[];/^[\040-\176]*$/.test(t)||i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function y(e){return function(t,o){let i=2;if(e.hasFractionalCents)i=3;else if(e.currencyCode){const{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();i=t}const n=new RegExp(i?`^\\d*(\\.\\d{1,${i}})?$`:"^\\d*$"),s=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(n)&&(t=t&&t.trim(),s.push(e.message));const r={errors:s,warnings:[]};return o&&o(r),r}}function P(e){return function(t,o){t=t&&t.trim();const i=[],n=new Date(t);t&&!n.getTime()&&i.push(e.message);const s={errors:i,warnings:[]};return o&&o(s),s}}function C(e){return function(t,o){const i=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function j(e){return function(t,o){const i=[];e.pattern.test(t)||i.push(e.message);const n={errors:i,warnings:[]};return o&&o(n),n}}function w(e,t){const o=e.map((e=>e(t).errors));return[].concat(...o)}function A(e,t){let o="";return t.some((t=>{const i=t(e);return i.errors.length>0&&(o=i.errors[0],!0)})),o}},845772:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(717615),n=o(19121),s=o(231947);const r=()=>{const e=(0,n.Z)(),t=(0,i.Z)();return(0,s.lJ)(e,t)}},87732:(e,t,o)=>{o.d(t,{a:()=>h,S:()=>c});var i=o(667294),n=o(6637);const s={boardMap:{}};function r(e=s,t){if("BLOCKING_ACTIONS_UPDATED"===t.type){const{payload:{boardId:o,blockingActions:i}}=t;let n=null,s=null;const r={};return i.forEach((({section_id:e,progress:t,id:o,created_timestamp:i})=>{const a={id:o,createdAt:i,progress:t};e?"-1"===e?n=a:r[e]=a:s=a})),{...e,boardMap:{...e.boardMap,[o]:{wholeBoard:n,unorganized:s,sectionMap:r}}}}return e}var a=o(425288),l=o(785893);const{Provider:d,useMaybeHook:c}=(0,a.Z)("BlockingAction");function h({children:e}){const[t,o]=(0,i.useReducer)(r,s),a=(0,i.useCallback)((e=>function(e){return n.ZP.create("BoardActionStatusResource",{board_id:e}).callGet({showError:!1}).then((e=>new Promise(((t,o)=>{const i=e&&e.resource_response&&e.resource_response.data&&e.resource_response.data.blocking_actions;i?t(i):o(new Error("No blocking actions found in the response"))}))))}(e).then((t=>(o({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:t}}),t)))),[]),c=(0,i.useMemo)((()=>({blockingActions:t,fetchBlockingActions:a})),[t,a]);return(0,l.jsx)(d,{value:c,children:e})}},980750:(e,t,o)=>{o.d(t,{Z:()=>v});var i=o(87732),n=o(343341),s=o(667294),r=o(391254),a=o(50286),l=o(898781),d=o(883119),c=o(499128),h=o(785893);function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _(){const e=(0,l.ZP)();return(0,h.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"around",overflow:"hidden",children:[(0,h.jsx)(r.Z,{unsafeCSS:"\n@keyframes spin {\n  from {\n    opacity: 1;\n    transform: rotate(0deg);\n  }\n\n  to {\n    opacity: 1;\n    transform: rotate(360deg);\n  }\n}"}),(0,h.jsx)(d.xu,{display:"block",opacity:0,dangerouslySetInlineStyle:{__style:{animationDelay:"0.3s",animationDuration:"1.2s",animationIterationCount:"infinite",animationName:"spin",animationTimingFunction:"linear"}},children:(0,h.jsx)(d.JO,{accessibilityLabel:e._('board action pending', 'accessibility label for board action toast to indicate pending action', 'accessibility label for board action toast to indicate pending action'),color:"inverse",icon:"knoop",size:40})})]})}class p extends s.Component{constructor(...e){super(...e),u(this,"state",{hiding:!1,visible:!1}),u(this,"handleHide",(()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,c.Vg)})),u(this,"handleMouseEnter",(()=>{window.clearTimeout(this.timeout)})),u(this,"handleMouseLeave",(()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3)}))}componentDidMount(){this.firstLine&&(window.setTimeout((()=>{this.setState({visible:!0})}),100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3))}get firstLine(){const{actionType:e,actionStatus:t,location:{isSection:o}}=this.props,i="completed"===t;switch(e){case"create_section":return i?this.props.i18n._('Created section', 'toast text to indicate a section has been created successfully', 'toast text to indicate a section has been created successfully'):this.props.i18n._('Creating section', 'toast text to indicate a section is being created', 'toast text to indicate a section is being created');case"delete_pins":return o?i?this.props.i18n._('Deleted Pins from', 'toast text to notify Pins have been deleted from a section', 'toast text to notify Pins have been deleted from a section'):this.props.i18n._('Deleting Pins from', 'toast text to notify Pins are being deleted from a section', 'toast text to notify Pins are being deleted from a section'):i?this.props.i18n._('Deleted Pins from', 'toast text to notify Pins have been deleted from a board', 'toast text to notify Pins have been deleted from a board'):this.props.i18n._('Deleting Pins from', 'toast text to notify Pins are being deleted from a board', 'toast text to notify Pins are being deleted from a board');case"move_pins":return o?i?this.props.i18n._('Moved to', 'toast text to notify pins have been moved to this section', 'toast text to notify pins have been moved to this section'):this.props.i18n._('Moving to', 'toast text to notify pins are being moved to this section', 'toast text to notify pins are being moved to this section'):i?this.props.i18n._('Moved to', 'toast text to notify pins have been moved to this board', 'toast text to notify pins have been moved to this board'):this.props.i18n._('Moving to', 'toast text to notify pins are being moved to this board', 'toast text to notify pins are being moved to this board');case"merge":return o?i?this.props.i18n._('Moved to', 'toast text to notify anotehr section has been merged to this section', 'toast text to notify anotehr section has been merged to this section'):this.props.i18n._('Moving to', 'toast text to notify another section is being merged to this section', 'toast text to notify another section is being merged to this section'):i?this.props.i18n._('Moved to', 'toast text to notify another board has been merged to this board', 'toast text to notify another board has been merged to this board'):this.props.i18n._('Moving to', 'toast text to notify another board is being merged to this board', 'toast text to notify another board is being merged to this board');default:return null}}render(){const{actionStatus:e,deviceType:t,location:o}=this.props,{visible:i,hiding:n}=this.state;if(!this.firstLine)return null;const r="inProgress"===e?`${o.name}...`:o.name;return(0,h.jsx)(d.xu,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,dangerouslySetInlineStyle:{__style:(0,c.UZ)({deviceType:t,visible:i,hiding:n})},children:(0,h.jsx)(d.FN,{text:(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(d.xv,{children:this.firstLine}),(0,h.jsx)(d.xv,{weight:"bold",children:r})]}),thumbnail:"completed"===e?void 0:(0,h.jsx)(_,{})})})}}function g(e){const t=(0,a.ZP)(),o=(0,l.ZP)();return(0,h.jsx)(p,{...e,deviceType:t,i18n:o})}const m=["merge","move_pins","create_section"];let b=0;const x={};const f=(e,t,o,i)=>({hideToast:n})=>{var s;return(0,h.jsx)(g,{actionType:t,actionStatus:e,duration:2e3,location:{name:i?i.title:null!==(s=o.name)&&void 0!==s?s:"",isSection:!!i},onHide:n})};function v(){var e;const{showToast:t}=(0,n.F9)(),{fetchBlockingActions:o}=null!==(e=(0,i.S)())&&void 0!==e?e:{fetchBlockingActions:e=>new Promise((e=>e([])))};return{showBlockingActionToast:({actionType:e,board:i,section:n})=>{t(f("inProgress",e,i,n)),function({check:e,checkDelay:t,checkInterval:o,onComplete:i}){const n=`timeout${b}`;b+=1;const s=()=>{const t=Date.now();e().then((e=>{const r=Date.now()-t;e?(i(),delete x[n]):x[n]=setTimeout(s,Math.max(1e3,o-r))})).catch((()=>{delete x[n]}))};x[n]=setTimeout(s,t)}({check:()=>o(i.id).then((t=>!function({blockingActions:e,actionType:t,boardId:o,sectionId:i}){return e.find((e=>!(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}}(e.action_type)!==t||m.includes(e.action_type)&&e.is_origin||e.board_id!==o||(i?i!==e.section_id:e.section_id&&"-1"!==e.section_id)||1===e.progress)))}({blockingActions:t,actionType:e,boardId:i.id,sectionId:n&&n.id}))),checkDelay:2e3,checkInterval:5e3,onComplete:()=>t(f("completed",e,i,n))})}}}},491606:(e,t,o)=>{o.d(t,{Z:()=>g});var i=o(667294),n=o(149230),s=o(883119),r=o(785893);function a({action:e,alignCenter:t}){const{title:o,description:i,button:a}=e,l=o&&o.text,d=i&&i.text,c=a&&a.text||"",h=a&&a.link||"",u=a&&a.link?a.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"",_=a&&c&&h.startsWith("http"),p=(0,n.Z)({url:h}),g=_&&p?"nofollow":"none";return _?(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.xu,{marginBottom:1,children:(0,r.jsx)(s.xv,{align:t?"center":"start",weight:"bold",children:""!==c?c:"Visit"})}),(0,r.jsx)(s.xu,{marginBottom:1,children:(0,r.jsx)(s.rU,{rel:g,href:h,children:(0,r.jsx)(s.xv,{align:t?"center":"start",lineClamp:1,weight:"normal",underline:!0,children:u})})})]}):(0,r.jsxs)(s.xu,{children:[!!l&&(0,r.jsx)(s.xu,{marginBottom:1,children:(0,r.jsx)(s.xv,{align:t?"center":"start",weight:"bold",children:l})}),!!d&&(0,r.jsx)(s.xu,{marginBottom:1,children:(0,r.jsx)(s.xv,{align:t?"center":"start",children:d})})]})}function l(e,t){const o=[];let i=0;for(let n=0;n<t.length;n+=1){const a=t[n];if(5===a.tag_type&&a.link){const t=e.substring(a.offset,a.offset+a.length),n=(0,r.jsx)(s.xv,{inline:!0,weight:"bold",children:(0,r.jsx)(s.rU,{inline:!0,target:"blank",href:a.link,underline:"hover",children:t},t)});o.push((0,r.jsx)("span",{children:e.substring(i,a.offset)})),o.push(n),i=a.offset+a.length}}return i>0&&o.push((0,r.jsx)("span",{children:e.substring(i)})),0===o.length?[(0,r.jsx)("span",{children:e})]:o}const d={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},c={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function h({inModal:e,notice:t}){const{title:o,description:i,actions:n=[]}=t,h=i&&i.text||"",u=i&&i.text_tags||[],_=1===n.length,p=l(h,u);return(0,r.jsxs)(s.xu,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?c:d},children:[!!o&&!e&&(0,r.jsx)(s.xu,{marginBottom:2,display:"flex",children:(0,r.jsx)(s.X6,{size:"500",children:o})}),!!h&&(0,r.jsx)(s.xu,{marginBottom:4,children:(0,r.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,r.jsx)(s.xv,{overflow:"normal",align:e?"center":"start",children:p})})}),!!n.length&&(0,r.jsx)(s.xu,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row",children:n.map((t=>(0,r.jsx)(s.xu,{column:e||_?12:6,paddingY:1,paddingX:2,children:(0,r.jsx)(a,{action:t,alignCenter:e||_})},JSON.stringify(t))))})]})}function u({notice:e}){const{actions:t=[],description:o,footer:i}=e,n=l(o&&o.text||"",o&&o.text_tags||[]),a={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,r.jsxs)(s.xu,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3,children:[(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:656,rounding:8,children:(0,r.jsxs)(s.xu,{height:"100%",width:"100%",padding:10,children:[(0,r.jsx)("span",{style:a,children:n}),(0,r.jsx)(s.xu,{marginTop:6,children:t.map((e=>{var t;const o=null===(t=e.button)||void 0===t?void 0:t.link;var i,n,l;return o&&o.startsWith("tel")?(0,r.jsxs)(s.xu,{children:[(0,r.jsx)("span",{style:{fontWeight:"600",...a},children:null===(i=e.title)||void 0===i?void 0:i.text}),(0,r.jsx)("span",{style:a,children:null===(n=e.description)||void 0===n?void 0:n.text})]}):(0,r.jsx)(s.rU,{href:o||"",children:(0,r.jsx)(s.xu,{display:"inlineBlock",children:(0,r.jsx)(s.xu,{alignItems:"center",color:"infoBase",display:"flex",justifyContent:"center",height:44,rounding:"pill",paddingX:12,children:(0,r.jsx)(s.xv,{color:"inverse",weight:"bold",children:(null===(l=e.button)||void 0===l?void 0:l.text)||""})})})})}))})]})}),!!i&&(0,r.jsx)(s.xu,{paddingY:2,width:540,children:(0,r.jsx)(s.rU,{inline:!0,target:"blank",href:i.link,underline:"hover",children:(0,r.jsx)(s.xv,{align:"center",color:"subtle",size:"100",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:i.text}})})},i.link)})]})}var _=o(829407),p=o(407043);function g({inModal:e,notices:t,viewType:o,query:n,sensitivity:s}){const{logContextEvent:a}=(0,p.v)();return(0,_.Z)((()=>{o&&a({event_type:120,component:13367,view_type:o,aux_data:{entered_query:n,advisory_details:null==s?void 0:s.advisory_details,advisory_level:null==s?void 0:s.advisory,severity_level:null==s?void 0:s.severity}})})),(0,r.jsx)(i.Fragment,{children:t.map((t=>2===t.style?(0,r.jsx)(u,{notice:t}):(0,r.jsx)(h,{notice:t,inModal:e})))})}},423671:(e,t,o)=>{o.d(t,{IR:()=>n,St:()=>i,Uz:()=>s});const i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},n={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function s(e){return!!e&&e.severity===n.ABUSIVE}},42503:(e,t,o)=>{function i(e){if(null==e)return!1;let t=!!e.notices&&e.notices.length>0;var o;e.notices&&e.notices.length>0&&(null===(null===(o=e.notices[0])||void 0===o?void 0:o.title)&&(t=!1));return!!e.notice||t}o.d(t,{Z:()=>i})},979607:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(883119),n=o(785893);function s(e){const{htmlFor:t,errorMessage:o}=e;return(0,n.jsx)(i.__,{htmlFor:t,children:(0,n.jsx)(i.xu,{marginTop:1,children:(0,n.jsx)(i.xv,{color:"error",size:"200",children:o})})})}},70598:(e,t,o)=>{o.d(t,{Z:()=>P});var i=o(966338),n=o(829407),s=o(898781),r=o(112690),a=o(728214),l=o(602574),d=o(667679),c=o(19121),h=o(957314),u=o(755506),_=o(281180),p=o(50286),g=o(925927),m=o(343341),b=o(687999),x=o(867820),f=o(883119),v=o(785893);const y=({children:e,pulsar:t,testId:o})=>t.show?(0,v.jsx)(f.xu,{position:"relative","data-test-id":o,children:(0,v.jsxs)(f.iP,{tapStyle:"none",onTap:t.onClick,children:[(0,v.jsx)(f.xu,{position:"absolute",marginTop:-5,dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},children:e}),(0,v.jsx)(f.xu,{position:"absolute",marginTop:-12,dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},children:(0,v.jsx)(f.o3,{})})]})}):(0,v.jsx)(f.xu,{"data-test-id":o,children:e});function P({auxData:e,disabled:t,disableLog:o,followEventType:P,id:C,inline:j,invertColors:w,isFollowed:A,isIdeaPin:S,isLegoEnabled:z,isSecondaryButton:I,isUserFollowButton:B,isUserMe:k,onFollow:T,onUnfollow:E,pinId:M,shouldUseLegoColors:D,showPulsar:Z,size:R,textType:L="FollowFollowing",unfollowEventType:O,viewParameter:F,viewType:N}){const U=(0,s.ZP)(),H=(0,g.TH)(),W=(0,p.HG)(),{showToast:$}=(0,m.F9)(),G=(0,r.Z)(),q=(0,d.Z)(),V=(0,a.Z)(),Y=(0,c.Z)(),X=Y&&Y.isAuth,{unauthFollowUserId:J,setUnauthFollowUserId:K}=(0,b.f)(),Q=(0,_.mN)()(C),ee=(0,i.useSelector)((({pins:e})=>M?e[M]:null)),te=(0,u.wS)(ee),oe=null!=Q?Q:te;(0,n.Z)((()=>{!W&&X&&J&&C&&J===C&&T(C)}));const ie=V({fn:()=>{X?A?(E(C),o||G({event_type:O,view_type:N,view_parameter:F,object_id_str:C,aux_data:e})):(T(C),B&&$((({hideToast:e})=>{if(!oe)return null;const t=oe.username?`/${oe.username}/`:"";return(0,v.jsx)(l.Z,{handleHide:e,text:(0,v.jsx)(f.xv,{children:U._('Following! Their created Pins will show up in your home feed!', 'followButton.follow.informationalToastText', 'Text explaining that a creator\'s Pins will show up in home feed after follow')}),userId:C,href:t,imageUrl:oe.image_medium_url})})),o||G({event_type:P,view_type:N,view_parameter:F,object_id_str:C,aux_data:e})):((0,x.My)(`mweb_unauth_follow_button.tap.${String(N)}`),5===N&&26===P&&(0,x.My)("mweb_unauth_board_page_follow_button.tap"),(0,x.NC)(A?"press_profile_unfollow":"press_profile_follow"),(0,x.LW)({action:"click",pageLocation:H,item:"board-follow-button"}),q({attributionLabel:S?"tap.unauth_idea_pin.follow_button":"tap.unauth.follow_button",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}),W||K(null!=C?C:""),(0,x.NC)("clickthrough"))},modalHeader:(0,h.N4)({i18n:U,toFollow:!A})}),ne=!A&&!!Z,se=()=>{if(k)return U._('That\'s you!', 'Follow button is disabled because this is you', 'Follow button is disabled because this is you');if("AddRemove"===L)return A?U._('Add', 'followButton.addText', 'Follow button label - unfollowed state, so user can click to "add" the follow'):U._('Remove', 'unfollowButton.removeText', 'Follow button label - followed state, so user can click to "remove" the follow');const e="FollowUnfollow"===L?U._('Unfollow', 'unfollowButton.unfollowText', 'Follow button label - followed state, so user can click to "unfollow" the follow'):U._('Following', 'Follow button label - followed state', 'Follow button label - followed state');return A?e:U._('Follow', 'Follow button label - unfollowed state', 'Follow button label - unfollowed state')};return(0,v.jsx)(y,{pulsar:ne?{show:!0,onClick:ie}:{show:!1},testId:k||A?"board-unfollow-button":"board-follow-button",children:(0,v.jsx)(f.zx,{color:D||"AddRemove"===L||!z&&I||A?"gray":"red",disabled:k||t,fullWidth:j,onClick:ne?void 0:({event:t})=>{t.preventDefault(),t.stopPropagation(),o||G({event_type:101,component:13672,element:11951,object_id_str:C,view_type:N,view_parameter:F,aux_data:e}),ie()},selected:w?!A:D&&A||!!A&&I,size:R,text:se(),accessibilityLabel:se()})})}},91214:(e,t,o)=>{o.d(t,{HW:()=>r,YW:()=>h,i3:()=>u,o2:()=>c});var i=o(667294),n=o(425288),s=o(785893);const r=660,a={educationId:null,paddingRight:0,zIndex:r};function l(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":const{educationId:o}=t.payload;return{...e,educationId:o};case"FOOTER_SET_PADDING_RIGHT":const{paddingRight:i}=t.payload;return{...e,paddingRight:i};case"FOOTER_SET_Z_INDEX":const{zIndex:n}=t.payload;return{...e,zIndex:n};default:return e}}const{Provider:d,Consumer:c,useHook:h}=(0,n.Z)("footerContext");function u({children:e}){const[t,o]=(0,i.useReducer)(l,a),n=(0,i.useCallback)((e=>o({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}})),[]),r=(0,i.useCallback)((e=>o({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}})),[]),c=(0,i.useCallback)((e=>o({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})),[]),h=(0,i.useMemo)((()=>({...t,setEducationId:r,setPaddingRight:n,setZIndex:c})),[t,r,n,c]);return(0,s.jsx)(d,{value:h,children:e})}},934523:(e,t,o)=>{o.d(t,{L1:()=>s,Rz:()=>l,WZ:()=>r,cI:()=>n,fe:()=>a,hu:()=>i});const i=64,n=80,s=22,r="HeaderContent",a=671,l={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},941353:(e,t,o)=>{o.d(t,{H:()=>d,N:()=>l});var i=o(667294),n=o(505920),s=o(425288),r=o(785893);const{Provider:a,useHook:l}=(0,s.Z)("LastSavedTo");function d({children:e}){const[t,o]=(0,i.useState)();(0,n.Z8)("BoardPickerBoardsShortlistResource",(e=>{if(!t){const t=e.response.resource_response.data;o(t)}}));const s=(0,i.useCallback)((e=>{const i=t?t.filter((t=>t.id!==e.id)):[];o([e,...i])}),[t]),l=(0,i.useMemo)((()=>({lastSavedTo:t,saveToBoard:s})),[t,s]);return(0,r.jsx)(a,{value:l,children:e})}},904411:(e,t,o)=>{o.d(t,{bn:()=>a,fJ:()=>d,gC:()=>l});var i=o(966338),n=o(425288),s=o(785893);const{Provider:r,useHook:a}=(0,n.Z)("Boards");function l(){const e=a();return t=>e[t]}function d({children:e}){const t=(0,i.useSelector)((({boards:e})=>e),i.shallowEqual);return(0,s.jsx)(r,{value:t,children:e})}},687999:(e,t,o)=>{o.d(t,{f:()=>a,w:()=>l});var i=o(667294),n=o(425288),s=o(785893);const{Provider:r,useHook:a}=(0,n.Z)("Session");function l({children:e}){const[t,o]=(0,i.useState)(void 0),n=(0,i.useCallback)((()=>o(void 0)),[]),a=(0,i.useMemo)((()=>({unauthFollowUserId:t,setUnauthFollowUserId:o,removeUnauthFollowUserId:n})),[t,n]);return(0,s.jsx)(r,{value:a,children:e})}},326015:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(667294),n=o(993786),s=o(883119),r=o(785893);const a=function({badgeSize:e,badgeSpacing:t,fullName:o,identityIsVerified:a,isVerifiedMerchant:l,truncate:d=!1}){const c=o.split(" "),h=c.slice(0,c.length-1).join(" "),u=" ".concat(c[c.length-1]);return d?(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,r.jsx)(s.xv,{lineClamp:1,weight:"bold",children:o}),(0,r.jsx)(s.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,r.jsx)(n.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]}):(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("span",{children:h}),(0,r.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[u," ",(0,r.jsx)(s.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,r.jsx)(n.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]})]})}},486840:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(667294),n=o(231486),s=o(172071),r=o(6637),a=o(226198);function l(e,t){n.t8(a.L9,"allowed",8760),t&&t(),s.Z.increment("auth.web.notifications.allowed",1);let o=e.subscriptionId;if(!o){const t=e.endpoint.split("/");o=t[t.length-1]}return r.ZP.create("WebPushDeviceResource",{}).callGet({showError:!1}).then((t=>{var i,n;const s=null!==(i=null===(n=t.resource_response)||void 0===n?void 0:n.data)&&void 0!==i?i:{};if(!(o in s)){const t={registration_id:o,subscription_endpoint:e.endpoint};return r.ZP.create("WebPushDeviceResource",t).callCreate()}}))}var d=o(19121);function c(e,t){var o;if(s.Z.increment("auth.web.notifications.viewed",1),"undefined"!=typeof navigator&&"serviceWorker"in navigator)return null===(o=navigator.serviceWorker)||void 0===o?void 0:o.ready.then((o=>{var i;null==o||null===(i=o.pushManager)||void 0===i||i.subscribe({userVisibleOnly:!0}).then((t=>l(t,e)),(o=>{"Notification"in window&&"denied"!==Notification.permission?(n.t8(a.L9,"dismissed",8760),t&&t(),s.Z.increment("auth.web.notifications.dismissed",1)):(n.t8(a.L9,"denied",8760),e&&e(),s.Z.increment("auth.web.notifications.denied",1))}))})).catch((()=>{}))}function h(){const{isAuth:e,isLimitedLogin:t}=(0,d.Z)();return(0,i.useEffect)((()=>{"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then((()=>{var o;t&&n.t8(a.L9,"denied",8760),e||n.t8(a.L9,"denied",8760),"showNotification"in ServiceWorkerRegistration.prototype||n.t8(a.L9,"denied",8760),"Notification"in window&&"denied"!==Notification.permission||n.t8(a.L9,"denied",8760),"PushManager"in window||n.t8(a.L9,"denied",8760),null===(o=navigator.serviceWorker)||void 0===o||o.ready.then((e=>e.pushManager.getSubscription())).then((e=>{if(e)return l(e);throw n.t8(a.L9,"none",8760),new Error})).catch((e=>{}))})).catch((()=>{}))}),[e,t]),c}},259986:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(883119),n=o(785893);function s(e){const{accessibilityLabel:t,bgColor:o,icon:s,onClick:r,selected:a,size:l}=e;return(0,n.jsx)(i.hU,{accessibilityLabel:t,bgColor:null!=o?o:"transparent",icon:s,iconColor:"darkGray",onClick:r,selected:a,size:null!=l?l:"lg"})}},2819:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(667294),n=o(259986),s=o(883119),r=o(785893);function a({bgColor:e,children:t,icon:o,label:a,size:l}){const d=(0,i.useRef)(null),[c,h]=(0,i.useState)(!1),u=()=>h(!1);return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.xu,{ref:d,children:(0,r.jsx)(n.Z,{accessibilityLabel:a,bgColor:e,icon:o,onClick:()=>h(!c),selected:c,size:l})}),c&&(0,r.jsx)(s.Lt,{id:"actionBarMenuButton",idealDirection:"down",anchor:d.current,onDismiss:u,zIndex:new s.Ry(1e3),children:t({handleClose:u})})]})}},56291:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(667294),n=o(966338),s=o(116303),r=o(70598),a=o(326015),l=o(883119),d=o(5226),c=o(785893);function h({isSelf:e,showVerified:t=!1,user:o={}}){const[h,u]=(0,i.useState)(o.explicitly_followed_by_me||!1),_=(0,n.useDispatch)(),{domain_verified:p,full_name:g,is_verified_merchant:m,username:b}=o,x=o.image_medium_url||o.image_small_url;return(0,c.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,paddingY:1,children:[(0,c.jsx)(l.xu,{flex:"grow",paddingX:1,children:(0,c.jsx)(l.iP,{role:"link",href:`/${b}/`,children:(0,c.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",gap:2,children:[(0,c.jsx)(l.xu,{width:50,children:(0,c.jsx)(s.Z,{name:null!=g?g:"",src:null!=x?x:"",size:"fit"})}),(0,c.jsx)(l.xv,{weight:"bold",children:t&&(m||p)?(0,c.jsx)(a.Z,{badgeSize:"sm",badgeSpacing:2,fullName:null!=g?g:"",identityIsVerified:p,isVerifiedMerchant:m}):g})]})})}),(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(r.Z,{followEventType:45,id:o.id,isFollowed:h,isUserMe:Boolean(e),onFollow:e=>{_((0,d.ZN)(e)),u(!0)},onUnfollow:e=>{_((0,d.fv)(e)),u(!1)},textType:"FollowUnfollow",unfollowEventType:46,viewType:4})})]})}},957314:(e,t,o)=>{o.d(t,{N4:()=>s,Wh:()=>i,hr:()=>n});const i=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),s=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},728214:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(898781),n=o(50286),s=o(154391),r=o(957314);const a=()=>{const e=(0,i.ZP)(),t=(0,n.HG)(),{viewer:o,loginForMore:a,limitedLoginModalSubheader:l,limitedLoginModalNextLocation:d}=(0,s.H)();return"LIMITED_LOGIN"===o.type?({modalHeader:o,nextLocation:i})=>n=>{let s=null;n&&(n.nativeEvent&&n.nativeEvent instanceof Event?s=n:n.event&&(s=n.event)),s&&(s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation()),o||(o=t?(0,r.hr)(e):(0,r.Wh)(e)),null==a||a.setVisible(!0),null==l||l.setText(o),i&&(null==d||d.setRoute(i))}:({fn:e})=>e}},106860:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var i=o(667294),n=o(161087),s=o(497997),r=o(898781),a=o(780280),l=o(883119),d=o(785893);function c({height:e,onCtaDidLoad:t,width:c}){const h=(0,r.ZP)(),[u,_]=(0,i.useState)(null),{locale:p}=(0,a.B)(),g=(0,n.default)(p);(0,i.useEffect)((()=>{g&&"none"!==g&&(e=>{const t=(0,i.lazy)((()=>o(453658)(`./${e}`)));_(t)})(g)}),[g]),(0,i.useEffect)((()=>{u&&t()}),[u]);const m=h._('Open Pinterest and tap the camera icon for ideas', 'PincodeCTA.title', 'Text informing users how to use Pincodes \u2014 may be displayed or used as accessibility label for an image'),b=(0,d.jsx)(l.xv,{align:"center",children:m});return"none"===g?b:u?(0,d.jsx)(s.Z,{fallback:b,children:(0,d.jsx)(u,{height:e,title:m,width:c})}):(0,d.jsx)(l.$j,{accessibilityLabel:h._('Loading Pincode Call to Action', 'PincodeCTA.loading', 'Accessibility label for loading spinner for the Pincode call-to-action'),show:!0})}},161087:(e,t,o)=>{function i(e){switch(e.toUpperCase()){case"CS-CZ":return"CZ";case"DA-DK":return"DA";case"DE":return"DE";case"EL-GR":return"GR";case"EN-GB":return"ENUK";case"EN-US":return"ENUS";case"ES-ES":return"ESES";case"ES-MX":return"ESMX";case"ES-AR":return"ESAR";case"ES-419":return"ESMX";case"FI-FI":return"FI";case"FR":return"FR";case"HI-IN":return"HI";case"HU-HU":return"HU";case"ID-ID":return"ID";case"IT":return"IT";case"JA":return"JP";case"KO-KR":return"KR";case"MS-MY":return"MS";case"NL":return"NL";case"NB-NO":return"NO";case"PL-PL":return"PL";case"PT-BR":return"PTBR";case"PT-PT":return"PTPT";case"RO-RO":return"RO";case"RU-RU":return"RU";case"SK-SK":return"SK";case"SV-SE":return"SV";case"TH-TH":return"TH";case"TL-PH":return"TL";case"TR":return"TR";case"UK-UA":return"UA";case"VI-VN":return"VT";case"ZH-CN":return"ZHCN";case"ZH-TW":return"ZHTW";default:return"none"}}o.r(t),o.d(t,{default:()=>i})},672643:(e,t,o)=>{o.d(t,{ZP:()=>k});var i=o(667294),n=o(106860),s=o(785893);const r="M0 111c0 47 29.3 87.2 70.6 103.4-1-8.8-2-22.3.3-32l13-55s-3.4-6.7-3.4-16.5c0-15.6 9-27 20-27 9.6 0 14.2 7 14.2 15.5 0 9.6-6 23.8-9.2 37-2.7 11 5.5 20 16.4 20 19.7 0 35-20.7 35-50.8 0-26.5-19.2-45-46.5-45-31.5 0-50 23.6-50 48 0 9.6 3.6 19.8 8.2 25.4 1 1.2 1 2 .7 3.3l-3 12.5c-.5 2-1.6 2.5-3.8 1.5-13.8-6.4-22.5-26.7-22.5-43 0-35 25.6-67 73.5-67 38.5 0 68.4 27.3 68.4 64 0 38.2-24.2 69-57.7 69-11.3 0-21.8-5.8-25.4-12.7L92 188c-2.6 9.6-9.3 21.7-14 29 10.5 3.3 21.6 5 33 5 61.3 0 111-49.7 111-111S172.3 0 111 0 0 49.7 0 111z",a="#e60023",l="0 0 222 222";function d({size:e}){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:l,children:(0,s.jsx)("path",{d:r,fill:a,fillRule:"evenodd"})})}var c=o(898781),h=o(883119);function u({getThumbnailImageSrcSet:e,images:t,onTouch:o}){const i=(0,c.ZP)();return(0,s.jsx)(h.xu,{display:"flex",justifyContent:"start",maxHeight:328,overflow:"auto",padding:1,wrap:!0,children:["logo"].concat(t).map(((t,n)=>{var r,a,l,c;return(0,s.jsx)(h.xu,{padding:1,children:(0,s.jsx)(h.Zb,{children:(0,s.jsx)(h.iP,{fullWidth:!1,onTap:()=>o("logo"===t?"logo":n-1),rounding:2,children:(0,s.jsx)(h.zd,{rounding:"circle",width:85,height:85,children:"logo"===t?(0,s.jsx)(d,{size:85}):(0,s.jsx)(h.Ee,{alt:i._('Pincode Hero Image', 'accessibility label for the Pincode hero image', 'accessibility label for the Pincode hero image'),color:t.dominant_color||"#b5b5b5",fit:"cover",naturalHeight:null!==(r=t.height)&&void 0!==r?r:1,naturalWidth:null!==(a=t.width)&&void 0!==a?a:1,src:null!==(l=t.url)&&void 0!==l?l:"",srcSet:e&&e(null!==(c=t.url)&&void 0!==c?c:"")})})})})},"logo"===t?t:t.url)}))})}var _=o(784590);const p=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n  <svg xmlns="http://www.w3.org/2000/svg" width="${g||222}" height="${g||222}" x="${m||0}" y="${m||0}" viewBox="0 0 222 222">\n    <path d="${r}" fill="#e60023" fill-rule="evenodd" />\n  </svg>`.trim())}`;var g,m;const b=600;function x(e,t,o){return`\n    <image id="image"\n      x="${100+("right"===t?300:0)}"\n      y="${100+("bottom"===o?300:0)}"\n      width="${b/("row"===t?1:2)}"\n      height="${b/("column"===o?1:2)}"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n      xlink:href="${e}"\n      preserveAspectRatio="xMidYMid slice"\n    />`}function f(e,t){const o=function(e){switch(e.length){case 0:case 1:return;case 2:return[x(e[0],"left","column"),x(e[1],"right","column")].join("");case 3:return[x(e[0],"left","column"),x(e[1],"right","top"),x(e[2],"right","bottom")].join("");default:return[x(e[0],"left","top"),x(e[1],"right","top"),x(e[2],"left","bottom"),x(e[3],"right","bottom")].join("")}}(t);return o?e.replace(/<image[^>]*>/,o):e}class v extends i.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const{pincodeImageResource:e,onFetchingChange:t}=this.props;t(e.isFetching)},(o="handleFetchChange")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidMount(){const{pincodeImageResource:e}=this.props;e.isFetching||this.handleFetchChange()}componentDidUpdate(e){this.props.pincodeImageResource.isFetching!==e.pincodeImageResource.isFetching&&this.handleFetchChange()}render(){const{className:e,imageUrls:t,size:o,pincodeImageResource:{data:i,isLoaded:n}}=this.props,r=o,a=o;return(0,s.jsxs)(h.kC,{alignItems:"center",height:a,justifyContent:"center",width:r,children:[n&&!!i&&(0,s.jsx)("div",{className:e,dangerouslySetInnerHTML:{__html:f(i,t)},style:{width:r,height:a}}),(0,s.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('Loading Pincode Image', 'accessibility label for loading the Pincode image', 'accessibility label for loading the Pincode image'),show:!i})]})}}function y(e){const t=(0,c.ZP)(),o=(0,_.Z)({name:"PincodeImageResource",options:{object_id:e.id,hero_image_url:e.imageUrls[0]||p}});return(0,s.jsx)(v,{...e,i18n:t,pincodeImageResource:o})}var P=o(407043);function C(e){return new Promise(((t,o)=>{const i=new XMLHttpRequest;i.ontimeout=o,i.onreadystatechange=()=>{if(4!==i.readyState)return;if(200!==i.status)return void o();const e=new FileReader;e.onloadend=()=>{const i=e.result;"string"==typeof i?t(i.split(/,/)[1]):o()},e.readAsDataURL(i.response)},i.open("GET",e,!0),i.timeout=3e4,i.responseType="blob",i.send()}))}function j(e,t){if(!(e instanceof Element))return Promise.resolve(e);if(e instanceof window.SVGImageElement)return function(e,t){const o=e.href.baseVal;if(o.startsWith("data:"))return Promise.resolve();const i=t?t(o):o;return Promise.resolve(i).then(C).then((e=>`data:${function(e){const t=e.match(/\.([^\.\/]*?)$/);switch(t&&t[1]){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}(i)};base64,${e}`)).then((t=>new Promise(((o,i)=>{e.onerror=i,e.href.baseVal=t,window.requestAnimationFrame(o)}))))}(e,t);const o=Array.from(e.childNodes);return Promise.all(o.map((e=>j(e,t))))}function w(e,t){return new Promise(((o,i)=>{const n=document.createElement("div");n.innerHTML=e.innerHTML,j(n,t).then((()=>{const t=new Image;t.onload=()=>{window.requestAnimationFrame((()=>o(t)))},t.onerror=i;const s=n&&n.querySelector("svg");s&&(/^[0-9]+$/.test(s.getAttribute("width")||"")||s.setAttribute("width",`${e.scrollWidth}`),/^[0-9]+$/.test(s.getAttribute("height")||"")||s.setAttribute("height",`${e.scrollHeight}`));const r=n.innerHTML.replace(/(xmlns="[^"]+"[^>]*)\ xmlns="[^"]+"/,"$1");t.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(r.trim())}`}))}))}function A(e,t){return new Promise(((o,i)=>{(function(e){return new Promise(((t,o)=>{if(e.toBlob)return void e.toBlob(t);let i="";try{i=e.toDataURL("image/png")}catch(a){o()}const n=window.atob(i.split(",")[1]),s=n.length,r=new Uint8Array(s);for(let e=0;e<s;e+=1)r[e]=n.charCodeAt(e);t(new window.Blob([r],{type:"image/png"}))}))})(e).then((e=>window.URL.createObjectURL(e))).then((e=>{const i=document.createElement("a");i.download=t,i.href=e,i.style.display="none",window.document.body.appendChild(i),window.requestAnimationFrame((()=>{const t=()=>{window.requestAnimationFrame((()=>{window.URL.revokeObjectURL(e),i.removeAttribute("href"),i.removeEventListener("click",t),window.document.body.removeChild(i),o()}))};i.addEventListener("click",t),i.click()}))})).catch(i)}))}function S(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const z="pincodeMain",I="pincodeCTA";class B extends i.PureComponent{constructor(...e){super(...e),S(this,"state",{ctaIsLoaded:!1,errorFlyoutIsOpen:!1,isDownloading:!1,isFetchingPincodeImage:!1,isPickingHeroImage:!1,pickedImageIndex:0}),S(this,"getCustomHeroImages",(()=>{const{images:e,customizable:t}=this.props,{pickedImageIndex:o}=this.state;if(!t)return e;const i="logo"!==o&&e[o];return i?[i]:[]})),S(this,"normalizeUrl",(e=>{const{getMainImageURL:t}=this.props;return(e=>e.replace(/^https:\/\/[^\/]{2,}\.pinimg.com\//,"https://i.pinimg.com/"))((t||(e=>e))(e))})),S(this,"handleFetchChange",(e=>{this.setState({isFetchingPincodeImage:e})})),S(this,"handleCancelButtonClick",(()=>this.setState({isPickingHeroImage:!1}))),S(this,"handleEditButtonClick",(()=>this.setState({isPickingHeroImage:!0}))),S(this,"handleSelectImage",(e=>this.setState({isPickingHeroImage:!1,pickedImageIndex:e}))),S(this,"downloadPincodeImage",(()=>{const e=this.previewNode,{ctaIsLoaded:t,isFetchingPincodeImage:o,isDownloading:i}=this.state;if(!e||!t||o||i)return;const n=e.querySelector(".pincodeMain"),s=e.querySelector(".pincodeCTA");if(!n||!s)return;const{getDownloadImageURL:r,id:a,logContextEvent:l}=this.props;l({event_type:7078,component:13141,object_id_str:a}),this.setState({isDownloading:!0}),Promise.all([w(n,r),w(s)]).then((e=>{const[t,o]=e;return((e,t)=>{const o=document.createElement("canvas");o.width=3544,o.height=3544;const i=Math.round(.1*o.width),n=Math.round(.05*o.width),s=o.width-2*i,r=o.width-2*n,a=o.height-s,[l,d]=t.width/t.height>r/a?[r,r/t.width*t.height]:[a/t.height*t.width,a],c=o.getContext("2d");return c.fillStyle="#fff",c.fillRect(0,0,o.width,o.height),c.drawImage(e,i,0,s,s),c.drawImage(t,(o.width-l)/2,s+(o.height-s-d)/2,l,d),o})(t,o)})).then((e=>A(e,`pincode_${this.props.id}.png`))).then((()=>{this.setState({isDownloading:!1})})).catch((()=>{this.setState({errorFlyoutIsOpen:!0})}))}))}render(){const{id:e,isLoadingImages:t,images:o,getThumbnailImageSrcSet:i,customizable:r}=this.props,{ctaIsLoaded:a,errorFlyoutIsOpen:l,isFetchingPincodeImage:d,isDownloading:c,isPickingHeroImage:_}=this.state;return _?(0,s.jsx)(h.xu,{width:350,color:"default",rounding:2,padding:4,children:(0,s.jsxs)(h.xu,{children:[(0,s.jsx)(h.xu,{paddingY:1,children:(0,s.jsx)(h.X6,{size:"500",lineClamp:1,children:this.props.i18n._('Change Image', 'Title of the Pincode hero image picker modal', 'Title of the Pincode hero image picker modal')})}),(0,s.jsx)(h.iz,{}),(0,s.jsx)(u,{images:o,getThumbnailImageSrcSet:i,onTouch:this.handleSelectImage}),(0,s.jsx)(h.xu,{padding:1,children:(0,s.jsx)(h.zx,{fullWidth:!0,text:this.props.i18n._('Cancel', 'Button to dismiss Pincode hero image picker', 'Button to dismiss Pincode hero image picker'),onClick:this.handleCancelButtonClick})})]})}):(0,s.jsx)(h.xu,{width:350,color:"default",rounding:2,marginBottom:4,paddingX:4,children:(0,s.jsxs)(h.xu,{children:[(0,s.jsx)(h.xu,{ref:e=>{this.previewNode=e},children:(0,s.jsxs)(h.xu,{color:"default",display:"flex",direction:"column",alignItems:"center",justifyContent:"center",width:"100%",height:320,children:[t?(0,s.jsx)(h.kC,{alignItems:"center",height:230,justifyContent:"center",width:"100%",children:(0,s.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('Loading', 'accessibility label for loading spinner', 'accessibility label for loading spinner'),show:!0})}):(0,s.jsx)(y,{className:z,id:e,imageUrls:this.getCustomHeroImages().map((e=>{var t;return this.normalizeUrl(null!==(t=e.url)&&void 0!==t?t:"")})),onFetchingChange:this.handleFetchChange,size:230}),(0,s.jsx)(h.xu,{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:7,marginTop:2,children:(0,s.jsx)("div",{className:I,children:(0,s.jsx)(n.default,{onCtaDidLoad:()=>this.setState({ctaIsLoaded:!0}),width:300,height:78})})})]})}),(0,s.jsxs)(h.xu,{marginTop:2,padding:1,children:[r&&o.length>0&&(0,s.jsx)(h.xu,{paddingY:1,children:(0,s.jsx)(h.zx,{fullWidth:!0,text:this.props.i18n._('Change Image', 'Button to pick Pincode hero image', 'Button to pick Pincode hero image'),onClick:this.handleEditButtonClick})}),(0,s.jsxs)(h.xu,{paddingY:1,children:[(0,s.jsx)(h.xu,{ref:e=>{this.downloadButton=e},children:(0,s.jsx)(h.zx,{fullWidth:!0,text:this.props.i18n._('Download Pincode', 'Button to download the Pincode image', 'Button to download the Pincode image'),color:"red",onClick:this.downloadPincodeImage,disabled:t||!a||d||c})}),l&&(0,s.jsx)(h.J2,{anchor:this.downloadButton,color:"red",idealDirection:"down",onDismiss:()=>this.setState({errorFlyoutIsOpen:!1}),size:"sm",shouldFocus:!1,children:(0,s.jsx)(h.xu,{padding:3,children:(0,s.jsx)(h.xv,{color:"inverse",weight:"bold",children:(0,s.jsx)("span",{children:this.props.i18n._('Oops! Your browser does not support downloading Pincodes.', 'Error message shown when user attempts to download Pincode on a browser not supported', 'Error message shown when user attempts to download Pincode on a browser not supported')})})})})]})]})]})})}}function k(e){const{logContextEvent:t}=(0,P.v)(),o=(0,c.ZP)();return(0,s.jsx)(B,{...e,i18n:o,logContextEvent:t})}},529758:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=o(121151),s=o(898781),r=o(883119),a=o(407043),l=o(785893);function d({children:e,objectId:t,onHide:o}){const{logContextEvent:d}=(0,a.v)(),c=(0,s.ZP)(),h={component:13141,object_id_str:t};return(0,i.useEffect)((()=>{d({event_type:6359})}),[t]),(0,l.jsx)(n.ZP,{accessibilityModalLabel:c._('Pincode', 'pincode.pincodemodal.label', 'Accessible label for a modal showing the pincode modal'),heading:c._('Pincode', 'pincode.pincodemodal.heading', 'Heading for a modal showing the pincode.'),onDismiss:()=>{o(),d({event_type:6358,...h})},size:"sm",children:(0,l.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",children:e})})}},300267:(e,t,o)=>{function i({user:e,viewer:t}){return Boolean(t.isAuth&&(null==e?void 0:e.username)===t.username)}o.d(t,{Z:()=>i})},806986:(e,t,o)=>{o.d(t,{Fj:()=>l,JI:()=>d,aG:()=>a});var i=o(667294),n=o(785893);const s=(0,i.createContext)(),r=(0,i.createContext)();function a({children:e}){const[t,o]=(0,i.useState)(!1);return(0,n.jsx)(s.Provider,{value:t,children:(0,n.jsx)(r.Provider,{value:o,children:e})})}function l(){const e=(0,i.useContext)(s);if(void 0===e)throw new Error("useCountState must be used within a ShowBoardlessPinsContextProvider");return e}function d(){const e=(0,i.useContext)(r);if(void 0===e)throw new Error("useCountUpdater must be used within a ShowBoardlessPinsContextProvider");return e}},424432:(e,t,o)=>{o.d(t,{L:()=>a,M:()=>l});var i=o(667294),n=o(425288),s=o(785893);const{Provider:r,useMaybeHook:a}=(0,n.Z)("CreateSectionTooltip");function l({children:e}){const[t,o]=(0,i.useState)(!1),n=(0,i.useMemo)((()=>({showCreateSectionTooltip:t,setShowCreateSectionTooltip:o})),[t]);return(0,s.jsx)(r,{value:n,children:e})}},602574:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(883119),n=o(785893);function s({ideaPinImages:e}){const t={1:28,2:40,3:48},o=e.map(((e,t)=>{var o,s,r;return(0,n.jsx)(i.xu,{height:48,width:28,color:"default",borderStyle:"sm",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},children:(0,n.jsx)(i.Ee,{alt:"",src:null!==(o=null==e?void 0:e.url)&&void 0!==o?o:"",color:"#696969",fit:"cover",naturalHeight:null!==(s=null==e?void 0:e.height)&&void 0!==s?s:1,naturalWidth:null!==(r=null==e?void 0:e.width)&&void 0!==r?r:1})},t)}));return(0,n.jsx)(i.kC,{justifyContent:"center",children:(0,n.jsx)(i.kC,{justifyContent:"start",width:t[e.length],children:o})})}var r=o(499128),a=o(898781),l=o(784590),d=o(50286);function c({handleHide:e,text:t,userId:o,href:c,imageUrl:h}){const u=(0,a.ZP)(),_=(0,d.HG)(),p=(0,l.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:o}}),g=Array.isArray(t)?t.join(" "):t;if(0===(p.data||[]).length){const t=h?(0,n.jsx)(i.xu,{height:48,overflow:"hidden",width:48,children:(0,n.jsx)(i.Ee,{alt:u._('Image of who you followed', 'userFollowingToast.thumbnail.userImage', 'Profile thumbnail of the user you followed'),fit:"cover",naturalHeight:1,naturalWidth:1,src:h})}):void 0;return(0,n.jsx)(r.ZP,{duration:5e3,onHide:e,text:g,href:c,iconThumbnail:t,thumbnailShape:"circle"})}const m=(p.data||[]).slice(0,3).map((e=>{var t;return null===(t=e.images)||void 0===t?void 0:t[_?"236x":"170x"]})),b=(0,n.jsx)(s,{ideaPinImages:m});return(0,n.jsx)(r.ZP,{href:c,duration:5e3,onHide:e,iconThumbnail:b,text:g,thumbnailShape:"square"})}},935409:(e,t,o)=>{function i(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function n(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function s(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function r({viewingUserId:e,viewingUsername:t,boardId:o,boardPinCount:i}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:o,boardPinCount:i}}}o.d(t,{Br:()=>n,eo:()=>r,md:()=>s,yT:()=>i})},162158:(e,t,o)=>{o.d(t,{V:()=>r,u:()=>s});var i=o(6637),n=o(935409);const s=e=>t=>{const o={board_id:e};return i.ZP.create("BoardResource",o).callGet().then((e=>{const o=e&&e.resource_response&&e.resource_response.data;return o&&t((0,n.yT)(o)),e}))};function r(e,t,o){return(s,r)=>{const{boards:a}=r(),l=a[e],d=void 0===t.collaborator_requests_enabled||null===t.collaborator_requests_enabled?Object.freeze({}):{collaborator_requests_enabled:t.collaborator_requests_enabled},c={allow_homefeed_recommendations:t.allow_homefeed_recommendations,category:t.category,collab_board_email:t.collab_board_email,collaborator_invites_enabled:t.collaborator_invites_enabled,collaborator_permissions_setting:t.collaborator_permissions_setting,description:t.description,name:t.name,privacy:t.privacy,sensitivity:t.sensitivity||null,...o?{orbac_subject_id:o}:Object.freeze({}),...d};return s((0,n.yT)({...c,id:e})),i.ZP.create("BoardResource",{...c,board_id:e}).callUpdate().then((e=>{const o=e&&e.resource_response&&e.resource_response.data||t;return s((0,n.yT)(o)),e})).catch((e=>{throw l&&s((0,n.yT)(l)),e}))}}},628358:(e,t,o)=>{o.d(t,{Z:()=>r,f:()=>a});var i=o(6637),n=o(935409);function s(e){return i.ZP.create("BoardFollowResource",{board_id:e})}function r(e){return t=>{s(e).callCreate().catch((()=>{t((0,n.md)(e,!1))})),t((0,n.md)(e,!0))}}function a(e){return t=>{s(e).callDelete().catch((()=>{t((0,n.md)(e,!0))})),t((0,n.md)(e,!1))}}},5226:(e,t,o)=>{o.d(t,{KF:()=>d,ZN:()=>r,fv:()=>l,yA:()=>a});var i=o(6637),n=o(482546);function s(e,t){return i.ZP.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function r(e,t=null){return o=>{s(e,t).callCreate().catch((()=>o((0,n.P_)(e,!1)))),o((0,n.P_)(e,!0))}}function a(e,t=null){return async o=>{o((0,n.P_)(e,!0)),await s(e,t).callCreate().catch((t=>{throw o((0,n.P_)(e,!1)),t}))}}function l(e,t=null){return o=>{s(e,t).callDelete().catch((()=>o((0,n.P_)(e,!0)))),o((0,n.P_)(e,!1))}}function d(e,t=null){return async o=>{o((0,n.P_)(e,!1)),await s(e,t).callDelete().catch((t=>{throw o((0,n.P_)(e,!0)),t}))}}},482546:(e,t,o)=>{o.d(t,{Ge:()=>a,JS:()=>n,P_:()=>s,h2:()=>l});var i=o(6637);function n(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}const s=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),r=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),a=e=>t=>(t(r(e,!0)),i.ZP.create("UserBlockResource",{blocked_user_id:e}).callCreate().catch((()=>t(r(e,!1))))),l=e=>t=>(t(r(e,!1)),i.ZP.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch((()=>t(r(e,!0)))))},765267:(e,t,o)=>{o.d(t,{Z:()=>b});var i=o(966338),n=o(292965),s=o(863098),r=o(898781),a=o(423671),l=o(693680),d=o(826067),c=o(883119),h=o(925927),u=o(785893);function _({boardResource:{data:e,refresh:t}}){const o=(0,r.ZP)(),_=null==e?void 0:e.id,p=(0,i.useSelector)((e=>_&&(e.boards||{})[_]))||null,{search:g,state:m}=(0,h.TH)();if((0,s.Z)(),!p)return(0,u.jsx)(c.$j,{accessibilityLabel:o._('Loading Board page', 'ExperimentalBoardPageContainer.Spinner', 'Accessibility label on loading spinner'),show:!0});const b=null==m?void 0:m.newBoard,x=(0,a.Uz)(null==e?void 0:e.sensitivity),f=b&&!x&&null!=e&&e.should_show_more_ideas?l.s.jumpstartBoard:null,v=(0,d.mB)(g);return(0,u.jsx)(n.Z,{board:p,initialModalType:f,refreshBoardData:t,showPulsar:Boolean(v.showPulsar)})}var p=o(604052),g=o(19121),m=o(81636);function b(){const e=(0,g.Z)(),{username:t}=(0,h.UO)(),o=e.isAuth&&e.username===t;(0,m.Q)({view_type:5,view_parameter:o?3069:3070});const i=(0,p.Z)({name:"BoardResource",getOptions:({routeData:{params:{slug:e,username:t},parsedSearch:{orbac_subject_id:o}}})=>({username:t,slug:unescape(e||""),field_set_key:"detailed",orbac_subject_id:o})});return(0,u.jsx)(_,{boardResource:i})}}},e=>{e.O(0,[11450],(()=>{[97270,69965,77638,92982,90732,14166,42150,48035,5035,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[11450],(()=>{[97270,69965,77638,92982,90732,14166,42150,48035,5035,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[11450],(()=>{[97270,69965,77638,92982,90732,14166,42150,48035,5035,43473,22347,22538,1593].map(e.E)}),5);var t=t=>e(e.s=t);e.O(0,[97270,83119,67631,66113,62015,25927,42082,85058,48358,54372,88273,58150,25643,4066,57472,83046,69853,76532,68290,4646,3535,66898,81856],(()=>(t(506353),t(962916),t(857347))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/[username]/[slug]-authdesktop-595d9b6035d45a63.mjs.map